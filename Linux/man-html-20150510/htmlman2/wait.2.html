<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

  <title>wait(2) — Linux manual pages</title>
  <link rel="stylesheet" type="text/css" href="../stylesheet/manpages.css" />
  
  <link rel="home" href="../index.html" title="wait(2) — Linux manual pages" />
  <script type="text/javascript" src="../stylesheet/manpages.js" xml:space="preserve">
</script>
  <link rel="icon" href="../stylesheet/icon.gif" type="image/gif" />
</head>

<body onload="javascript:init()">
  <div class="navheader">
    <table width="100%">
      <tbody>
        <tr>
          <td style="width: 33%" rowspan="1" colspan="1"><a href="../index.html" shape="rect">Linux
          manual pages</a></td>

          <th rowspan="1" colspan="1"><a href="../index2.html" shape="rect">Section 2</a></th>

          <td style="width: 33%" rowspan="1" colspan="1"> </td>
        </tr>
      </tbody>
    </table>
    <hr />
  </div>

  <div class="refentry">
    <a id="wait.2" name="wait.2" shape="rect"> </a>

    <div class="titlepage"> </div>

    <div class="refnamediv">
      <h2>Name</h2>

      <p>wait, waitpid, waitid — wait for process to change
      state</p>
    </div>

    <div class="refsynopsisdiv">
      <h2>Synopsis</h2>

      <div class="informalexample">
        <pre class="programlisting" xml:space="preserve">
#include &lt;sys/types.h&gt;
#include &lt;sys/wait.h&gt;
</pre>
      </div>

      <div class="funcsynopsis">
        <table border="0" class="funcprototype-table" summary="Function synopsis" style="cellspacing: 0; cellpadding: 0;">
          <tr>
            <td rowspan="1" colspan="1"><code class="funcdef">pid_t
            <strong>wait</strong>(</code></td>

            <td rowspan="1" colspan="1">int *<var class="pdparam">status</var><code>)</code>;</td>
          </tr>
        </table>

        <div class="funcprototype-spacer">
           
        </div>
      </div>

      <div class="funcsynopsis">
        <table border="0" class="funcprototype-table" summary="Function synopsis" style="cellspacing: 0; cellpadding: 0;">
          <tr>
            <td rowspan="1" colspan="1"><code class="funcdef">pid_t
            <strong>waitpid</strong>(</code></td>

            <td rowspan="1" colspan="1">pid_t <var class="pdparam">pid</var>,</td>
          </tr>

          <tr>
            <td rowspan="1" colspan="1"> </td>

            <td rowspan="1" colspan="1">int *<var class="pdparam">status</var>,</td>
          </tr>

          <tr>
            <td rowspan="1" colspan="1"> </td>

            <td rowspan="1" colspan="1">int <var class="pdparam">options</var><code>)</code>;</td>
          </tr>
        </table>

        <div class="funcprototype-spacer">
           
        </div>
      </div>

      <div class="funcsynopsis">
        <table border="0" class="funcprototype-table" summary="Function synopsis" style="cellspacing: 0; cellpadding: 0;">
          <tr>
            <td rowspan="1" colspan="1"><code class="funcdef">int
            <strong>waitid</strong>(</code></td>

            <td rowspan="1" colspan="1">idtype_t <var class="pdparam">idtype</var>,</td>
          </tr>

          <tr>
            <td rowspan="1" colspan="1"> </td>

            <td rowspan="1" colspan="1">id_t <var class="pdparam">id</var>,</td>
          </tr>

          <tr>
            <td rowspan="1" colspan="1"> </td>

            <td rowspan="1" colspan="1">siginfo_t *<var class="pdparam">infop</var>,</td>
          </tr>

          <tr>
            <td rowspan="1" colspan="1"> </td>

            <td rowspan="1" colspan="1">int <var class="pdparam">options</var><code>)</code>;</td>
          </tr>
        </table>

        <div class="funcprototype-spacer">
           
        </div>
      </div>

      <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
        <table border="0" summary="Note">
          <tr>
            <td rowspan="2" align="center" valign="top" width="25" colspan="1">
            <img alt="[Note]" src="../stylesheet/note.png" /></td>

            <th align="left" rowspan="1" colspan="1">Note</th>
          </tr>

          <tr>
            <td align="left" valign="top" rowspan="1" colspan="1">
              <div class="featuretests">
                <table style="border-collapse: collapse;">
                  <colgroup span="1">
                    <col span="1" />
                  </colgroup>

                  <thead>
                    <tr>
                      <th style="" rowspan="1" colspan="1">Feature Test Macro Requirements
                      for glibc (see <a class="link" href="../htmlman7/feature_test_macros.7.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">feature_test_macros</span>(7)</span></a>):</th>
                    </tr>
                  </thead>

                  <tbody>
                    <tr>
                      <td style="" rowspan="1" colspan="1"><code class="function">waitid</code>():</td>
                    </tr>

                    <tr>
                      <td class="featuretestdef" style="" rowspan="1" colspan="1">
                      <code class="constant">_SVID_SOURCE</code> ||
                      <code class="constant">_XOPEN_SOURCE</code>
                      &gt;= 500 || <code class="constant">_XOPEN_SOURCE</code> &amp;&amp;
                      <code class="constant">_XOPEN_SOURCE_EXTENDED</code></td>
                    </tr>

                    <tr>
                      <td class="featuretestver" style="" rowspan="1" colspan="1">|| /*
                      Since glibc 2.12: */</td>
                    </tr>

                    <tr>
                      <td class="featuretestdef" style="" rowspan="1" colspan="1">
                      <code class="constant">_POSIX_C_SOURCE</code>
                      &gt;= 200809L</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </td>
          </tr>
        </table>
      </div>

      <div class="informalexample">
        <pre class="programlisting" xml:space="preserve">
/* This is the glibc and POSIX interface; see
                   NOTES for information on the raw system call. */
  
</pre>
      </div>
    </div>

    <div class="refsect1">
      <a id="wait-2_sect1" name="wait-2_sect1" shape="rect"> </a>

      <h2>DESCRIPTION</h2>

      <p>All of these system calls are used to wait for state
      changes in a child of the calling process, and obtain
      information about the child whose state has changed. A state
      change is considered to be: the child terminated; the child
      was stopped by a signal; or the child was resumed by a
      signal. In the case of a terminated child, performing a wait
      allows the system to release the resources associated with
      the child; if a wait is not performed, then the terminated
      child remains in a "zombie" state (see NOTES below).</p>

      <p>If a child has already changed state, then these calls
      return immediately. Otherwise, they block until either a
      child changes state or a signal handler interrupts the call
      (assuming that system calls are not automatically restarted
      using the <code class="constant">SA_RESTART</code> flag of
      <a class="link" href="../htmlman2/sigaction.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">sigaction</span>(2)</span></a>). In the
      remainder of this page, a child whose state has changed and
      which has not yet been waited upon by one of these system
      calls is termed <em class="replaceable"><code>waitable</code></em>.</p>

      <div class="refsect2">
        <a id="wait-2_sect2" name="wait-2_sect2" shape="rect"> </a>

        <h3>wait() and waitpid()</h3>

        <p>The <code class="function">wait</code>() system call
        suspends execution of the calling process until one of its
        children terminates. The call <em class="replaceable"><code>wait(&amp;status)</code></em> is
        equivalent to:</p>

        <div class="informalexample">
          <pre class="programlisting" xml:space="preserve">
    waitpid(−1, &amp;status, 0);
</pre>
        </div>

        <p>The <code class="function">waitpid</code>() system call
        suspends execution of the calling process until a child
        specified by <em class="parameter"><code>pid</code></em>
        argument has changed state. By default, <code class="function">waitpid</code>() waits only for terminated
        children, but this behavior is modifiable via the
        <em class="parameter"><code>options</code></em> argument,
        as described below.</p>

        <p>The value of <em class="parameter"><code>pid</code></em>
        can be:</p>

        <div class="variablelist">
          <dl class="variablelist">
            <dt><span class="term"><span class="emphasis"><em>&lt;
            −1</em></span></span></dt>

            <dd>
              <p>meaning wait for any child process whose process
              group ID is equal to the absolute value of <em class="parameter"><code>pid</code></em>.</p>
            </dd>

            <dt><span class="term"><span class="emphasis"><em>−1</em></span></span></dt>

            <dd>
              <p>meaning wait for any child process.</p>
            </dd>

            <dt><span class="term"><code class="constant">0</code></span></dt>

            <dd>
              <p>meaning wait for any child process whose process
              group ID is equal to that of the calling process.</p>
            </dd>

            <dt><span class="term"><span class="emphasis"><em>&gt;
            0</em></span></span></dt>

            <dd>
              <p>meaning wait for the child whose process ID is
              equal to the value of <em class="parameter"><code>pid</code></em>.</p>
            </dd>
          </dl>
        </div>

        <p>The value of <em class="parameter"><code>options</code></em> is an OR of zero or
        more of the following constants:</p>

        <div class="variablelist">
          <dl class="variablelist">
            <dt><span class="term"><code class="constant">WNOHANG</code></span></dt>

            <dd>
              <p>return immediately if no child has exited.</p>
            </dd>

            <dt><span class="term"><code class="constant">WUNTRACED</code></span></dt>

            <dd>
              <p>also return if a child has stopped (but not traced
              via <a class="link" href="../htmlman2/ptrace.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">ptrace</span>(2)</span></a>). Status
              for <em class="replaceable"><code>traced</code></em>
              children which have stopped is provided even if this
              option is not specified.</p>
            </dd>

            <dt><span class="term"><code class="constant">WCONTINUED</code> (since Linux
            2.6.10)</span></dt>

            <dd>
              <p>also return if a stopped child has been resumed by
              delivery of <code class="constant">SIGCONT</code>.</p>
            </dd>
          </dl>
        </div>

        <p>(For Linux-only options, see below.)</p>

        <p>If <em class="parameter"><code>status</code></em> is not
        NULL, <code class="function">wait</code>() and <code class="function">waitpid</code>() store status information in the
        <span class="type">int</span> to which it points. This
        integer can be inspected with the following macros (which
        take the integer itself as an argument, not a pointer to
        it, as is done in <code class="function">wait</code>() and
        <code class="function">waitpid</code>()!):</p>

        <div class="variablelist">
          <dl class="variablelist">
            <dt><span class="term"><code class="function">WIFEXITED</code>(<em class="parameter"><code>status</code></em>)</span></dt>

            <dd>
              <p>returns true if the child terminated normally,
              that is, by calling <a class="link" href="../htmlman3/exit.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">exit</span>(3)</span></a> or
              <a class="link" href="../htmlman2/_exit.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">_exit</span>(2)</span></a>, or by
              returning from main().</p>
            </dd>

            <dt><span class="term"><code class="function">WEXITSTATUS</code>(<em class="parameter"><code>status</code></em>)</span></dt>

            <dd>
              <p>returns the exit status of the child. This
              consists of the least significant 8 bits of the
              <em class="parameter"><code>status</code></em>
              argument that the child specified in a call to
              <a class="link" href="../htmlman3/exit.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">exit</span>(3)</span></a> or
              <a class="link" href="../htmlman2/_exit.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">_exit</span>(2)</span></a> or as the
              argument for a return statement in main(). This macro
              should be employed only if <code class="constant">WIFEXITED</code> returned true.</p>
            </dd>

            <dt><span class="term"><code class="function">WIFSIGNALED</code>(<em class="parameter"><code>status</code></em>)</span></dt>

            <dd>
              <p>returns true if the child process was terminated
              by a signal.</p>
            </dd>

            <dt><span class="term"><code class="function">WTERMSIG</code>(<em class="parameter"><code>status</code></em>)</span></dt>

            <dd>
              <p>returns the number of the signal that caused the
              child process to terminate. This macro should be
              employed only if <code class="constant">WIFSIGNALED</code> returned true.</p>
            </dd>

            <dt><span class="term"><code class="function">WCOREDUMP</code>(<em class="parameter"><code>status</code></em>)</span></dt>

            <dd>
              <p>returns true if the child produced a core dump.
              This macro should be employed only if <code class="constant">WIFSIGNALED</code> returned true. This
              macro is not specified in POSIX.1-2001 and is not
              available on some UNIX implementations (e.g., AIX,
              SunOS). Only use this enclosed in #ifdef WCOREDUMP
              ... #endif.</p>
            </dd>

            <dt><span class="term"><code class="function">WIFSTOPPED</code>(<em class="parameter"><code>status</code></em>)</span></dt>

            <dd>
              <p>returns true if the child process was stopped by
              delivery of a signal; this is possible only if the
              call was done using <code class="constant">WUNTRACED</code> or when the child is
              being traced (see <a class="link" href="../htmlman2/ptrace.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">ptrace</span>(2)</span></a>).</p>
            </dd>

            <dt><span class="term"><code class="function">WSTOPSIG</code>(<em class="parameter"><code>status</code></em>)</span></dt>

            <dd>
              <p>returns the number of the signal which caused the
              child to stop. This macro should be employed only if
              <code class="constant">WIFSTOPPED</code> returned
              true.</p>
            </dd>

            <dt><span class="term"><code class="function">WIFCONTINUED</code>(<em class="parameter"><code>status</code></em>)</span></dt>

            <dd>
              <p>(since Linux 2.6.10) returns true if the child
              process was resumed by delivery of <code class="constant">SIGCONT</code>.</p>
            </dd>
          </dl>
        </div>
      </div>

      <div class="refsect2">
        <a id="wait-2_sect3" name="wait-2_sect3" shape="rect"> </a>

        <h3>waitid()</h3>

        <p>The <code class="function">waitid</code>() system call
        (available since Linux 2.6.9) provides more precise control
        over which child state changes to wait for.</p>

        <p>The <em class="parameter"><code>idtype</code></em> and
        <em class="parameter"><code>id</code></em> arguments select
        the child(ren) to wait for, as follows:</p>

        <div class="variablelist">
          <dl class="variablelist">
            <dt><span class="term"><em class="parameter"><code>idtype</code></em> == <code class="constant">P_PID</code></span></dt>

            <dd>
              <p>Wait for the child whose process ID matches
              <em class="parameter"><code>id</code></em>.</p>
            </dd>

            <dt><span class="term"><em class="parameter"><code>idtype</code></em> == <code class="constant">P_PGID</code></span></dt>

            <dd>
              <p>Wait for any child whose process group ID matches
              <em class="parameter"><code>id</code></em>.</p>
            </dd>

            <dt><span class="term"><em class="parameter"><code>idtype</code></em> == <code class="constant">P_ALL</code></span></dt>

            <dd>
              <p>Wait for any child; <em class="parameter"><code>id</code></em> is ignored.</p>
            </dd>
          </dl>
        </div>

        <p>The child state changes to wait for are specified by
        ORing one or more of the following flags in <em class="parameter"><code>options</code></em>:</p>

        <div class="variablelist">
          <dl class="variablelist">
            <dt><span class="term"><code class="constant">WEXITED</code></span></dt>

            <dd>
              <p>Wait for children that have terminated.</p>
            </dd>

            <dt><span class="term"><code class="constant">WSTOPPED</code></span></dt>

            <dd>
              <p>Wait for children that have been stopped by
              delivery of a signal.</p>
            </dd>

            <dt><span class="term"><code class="constant">WCONTINUED</code></span></dt>

            <dd>
              <p>Wait for (previously stopped) children that have
              been resumed by delivery of <code class="constant">SIGCONT</code>.</p>
            </dd>
          </dl>
        </div>

        <p>The following flags may additionally be ORed in
        <em class="parameter"><code>options</code></em>:</p>

        <div class="variablelist">
          <dl class="variablelist">
            <dt><span class="term"><code class="constant">WNOHANG</code></span></dt>

            <dd>
              <p>As for <code class="function">waitpid</code>().</p>
            </dd>

            <dt><span class="term"><code class="constant">WNOWAIT</code></span></dt>

            <dd>
              <p>Leave the child in a waitable state; a later wait
              call can be used to again retrieve the child status
              information.</p>
            </dd>
          </dl>
        </div>

        <p>Upon successful return, <code class="function">waitid</code>() fills in the following fields of
        the <span class="type">siginfo_t</span> structure pointed
        to by <em class="parameter"><code>infop</code></em>:</p>

        <div class="variablelist">
          <dl class="variablelist">
            <dt><span class="term"><em class="replaceable"><code>si_pid</code></em></span></dt>

            <dd>
              <p>The process ID of the child.</p>
            </dd>

            <dt><span class="term"><em class="replaceable"><code>si_uid</code></em></span></dt>

            <dd>
              <p>The real user ID of the child. (This field is not
              set on most other implementations.)</p>
            </dd>

            <dt><span class="term"><em class="replaceable"><code>si_signo</code></em></span></dt>

            <dd>
              <p>Always set to <code class="constant">SIGCHLD</code>.</p>
            </dd>

            <dt><span class="term"><em class="replaceable"><code>si_status</code></em></span></dt>

            <dd>
              <p>Either the exit status of the child, as given to
              <a class="link" href="../htmlman2/_exit.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">_exit</span>(2)</span></a> (or
              <a class="link" href="../htmlman3/exit.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">exit</span>(3)</span></a>), or the
              signal that caused the child to terminate, stop, or
              continue. The <em class="replaceable"><code>si_code</code></em> field can be
              used to determine how to interpret this field.</p>
            </dd>

            <dt><span class="term"><em class="replaceable"><code>si_code</code></em></span></dt>

            <dd>
              <p>Set to one of: <code class="constant">CLD_EXITED</code> (child called <a class="link" href="../htmlman2/_exit.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">_exit</span>(2)</span></a>);
              <code class="constant">CLD_KILLED</code> (child
              killed by signal); <code class="constant">CLD_DUMPED</code> (child killed by signal,
              and dumped core); <code class="constant">CLD_STOPPED</code> (child stopped by
              signal); <code class="constant">CLD_TRAPPED</code>
              (traced child has trapped); or <code class="constant">CLD_CONTINUED</code> (child continued by
              <code class="constant">SIGCONT</code>).</p>
            </dd>
          </dl>
        </div>

        <p>If <code class="constant">WNOHANG</code> was specified
        in <em class="parameter"><code>options</code></em> and
        there were no children in a waitable state, then
        <code class="function">waitid</code>() returns 0
        immediately and the state of the <span class="type">siginfo_t</span> structure pointed to by <em class="parameter"><code>infop</code></em> is unspecified. To
        distinguish this case from that where a child was in a
        waitable state, zero out the <em class="replaceable"><code>si_pid</code></em> field before the
        call and check for a nonzero value in this field after the
        call returns.</p>
      </div>
    </div>

    <div class="refsect1">
      <a id="wait-2_sect4" name="wait-2_sect4" shape="rect"> </a>

      <h2>RETURN VALUE</h2>

      <p><code class="function">wait</code>(): on success, returns
      the process ID of the terminated child; on error, −1 is
      returned.</p>

      <p><code class="function">waitpid</code>(): on success,
      returns the process ID of the child whose state has changed;
      if <code class="constant">WNOHANG</code> was specified and
      one or more child(ren) specified by <em class="parameter"><code>pid</code></em> exist, but have not yet
      changed state, then 0 is returned. On error, −1 is
      returned.</p>

      <p><code class="function">waitid</code>(): returns 0 on
      success or if <code class="constant">WNOHANG</code> was
      specified and no child(ren) specified by <em class="parameter"><code>id</code></em> has yet changed state; on
      error, −1 is returned.</p>

      <p>Each of these calls sets <code class="varname">errno</code> to an appropriate value in the case of
      an error.</p>
    </div>

    <div class="refsect1">
      <a id="wait-2_sect5" name="wait-2_sect5" shape="rect"> </a>

      <h2>ERRORS</h2>

      <div class="variablelist">
        <dl class="variablelist">
          <dt><span class="term"><span class="errorname">ECHILD</span></span></dt>

          <dd>
            <p>(for <code class="function">wait</code>()) The
            calling process does not have any unwaited-for
            children.</p>
          </dd>

          <dt><span class="term"><span class="errorname">ECHILD</span></span></dt>

          <dd>
            <p>(for <code class="function">waitpid</code>() or
            <code class="function">waitid</code>()) The process
            specified by <em class="parameter"><code>pid</code></em> (<code class="function">waitpid</code>()) or <em class="parameter"><code>idtype</code></em> and <em class="parameter"><code>id</code></em> (<code class="function">waitid</code>()) does not exist or is not a
            child of the calling process. (This can happen for
            one's own child if the action for <code class="constant">SIGCHLD</code> is set to <code class="constant">SIG_IGN</code>. See also the <span class="emphasis"><em>Linux Notes</em></span> section about
            threads.)</p>
          </dd>

          <dt><span class="term"><span class="errorname">EINTR</span></span></dt>

          <dd>
            <p><code class="constant">WNOHANG</code> was not set
            and an unblocked signal or a <code class="constant">SIGCHLD</code> was caught; see <a class="link" href="../htmlman7/signal.7.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">signal</span>(7)</span></a>.</p>
          </dd>

          <dt><span class="term"><span class="errorname">EINVAL</span></span></dt>

          <dd>
            <p>The <em class="parameter"><code>options</code></em>
            argument was invalid.</p>
          </dd>
        </dl>
      </div>
    </div>

    <div class="refsect1">
      <a id="wait-2_sect6" name="wait-2_sect6" shape="rect"> </a>

      <h2>CONFORMING TO</h2>

      <p>SVr4, 4.3BSD, POSIX.1-2001.</p>
    </div>

    <div class="refsect1">
      <a id="wait-2_sect7" name="wait-2_sect7" shape="rect"> </a>

      <h2>NOTES</h2>

      <p>A child that terminates, but has not been waited for
      becomes a "zombie". The kernel maintains a minimal set of
      information about the zombie process (PID, termination
      status, resource usage information) in order to allow the
      parent to later perform a wait to obtain information about
      the child. As long as a zombie is not removed from the system
      via a wait, it will consume a slot in the kernel process
      table, and if this table fills, it will not be possible to
      create further processes. If a parent process terminates,
      then its "zombie" children (if any) are adopted by
      <span class="citerefentry"><span class="refentrytitle">init</span>(1)</span>, which automatically
      performs a wait to remove the zombies.</p>

      <p>POSIX.1-2001 specifies that if the disposition of
      <code class="constant">SIGCHLD</code> is set to <code class="constant">SIG_IGN</code> or the <code class="constant">SA_NOCLDWAIT</code> flag is set for <code class="constant">SIGCHLD</code> (see <a class="link" href="../htmlman2/sigaction.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">sigaction</span>(2)</span></a>), then
      children that terminate do not become zombies and a call to
      <code class="function">wait</code>() or <code class="function">waitpid</code>() will block until all children
      have terminated, and then fail with <code class="varname">errno</code> set to <span class="errorname">ECHILD</span>. (The original POSIX standard left
      the behavior of setting <code class="constant">SIGCHLD</code>
      to <code class="constant">SIG_IGN</code> unspecified. Note
      that even though the default disposition of <code class="constant">SIGCHLD</code> is "ignore", explicitly setting the
      disposition to <code class="constant">SIG_IGN</code> results
      in different treatment of zombie process children.)</p>

      <p>Linux 2.6 conforms to the POSIX requirements. However,
      Linux 2.4 (and earlier) does not: if a <code class="function">wait</code>() or <code class="function">waitpid</code>() call is made while <code class="constant">SIGCHLD</code> is being ignored, the call behaves
      just as though <code class="constant">SIGCHLD</code> were not
      being ignored, that is, the call blocks until the next child
      terminates and then returns the process ID and status of that
      child.</p>

      <div class="refsect2">
        <a id="wait-2_sect8" name="wait-2_sect8" shape="rect"> </a>

        <h3>Linux notes</h3>

        <p>In the Linux kernel, a kernel-scheduled thread is not a
        distinct construct from a process. Instead, a thread is
        simply a process that is created using the Linux-unique
        <a class="link" href="../htmlman2/clone.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">clone</span>(2)</span></a> system call;
        other routines such as the portable <a class="link" href="../htmlman3/pthread_create.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">pthread_create</span>(3)</span></a> call
        are implemented using <a class="link" href="../htmlman2/clone.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">clone</span>(2)</span></a>. Before Linux
        2.4, a thread was just a special case of a process, and as
        a consequence one thread could not wait on the children of
        another thread, even when the latter belongs to the same
        thread group. However, POSIX prescribes such functionality,
        and since Linux 2.4 a thread can, and by default will, wait
        on children of other threads in the same thread group.</p>

        <p>The following Linux-specific <em class="parameter"><code>options</code></em> are for use with
        children created using <a class="link" href="../htmlman2/clone.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">clone</span>(2)</span></a>; they cannot be
        used with <code class="function">waitid</code>():</p>

        <div class="variablelist">
          <dl class="variablelist">
            <dt><span class="term"><code class="constant">__WCLONE</code></span></dt>

            <dd>
              <p>Wait for "clone" children only. If omitted, then
              wait for "non-clone" children only. (A "clone" child
              is one which delivers no signal, or a signal other
              than <code class="constant">SIGCHLD</code> to its
              parent upon termination.) This option is ignored if
              <code class="constant">__WALL</code> is also
              specified.</p>
            </dd>

            <dt><span class="term"><code class="constant">__WALL</code> (since Linux 2.4)</span></dt>

            <dd>
              <p>Wait for all children, regardless of type ("clone"
              or "non-clone").</p>
            </dd>

            <dt><span class="term"><code class="constant">__WNOTHREAD</code> (since Linux
            2.4)</span></dt>

            <dd>
              <p>Do not wait for children of other threads in the
              same thread group. This was the default before Linux
              2.4.</p>
            </dd>
          </dl>
        </div>
      </div>

      <div class="refsect2">
        <a id="wait-2_sect9" name="wait-2_sect9" shape="rect"> </a>

        <h3>C library/kernel ABI differences</h3>

        <p><code class="function">wait</code>() is actually a
        library function that (in glibc) is implemented as a call
        to <a class="link" href="../htmlman2/wait4.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">wait4</span>(2)</span></a>.</p>

        <p>Within glibc, <code class="function">waitpid</code>() is
        a wrapper function that invokes <a class="link" href="../htmlman2/wait.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">wait</span>(2)</span></a>.</p>

        <p>The raw <code class="function">waitid</code>() system
        call takes a fifth argument, of type <span class="type">struct rusage *</span>. If this argument is
        non-NULL, then it is used to return resource usage
        information about the child, in the same manner as
        <a class="link" href="../htmlman2/wait4.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">wait4</span>(2)</span></a>. See <a class="link" href="../htmlman2/getrusage.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">getrusage</span>(2)</span></a> for
        details.</p>
      </div>
    </div>

    <div class="refsect1">
      <a id="wait-2_sect10" name="wait-2_sect10" shape="rect"> </a>

      <h2>BUGS</h2>

      <p>According to POSIX.1-2008, an application calling
      <code class="function">waitid</code>() must ensure that
      <em class="parameter"><code>infop</code></em> points to a
      <span class="type">siginfo_t</span> structure (i.e., that it
      is a non-null pointer). On Linux, if <em class="parameter"><code>infop</code></em> is NULL, <code class="function">waitid</code>() succeeds, and returns the process
      ID of the waited-for child. Applications should avoid relying
      on this inconsistent, nonstandard, and unnecessary
      feature.</p>
    </div>

    <div class="refsect1">
      <a id="wait-2_sect11" name="wait-2_sect11" shape="rect"> </a>

      <h2>EXAMPLE</h2>

      <p>The following program demonstrates the use of <a class="link" href="../htmlman2/fork.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">fork</span>(2)</span></a> and <code class="function">waitpid</code>(). The program creates a child
      process. If no command-line argument is supplied to the
      program, then the child suspends its execution using
      <a class="link" href="../htmlman2/pause.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">pause</span>(2)</span></a>, to allow the user
      to send signals to the child. Otherwise, if a command-line
      argument is supplied, then the child exits immediately, using
      the integer supplied on the command line as the exit status.
      The parent process executes a loop that monitors the child
      using <code class="function">waitpid</code>(), and uses the
      W*() macros described above to analyze the wait status
      value.</p>

      <p>The following shell session demonstrates the use of the
      program:</p>

      <div class="blockquote">
        <blockquote class="blockquote">
          <div class="informalexample">
            <pre class="programlisting" xml:space="preserve">
$<span class="emphasis"><em> ./a.out &amp;</em></span>
Child PID is 32360
[1] 32359
$<span class="emphasis"><em> kill −STOP 32360</em></span>
stopped by signal 19
$<span class="emphasis"><em> kill −CONT 32360</em></span>
continued
$<span class="emphasis"><em> kill −TERM 32360</em></span>
killed by signal 15
[1]+  Done                    ./a.out
$
</pre>
          </div>
        </blockquote>
      </div>

      <div class="refsect2">
        <a id="wait-2_sect12" name="wait-2_sect12" shape="rect"> </a>

        <h3>Program source</h3>

        <div class="informalexample">
          <pre class="programlisting" xml:space="preserve">
#include &lt;sys/wait.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;unistd.h&gt;
#include &lt;stdio.h&gt;

int
main(int argc, char *argv[])
{
    pid_t cpid, w;
    int status;

    cpid = fork();
    if (cpid == −1) {
        perror("fork");
        exit(EXIT_FAILURE);
    }

    if (cpid == 0) {            /* Code executed by child */
        printf("Child PID is %ld\n", (long) getpid());
        if (argc == 1)
            pause();                    /* Wait for signals */
        _exit(atoi(argv[1]));

    } else {                    /* Code executed by parent */
        do {
            w = waitpid(cpid, &amp;status, WUNTRACED | WCONTINUED);
            if (w == −1) {
                perror("waitpid");
                exit(EXIT_FAILURE);
            }

            if (WIFEXITED(status)) {
                printf("exited, status=%d\n", WEXITSTATUS(status));
            } else if (WIFSIGNALED(status)) {
                printf("killed by signal %d\n", WTERMSIG(status));
            } else if (WIFSTOPPED(status)) {
                printf("stopped by signal %d\n", WSTOPSIG(status));
            } else if (WIFCONTINUED(status)) {
                printf("continued\n");
            }
        } while (!WIFEXITED(status) &amp;&amp; !WIFSIGNALED(status));
        exit(EXIT_SUCCESS);
    }
}
</pre>
        </div>
      </div>
    </div>

    <div class="refsect1">
      <a id="wait-2_sect13" name="wait-2_sect13" shape="rect"> </a>

      <h2>SEE ALSO</h2>

      <p><a class="link" href="../htmlman2/_exit.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">_exit</span>(2)</span></a>, <a class="link" href="../htmlman2/clone.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">clone</span>(2)</span></a>, <a class="link" href="../htmlman2/fork.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">fork</span>(2)</span></a>, <a class="link" href="../htmlman2/kill.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">kill</span>(2)</span></a>, <a class="link" href="../htmlman2/ptrace.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">ptrace</span>(2)</span></a>, <a class="link" href="../htmlman2/sigaction.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">sigaction</span>(2)</span></a>, <a class="link" href="../htmlman2/signal.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">signal</span>(2)</span></a>, <a class="link" href="../htmlman2/wait4.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">wait4</span>(2)</span></a>, <a class="link" href="../htmlman3/pthread_create.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">pthread_create</span>(3)</span></a>,
      <a class="link" href="../htmlman7/credentials.7.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">credentials</span>(7)</span></a>, <a class="link" href="../htmlman7/signal.7.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">signal</span>(7)</span></a></p>
    </div>

    <div class="colophon">
      <a id="wait-2_sect14" name="wait-2_sect14" shape="rect"> </a>

      <h2>COLOPHON</h2>

      <p>This page is part of release 4.00 of the Linux <em class="replaceable"><code>man-pages</code></em> project. A
      description of the project, information about reporting bugs,
      and the latest version of this page, can be found at
      http://www.kernel.org/doc/man−pages/.</p>

      <div class="license">
        <table style="border-collapse: collapse;">
          <colgroup span="1">
            <col span="1" />
          </colgroup>

          <tbody>
            <tr>
              <td style="" rowspan="1" colspan="1">
                <div class="literallayout">
                  <br />
                    Copyright (c) 1993 by Thomas Koenig &lt;ig25<script type="text/javascript">document.write('@');</script><noscript>(@)</noscript>rz.uni-karlsruhe.de&gt;<br />

                  and Copyright (c) 2004 by Michael Kerrisk &lt;mtk.manpages<script type="text/javascript">document.write('@');</script><noscript>(@)</noscript>gmail.com&gt;<br />

                  <br />
                  %%%LICENSE_START(VERBATIM)<br />
                  Permission is granted to make and distribute verbatim copies of this<br />

                  manual provided the copyright notice and this permission notice are<br />

                  preserved on all copies.<br />
                  <br />
                  Permission is granted to copy and distribute modified versions of this<br />

                  manual under the conditions for verbatim copying, provided that the<br />

                  entire resulting derived work is distributed under the terms of a<br />

                  permission notice identical to this one.<br />

                  <br />
                  Since the Linux kernel and libraries are constantly changing, this<br />

                  manual page may be incorrect or out-of-date.  The author(s) assume no<br />

                  responsibility for errors or omissions, or for damages resulting from<br />

                  the use of the information contained herein.  The author(s) may not<br />

                  have taken the same level of care in the production of this manual,<br />

                  which is licensed free of charge, as they might when working<br />

                  professionally.<br />
                  <br />
                  Formatted or processed versions of this manual, if unaccompanied by<br />

                  the source, must acknowledge the copyright and authors of this work.<br />

                  %%%LICENSE_END<br />
                  <br />
                  Modified Sat Jul 24 13:30:06 1993 by Rik Faith &lt;faith<script type="text/javascript">document.write('@');</script><noscript>(@)</noscript>cs.unc.edu&gt;<br />

                  Modified Sun Aug 21 17:42:42 1994 by Rik Faith &lt;faith<script type="text/javascript">document.write('@');</script><noscript>(@)</noscript>cs.unc.edu&gt;<br />

                           (Thanks to Koen Holtman &lt;koen<script type="text/javascript">document.write('@');</script><noscript>(@)</noscript>win.tue.nl&gt;)<br />

                  Modified Wed May 17 15:54:12 1995 by Rik Faith &lt;faith<script type="text/javascript">document.write('@');</script><noscript>(@)</noscript>cs.unc.edu&gt;<br />

                            To remove *'s from status in macros (Thanks to Michael Shields).<br />

                  Modified as suggested by Nick Duffek &lt;nsd<script type="text/javascript">document.write('@');</script><noscript>(@)</noscript>bbc.com&gt;, aeb, 960426<br />

                  Modified Mon Jun 23 14:09:52 1997 by aeb - add EINTR.<br />

                  Modified Thu Nov 26 02:12:45 1998 by aeb - add SIGCHLD stuff.<br />

                  Modified Mon Jul 24 21:37:38 2000 by David A. Wheeler<br />

                           &lt;dwheeler<script type="text/javascript">document.write('@');</script><noscript>(@)</noscript>dwheeler.com&gt; - noted thread issues.<br />

                  Modified 26 Jun 01 by Michael Kerrisk<br />

                           Added __WCLONE, __WALL, and __WNOTHREAD descriptions<br />

                  Modified 2001-09-25, aeb<br />
                  Modified 26 Jun 01 by Michael Kerrisk, &lt;mtk.manpages<script type="text/javascript">document.write('@');</script><noscript>(@)</noscript>gmail.com&gt;<br />

                  Updated notes on setting disposition of SIGCHLD to SIG_IGN<br />

                  2004-11-11, mtk<br />
                  Added waitid(2); added WCONTINUED and WIFCONTINUED()<br />

                  Added text on SA_NOCLDSTOP<br />
                  Updated discussion of SA_NOCLDWAIT to reflect 2.6 behavior<br />

                  Much other text rewritten<br />
                  2005-05-10, mtk, __W* flags can't be used with waitid()<br />

                  2008-07-04, mtk, removed erroneous text about SA_NOCLDSTOP<br />
                  
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</body>
</html>
