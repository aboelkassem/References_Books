<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

  <title>create_module(2) — Linux manual pages</title>
  <link rel="stylesheet" type="text/css" href="../stylesheet/manpages.css" />
  
  <link rel="home" href="../index.html" title="create_module(2) — Linux manual pages" />
  <script type="text/javascript" src="../stylesheet/manpages.js" xml:space="preserve">
</script>
  <link rel="icon" href="../stylesheet/icon.gif" type="image/gif" />
</head>

<body onload="javascript:init()">
  <div class="navheader">
    <table width="100%">
      <tbody>
        <tr>
          <td style="width: 33%" rowspan="1" colspan="1"><a href="../index.html" shape="rect">Linux
          manual pages</a></td>

          <th rowspan="1" colspan="1"><a href="../index2.html" shape="rect">Section 2</a></th>

          <td style="width: 33%" rowspan="1" colspan="1"> </td>
        </tr>
      </tbody>
    </table>
    <hr />
  </div>

  <div class="refentry">
    <a id="create-module.2" name="create-module.2" shape="rect"> </a>

    <div class="titlepage"> </div>

    <div class="refnamediv">
      <h2>Name</h2>

      <p>create_module — create a loadable module entry</p>
    </div>

    <div class="refsynopsisdiv">
      <h2>Synopsis</h2>

      <div class="funcsynopsis">
        <pre class="funcsynopsisinfo" xml:space="preserve">
#include &lt;linux/module.h&gt;
</pre>

        <table border="0" class="funcprototype-table" summary="Function synopsis" style="cellspacing: 0; cellpadding: 0;">
          <tr>
            <td rowspan="1" colspan="1"><code class="funcdef">caddr_t
            <strong>create_module</strong>(</code></td>

            <td rowspan="1" colspan="1">const char *<var class="pdparam">name</var>,</td>
          </tr>

          <tr>
            <td rowspan="1" colspan="1"> </td>

            <td rowspan="1" colspan="1">size_t <var class="pdparam">size</var><code>)</code>;</td>
          </tr>
        </table>

        <div class="funcprototype-spacer">
           
        </div>
      </div>

      <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
        <table border="0" summary="Note">
          <tr>
            <td rowspan="2" align="center" valign="top" width="25" colspan="1">
            <img alt="[Note]" src="../stylesheet/note.png" /></td>

            <th align="left" rowspan="1" colspan="1">Note</th>
          </tr>

          <tr>
            <td align="left" valign="top" rowspan="1" colspan="1">No declaration of this
            function is provided in glibc headers; see NOTES.</td>
          </tr>
        </table>
      </div>
    </div>

    <div class="refsect1">
      <a id="create-module-2_sect1" name="create-module-2_sect1" shape="rect"> </a>

      <h2>DESCRIPTION</h2>

      <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
        <table border="0" summary="Note">
          <tr>
            <td rowspan="2" align="center" valign="top" width="25" colspan="1">
            <img alt="[Note]" src="../stylesheet/note.png" /></td>

            <th align="left" rowspan="1" colspan="1">Note</th>
          </tr>

          <tr>
            <td align="left" valign="top" rowspan="1" colspan="1">
              <p>This system call is present only in kernels before
              Linux 2.6.</p>
            </td>
          </tr>
        </table>
      </div>

      <p><code class="function">create_module</code>() attempts to
      create a loadable module entry and reserve the kernel memory
      that will be needed to hold the module. This system call
      requires privilege.</p>
    </div>

    <div class="refsect1">
      <a id="create-module-2_sect2" name="create-module-2_sect2" shape="rect"> </a>

      <h2>RETURN VALUE</h2>

      <p>On success, returns the kernel address at which the module
      will reside. On error, −1 is returned and <code class="varname">errno</code> is set appropriately.</p>
    </div>

    <div class="refsect1">
      <a id="create-module-2_sect3" name="create-module-2_sect3" shape="rect"> </a>

      <h2>ERRORS</h2>

      <div class="variablelist">
        <dl class="variablelist">
          <dt><span class="term"><span class="errorname">EEXIST</span></span></dt>

          <dd>
            <p>A module by that name already exists.</p>
          </dd>

          <dt><span class="term"><span class="errorname">EFAULT</span></span></dt>

          <dd>
            <p><em class="parameter"><code>name</code></em> is
            outside the program's accessible address space.</p>
          </dd>

          <dt><span class="term"><span class="errorname">EINVAL</span></span></dt>

          <dd>
            <p>The requested size is too small even for the module
            header information.</p>
          </dd>

          <dt><span class="term"><span class="errorname">ENOMEM</span></span></dt>

          <dd>
            <p>The kernel could not allocate a contiguous block of
            memory large enough for the module.</p>
          </dd>

          <dt><span class="term"><span class="errorname">ENOSYS</span></span></dt>

          <dd>
            <p><code class="function">create_module</code>() is not
            supported in this version of the kernel (e.g., the
            kernel is version 2.6 or later).</p>
          </dd>

          <dt><span class="term"><span class="errorname">EPERM</span></span></dt>

          <dd>
            <p>The caller was not privileged (did not have the
            <code class="constant">CAP_SYS_MODULE</code>
            capability).</p>
          </dd>
        </dl>
      </div>
    </div>

    <div class="refsect1">
      <a id="create-module-2_sect4" name="create-module-2_sect4" shape="rect"> </a>

      <h2>VERSIONS</h2>

      <p>This system call is present on Linux only up until kernel
      2.4; it was removed in Linux 2.6.</p>
    </div>

    <div class="refsect1">
      <a id="create-module-2_sect5" name="create-module-2_sect5" shape="rect"> </a>

      <h2>CONFORMING TO</h2>

      <p><code class="function">create_module</code>() is
      Linux-specific.</p>
    </div>

    <div class="refsect1">
      <a id="create-module-2_sect6" name="create-module-2_sect6" shape="rect"> </a>

      <h2>NOTES</h2>

      <p>The <code class="function">create_module</code>() system
      call is not supported by glibc. No declaration is provided in
      glibc headers, but, through a quirk of history, glibc does
      export an ABI for this system call. Therefore, in order to
      employ this system call, it is sufficient to manually declare
      the interface in your code; alternatively, you can invoke the
      system call using <a class="link" href="../htmlman2/syscall.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">syscall</span>(2)</span></a>.</p>
    </div>

    <div class="refsect1">
      <a id="create-module-2_sect7" name="create-module-2_sect7" shape="rect"> </a>

      <h2>SEE ALSO</h2>

      <p><a class="link" href="../htmlman2/delete_module.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">delete_module</span>(2)</span></a>, <a class="link" href="../htmlman2/init_module.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">init_module</span>(2)</span></a>, <a class="link" href="../htmlman2/query_module.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">query_module</span>(2)</span></a></p>
    </div>

    <div class="colophon">
      <a id="create-module-2_sect8" name="create-module-2_sect8" shape="rect"> </a>

      <h2>COLOPHON</h2>

      <p>This page is part of release 3.72 of the Linux <em class="replaceable"><code>man-pages</code></em> project. A
      description of the project, information about reporting bugs,
      and the latest version of this page, can be found at
      http://www.kernel.org/doc/man−pages/.</p>

      <div class="license">
        <table style="border-collapse: collapse;">
          <colgroup span="1">
            <col span="1" />
          </colgroup>

          <tbody>
            <tr>
              <td style="" rowspan="1" colspan="1">
                <div class="literallayout">
                  <br />
                    Copyright (C) 1996 Free Software Foundation, Inc.<br />

                  <br />
                  %%%LICENSE_START(GPL_NOVERSION_ONELINE)<br />
                  This file is distributed according to the GNU General Public License.<br />

                  %%%LICENSE_END<br />
                  <br />
                  2006-02-09, some reformatting by Luc Van Oostenryck; some<br />

                  reformatting and rewordings by mtk<br />
                  
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</body>
</html>
