<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

  <title>clock_getres(2) — Linux manual pages</title>
  <link rel="stylesheet" type="text/css" href="../stylesheet/manpages.css" />
  
  <link rel="home" href="../index.html" title="clock_getres(2) — Linux manual pages" />
  <script type="text/javascript" src="../stylesheet/manpages.js" xml:space="preserve">
</script>
  <link rel="icon" href="../stylesheet/icon.gif" type="image/gif" />
</head>

<body onload="javascript:init()">
  <div class="navheader">
    <table width="100%">
      <tbody>
        <tr>
          <td style="width: 33%" rowspan="1" colspan="1"><a href="../index.html" shape="rect">Linux
          manual pages</a></td>

          <th rowspan="1" colspan="1"><a href="../index2.html" shape="rect">Section 2</a></th>

          <td style="width: 33%" rowspan="1" colspan="1"> </td>
        </tr>
      </tbody>
    </table>
    <hr />
  </div>

  <div class="refentry">
    <a id="clock-getres.2" name="clock-getres.2" shape="rect"> </a>

    <div class="titlepage"> </div>

    <div class="refnamediv">
      <h2>Name</h2>

      <p>clock_getres, clock_gettime, clock_settime — clock
      and time functions</p>
    </div>

    <div class="refsynopsisdiv">
      <h2>Synopsis</h2>

      <div class="funcsynopsis">
        <pre class="funcsynopsisinfo" xml:space="preserve">
#include &lt;time.h&gt;
</pre>

        <table border="0" class="funcprototype-table" summary="Function synopsis" style="cellspacing: 0; cellpadding: 0;">
          <tr>
            <td rowspan="1" colspan="1"><code class="funcdef">int
            <strong>clock_getres</strong>(</code></td>

            <td rowspan="1" colspan="1">clockid_t <var class="pdparam">clk_id</var>,</td>
          </tr>

          <tr>
            <td rowspan="1" colspan="1"> </td>

            <td rowspan="1" colspan="1">struct timespec *<var class="pdparam">res</var><code>)</code>;</td>
          </tr>
        </table>

        <div class="funcprototype-spacer">
           
        </div>
      </div>

      <div class="funcsynopsis">
        <table border="0" class="funcprototype-table" summary="Function synopsis" style="cellspacing: 0; cellpadding: 0;">
          <tr>
            <td rowspan="1" colspan="1"><code class="funcdef">int
            <strong>clock_gettime</strong>(</code></td>

            <td rowspan="1" colspan="1">clockid_t <var class="pdparam">clk_id</var>,</td>
          </tr>

          <tr>
            <td rowspan="1" colspan="1"> </td>

            <td rowspan="1" colspan="1">struct timespec *<var class="pdparam">tp</var><code>)</code>;</td>
          </tr>
        </table>

        <div class="funcprototype-spacer">
           
        </div>
      </div>

      <div class="funcsynopsis">
        <table border="0" class="funcprototype-table" summary="Function synopsis" style="cellspacing: 0; cellpadding: 0;">
          <tr>
            <td rowspan="1" colspan="1"><code class="funcdef">int
            <strong>clock_settime</strong>(</code></td>

            <td rowspan="1" colspan="1">clockid_t <var class="pdparam">clk_id</var>,</td>
          </tr>

          <tr>
            <td rowspan="1" colspan="1"> </td>

            <td rowspan="1" colspan="1">const struct timespec *<var class="pdparam">tp</var><code>)</code>;</td>
          </tr>
        </table>

        <div class="funcprototype-spacer">
           
        </div>
      </div>

      <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
        <table border="0" summary="Note">
          <tr>
            <td rowspan="2" align="center" valign="top" width="25" colspan="1">
            <img alt="[Note]" src="../stylesheet/note.png" /></td>

            <th align="left" rowspan="1" colspan="1">Note</th>
          </tr>

          <tr>
            <td align="left" valign="top" rowspan="1" colspan="1">
              <div class="featuretests">
                <table style="border-collapse: collapse;">
                  <colgroup span="1">
                    <col span="1" />
                  </colgroup>

                  <thead>
                    <tr>
                      <th style="" rowspan="1" colspan="1">Feature Test Macro Requirements
                      for glibc (see <a class="link" href="../htmlman7/feature_test_macros.7.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">feature_test_macros</span>(7)</span></a>):</th>
                    </tr>
                  </thead>

                  <tbody>
                    <tr>
                      <td style="" rowspan="1" colspan="1"><code class="function">clock_getres</code>(),
                      <code class="function">clock_gettime</code>(),
                      <code class="function">clock_settime</code>():</td>
                    </tr>

                    <tr>
                      <td class="featuretestdef" style="" rowspan="1" colspan="1">
                      <code class="constant">_POSIX_C_SOURCE</code>
                      &gt;= 199309L</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </td>
          </tr>
        </table>
      </div>

      <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
        <table border="0" summary="Note">
          <tr>
            <td rowspan="2" align="center" valign="top" width="25" colspan="1">
            <img alt="[Note]" src="../stylesheet/note.png" /></td>

            <th align="left" rowspan="1" colspan="1">Note</th>
          </tr>

          <tr>
            <td align="left" valign="top" rowspan="1" colspan="1">
              <p>Link with <code class="option">−lrt</code>
              (only for glibc versions before 2.17).</p>
            </td>
          </tr>
        </table>
      </div>
    </div>

    <div class="refsect1">
      <a id="clock-getres-2_sect1" name="clock-getres-2_sect1" shape="rect"> </a>

      <h2>DESCRIPTION</h2>

      <p>The function <code class="function">clock_getres</code>()
      finds the resolution (precision) of the specified clock
      <em class="parameter"><code>clk_id</code></em>, and, if
      <em class="parameter"><code>res</code></em> is non-NULL,
      stores it in the <span class="emphasis"><em>struct
      timespec</em></span> pointed to by <em class="parameter"><code>res</code></em>. The resolution of clocks
      depends on the implementation and cannot be configured by a
      particular process. If the time value pointed to by the
      argument <em class="parameter"><code>tp</code></em> of
      <code class="function">clock_settime</code>() is not a
      multiple of <em class="parameter"><code>res</code></em>, then
      it is truncated to a multiple of <em class="parameter"><code>res</code></em>.</p>

      <p>The functions <code class="function">clock_gettime</code>() and <code class="function">clock_settime</code>() retrieve and set the time
      of the specified clock <em class="parameter"><code>clk_id</code></em>.</p>

      <p>The <em class="parameter"><code>res</code></em> and
      <em class="parameter"><code>tp</code></em> arguments are
      <span class="structname">timespec</span> structures, as
      specified in <code class="literal">&lt;</code><code class="filename">time.h</code><code class="literal">&gt;</code></p>

      <div class="blockquote">
        <blockquote class="blockquote">
          <div class="structdef">
            <table style="border-collapse: collapse;">
              <colgroup span="1">
                <col class="c1" span="1" />
                <col class="c2" span="1" />
                <col class="c3" span="1" />
                <col class="c4" span="1" />
                <col class="c5" span="1" />
              </colgroup>

              <tbody>
                <tr>
                  <td class="structdefhdr" style="" align="left" rowspan="1" colspan="1">
                  struct</td>

                  <td class="structdefhdr" style="" colspan="4" align="left" rowspan="1"><span class="structname">timespec</span> {</td>
                </tr>

                <tr>
                  <td style="" rowspan="1" colspan="1"> </td>

                  <td style="" align="left" rowspan="1" colspan="1"><span class="type">time_t</span></td>

                  <td class="norightpad" style="" align="right" rowspan="1" colspan="1">
                   </td>

                  <td style="" align="left" rowspan="1" colspan="1"><em class="structfield"><code>tv_sec</code></em>;</td>

                  <td style="" align="left" rowspan="1" colspan="1">
                    <div class="literallayout">
                      /* seconds */
                    </div>
                  </td>
                </tr>

                <tr>
                  <td style="" rowspan="1" colspan="1"> </td>

                  <td style="" align="left" rowspan="1" colspan="1"><span class="type">long</span></td>

                  <td class="norightpad" style="" align="right" rowspan="1" colspan="1">
                   </td>

                  <td style="" align="left" rowspan="1" colspan="1"><em class="structfield"><code>tv_nsec</code></em>;</td>

                  <td style="" align="left" rowspan="1" colspan="1">
                    <div class="literallayout">
                      /* nanoseconds */
                    </div>
                  </td>
                </tr>

                <tr>
                  <td class="structdefftr" style="" colspan="5" align="left" rowspan="1">};</td>
                </tr>
              </tbody>
            </table>
          </div>
        </blockquote>
      </div>

      <p>The <em class="parameter"><code>clk_id</code></em>
      argument is the identifier of the particular clock on which
      to act. A clock may be system-wide and hence visible for all
      processes, or per-process if it measures time only within a
      single process.</p>

      <p>All implementations support the system-wide real-time
      clock, which is identified by <code class="constant">CLOCK_REALTIME</code>. Its time represents seconds
      and nanoseconds since the Epoch. When its time is changed,
      timers for a relative interval are unaffected, but timers for
      an absolute point in time are affected.</p>

      <p>More clocks may be implemented. The interpretation of the
      corresponding time values and the effect on timers is
      unspecified.</p>

      <p>Sufficiently recent versions of glibc and the Linux kernel
      support the following clocks:</p>

      <div class="variablelist">
        <dl class="variablelist">
          <dt><span class="term"><code class="constant">CLOCK_REALTIME</code></span></dt>

          <dd>
            <p>System-wide clock that measures real (i.e.,
            wall-clock) time. Setting this clock requires
            appropriate privileges. This clock is affected by
            discontinuous jumps in the system time (e.g., if the
            system administrator manually changes the clock), and
            by the incremental adjustments performed by <a class="link" href="../htmlman3/adjtime.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">adjtime</span>(3)</span></a> and
            NTP.</p>
          </dd>

          <dt><span class="term"><code class="constant">CLOCK_REALTIME_COARSE</code> (since Linux
          2.6.32; Linux-specific)</span></dt>

          <dd>
            <p>A faster but less precise version of <code class="constant">CLOCK_REALTIME</code>. Use when you need
            very fast, but not fine-grained timestamps.</p>
          </dd>

          <dt><span class="term"><code class="constant">CLOCK_MONOTONIC</code></span></dt>

          <dd>
            <p>Clock that cannot be set and represents monotonic
            time since some unspecified starting point. This clock
            is not affected by discontinuous jumps in the system
            time (e.g., if the system administrator manually
            changes the clock), but is affected by the incremental
            adjustments performed by <a class="link" href="../htmlman3/adjtime.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">adjtime</span>(3)</span></a> and
            NTP.</p>
          </dd>

          <dt><span class="term"><code class="constant">CLOCK_MONOTONIC_COARSE</code> (since Linux
          2.6.32; Linux-specific)</span></dt>

          <dd>
            <p>A faster but less precise version of <code class="constant">CLOCK_MONOTONIC</code>. Use when you need
            very fast, but not fine-grained timestamps.</p>
          </dd>

          <dt><span class="term"><code class="constant">CLOCK_MONOTONIC_RAW</code> (since Linux
          2.6.28; Linux-specific)</span></dt>

          <dd>
            <p>Similar to <code class="constant">CLOCK_MONOTONIC</code>, but provides access
            to a raw hardware-based time that is not subject to NTP
            adjustments or the incremental adjustments performed by
            <a class="link" href="../htmlman3/adjtime.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">adjtime</span>(3)</span></a>.</p>
          </dd>

          <dt><span class="term"><code class="constant">CLOCK_BOOTTIME</code> (since Linux 2.6.39;
          Linux-specific)</span></dt>

          <dd>
            <p>Identical to <code class="constant">CLOCK_MONOTONIC</code>, except it also
            includes any time that the system is suspended. This
            allows applications to get a suspend-aware monotonic
            clock without having to deal with the complications of
            <code class="constant">CLOCK_REALTIME</code>, which may
            have discontinuities if the time is changed using
            <a class="link" href="../htmlman2/gettimeofday.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">settimeofday</span>(2)</span></a>.</p>
          </dd>

          <dt><span class="term"><code class="constant">CLOCK_PROCESS_CPUTIME_ID</code> (since Linux
          2.6.12)</span></dt>

          <dd>
            <p>Per-process CPU-time clock (measures CPU time
            consumed by all threads in the process).</p>
          </dd>

          <dt><span class="term"><code class="constant">CLOCK_THREAD_CPUTIME_ID</code> (since Linux
          2.6.12)</span></dt>

          <dd>
            <p>Thread-specific CPU-time clock.</p>
          </dd>
        </dl>
      </div>
    </div>

    <div class="refsect1">
      <a id="clock-getres-2_sect2" name="clock-getres-2_sect2" shape="rect"> </a>

      <h2>RETURN VALUE</h2>

      <p><code class="function">clock_gettime</code>(),
      <code class="function">clock_settime</code>() and
      <code class="function">clock_getres</code>() return 0 for
      success, or −1 for failure (in which case <code class="varname">errno</code> is set appropriately).</p>
    </div>

    <div class="refsect1">
      <a id="clock-getres-2_sect3" name="clock-getres-2_sect3" shape="rect"> </a>

      <h2>ERRORS</h2>

      <div class="variablelist">
        <dl class="variablelist">
          <dt><span class="term"><span class="errorname">EFAULT</span></span></dt>

          <dd>
            <p><em class="parameter"><code>tp</code></em> points
            outside the accessible address space.</p>
          </dd>

          <dt><span class="term"><span class="errorname">EINVAL</span></span></dt>

          <dd>
            <p>The <em class="parameter"><code>clk_id</code></em>
            specified is not supported on this system.</p>
          </dd>

          <dt><span class="term"><span class="errorname">EPERM</span></span></dt>

          <dd>
            <p><code class="function">clock_settime</code>() does
            not have permission to set the clock indicated.</p>
          </dd>
        </dl>
      </div>
    </div>

    <div class="refsect1">
      <a id="clock-getres-2_sect4" name="clock-getres-2_sect4" shape="rect"> </a>

      <h2>VERSIONS</h2>

      <p>These system calls first appeared in Linux 2.6.</p>
    </div>

    <div class="refsect1">
      <a id="clock-getres-2_sect5" name="clock-getres-2_sect5" shape="rect"> </a>

      <h2>CONFORMING TO</h2>

      <p>SUSv2, POSIX.1-2001.</p>
    </div>

    <div class="refsect1">
      <a id="clock-getres-2_sect6" name="clock-getres-2_sect6" shape="rect"> </a>

      <h2>AVAILABILITY</h2>

      <p>On POSIX systems on which these functions are available,
      the symbol <code class="constant">_POSIX_TIMERS</code> is
      defined in <code class="literal">&lt;</code><code class="filename">unistd.h</code><code class="literal">&gt;</code>
      to a value greater than 0. The symbols <code class="constant">_POSIX_MONOTONIC_CLOCK</code>, <code class="constant">_POSIX_CPUTIME</code>, <code class="constant">_POSIX_THREAD_CPUTIME</code> indicate that
      <code class="constant">CLOCK_MONOTONIC</code>, <code class="constant">CLOCK_PROCESS_CPUTIME_ID</code>, <code class="constant">CLOCK_THREAD_CPUTIME_ID</code> are available. (See
      also <a class="link" href="../htmlman3/sysconf.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">sysconf</span>(3)</span></a>.)</p>
    </div>

    <div class="refsect1">
      <a id="clock-getres-2_sect7" name="clock-getres-2_sect7" shape="rect"> </a>

      <h2>NOTES</h2>

      <div class="refsect2">
        <a id="clock-getres-2_sect8" name="clock-getres-2_sect8" shape="rect"> </a>

        <h3>Historical note for SMP systems</h3>

        <p>Before Linux added kernel support for <code class="constant">CLOCK_PROCESS_CPUTIME_ID</code> and <code class="constant">CLOCK_THREAD_CPUTIME_ID</code>, glibc
        implemented these clocks on many platforms using timer
        registers from the CPUs (TSC on i386, AR.ITC on Itanium).
        These registers may differ between CPUs and as a
        consequence these clocks may return <span class="emphasis"><em>bogus results</em></span> if a process is
        migrated to another CPU.</p>

        <p>If the CPUs in an SMP system have different clock
        sources, then there is no way to maintain a correlation
        between the timer registers since each CPU will run at a
        slightly different frequency. If that is the case, then
        <em class="replaceable"><code>clock_getcpuclockid(0)</code></em> will
        return <span class="errorname">ENOENT</span> to signify
        this condition. The two clocks will then be useful only if
        it can be ensured that a process stays on a certain
        CPU.</p>

        <p>The processors in an SMP system do not start all at
        exactly the same time and therefore the timer registers are
        typically running at an offset. Some architectures include
        code that attempts to limit these offsets on bootup.
        However, the code cannot guarantee to accurately tune the
        offsets. Glibc contains no provisions to deal with these
        offsets (unlike the Linux Kernel). Typically these offsets
        are small and therefore the effects may be negligible in
        most cases.</p>

        <p>Since glibc 2.4, the wrapper functions for the system
        calls described in this page avoid the abovementioned
        problems by employing the kernel implementation of
        <code class="constant">CLOCK_PROCESS_CPUTIME_ID</code> and
        <code class="constant">CLOCK_THREAD_CPUTIME_ID</code>, on
        systems that provide such an implementation (i.e., Linux
        2.6.12 and later).</p>
      </div>
    </div>

    <div class="refsect1">
      <a id="clock-getres-2_sect9" name="clock-getres-2_sect9" shape="rect"> </a>

      <h2>BUGS</h2>

      <p>According to POSIX.1-2001, a process with "appropriate
      privileges" may set the <code class="constant">CLOCK_PROCESS_CPUTIME_ID</code> and <code class="constant">CLOCK_THREAD_CPUTIME_ID</code> clocks using
      <code class="function">clock_settime</code>(). On Linux,
      these clocks are not settable (i.e., no process has
      "appropriate privileges").</p>
    </div>

    <div class="refsect1">
      <a id="clock-getres-2_sect10" name="clock-getres-2_sect10" shape="rect"> </a>

      <h2>SEE ALSO</h2>

      <p><a class="link" href="../htmlman1/date.1.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">date</span>(1)</span></a>, <a class="link" href="../htmlman2/gettimeofday.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">gettimeofday</span>(2)</span></a>, <a class="link" href="../htmlman2/gettimeofday.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">settimeofday</span>(2)</span></a>, <a class="link" href="../htmlman2/time.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">time</span>(2)</span></a>, <a class="link" href="../htmlman3/adjtime.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">adjtime</span>(3)</span></a>, <a class="link" href="../htmlman3/clock_getcpuclockid.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">clock_getcpuclockid</span>(3)</span></a>,
      <a class="link" href="../htmlman3/ctime.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">ctime</span>(3)</span></a>, <a class="link" href="../htmlman3/ftime.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">ftime</span>(3)</span></a>, <a class="link" href="../htmlman3/pthread_getcpuclockid.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">pthread_getcpuclockid</span>(3)</span></a>,
      <a class="link" href="../htmlman3/sysconf.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">sysconf</span>(3)</span></a>, <a class="link" href="../htmlman7/time.7.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">time</span>(7)</span></a></p>
    </div>

    <div class="colophon">
      <a id="clock-getres-2_sect11" name="clock-getres-2_sect11" shape="rect"> </a>

      <h2>COLOPHON</h2>

      <p>This page is part of release 3.72 of the Linux <em class="replaceable"><code>man-pages</code></em> project. A
      description of the project, information about reporting bugs,
      and the latest version of this page, can be found at
      http://www.kernel.org/doc/man−pages/.</p>

      <div class="license">
        <table style="border-collapse: collapse;">
          <colgroup span="1">
            <col span="1" />
          </colgroup>

          <tbody>
            <tr>
              <td style="" rowspan="1" colspan="1">
                <div class="literallayout">
                  <br />
                    Copyright (c) 2003 Nick Clifford (zaf<script type="text/javascript">document.write('@');</script><noscript>(@)</noscript>nrc.co.nz), Jan 25, 2003<br />

                  Copyright (c) 2003 Andries Brouwer (aeb<script type="text/javascript">document.write('@');</script><noscript>(@)</noscript>cwi.nl), Aug 24, 2003<br />

                  <br />
                  %%%LICENSE_START(VERBATIM)<br />
                  Permission is granted to make and distribute verbatim copies of this<br />

                  manual provided the copyright notice and this permission notice are<br />

                  preserved on all copies.<br />
                  <br />
                  Permission is granted to copy and distribute modified versions of this<br />

                  manual under the conditions for verbatim copying, provided that the<br />

                  entire resulting derived work is distributed under the terms of a<br />

                  permission notice identical to this one.<br />

                  <br />
                  Since the Linux kernel and libraries are constantly changing, this<br />

                  manual page may be incorrect or out-of-date.  The author(s) assume no<br />

                  responsibility for errors or omissions, or for damages resulting from<br />

                  the use of the information contained herein.  The author(s) may not<br />

                  have taken the same level of care in the production of this manual,<br />

                  which is licensed free of charge, as they might when working<br />

                  professionally.<br />
                  <br />
                  Formatted or processed versions of this manual, if unaccompanied by<br />

                  the source, must acknowledge the copyright and authors of this work.<br />

                  %%%LICENSE_END<br />
                  <br />
                  2003-08-23 Martin Schulze &lt;joey<script type="text/javascript">document.write('@');</script><noscript>(@)</noscript>infodrom.org&gt; improvements<br />

                  2003-08-24 aeb, large parts rewritten<br />

                  2004-08-06 Christoph Lameter &lt;clameter<script type="text/javascript">document.write('@');</script><noscript>(@)</noscript>sgi.com&gt;, SMP note<br />
                  
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</body>
</html>
