<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

  <title>socket(7) — Linux manual pages</title>
  <link rel="stylesheet" type="text/css" href="../stylesheet/manpages.css" />
  
  <link rel="home" href="../index.html" title="socket(7) — Linux manual pages" />
  <script type="text/javascript" src="../stylesheet/manpages.js" xml:space="preserve">
</script>
  <link rel="icon" href="../stylesheet/icon.gif" type="image/gif" />
</head>

<body onload="javascript:init()">
  <div class="navheader">
    <table width="100%">
      <tbody>
        <tr>
          <td style="width: 33%" rowspan="1" colspan="1"><a href="../index.html" shape="rect">Linux
          manual pages</a></td>

          <th rowspan="1" colspan="1"><a href="../index7.html" shape="rect">Section 7</a></th>

          <td style="width: 33%" rowspan="1" colspan="1"> </td>
        </tr>
      </tbody>
    </table>
    <hr />
  </div>

  <div class="refentry">
    <a id="socket.7" name="socket.7" shape="rect"> </a>

    <div class="titlepage"> </div>

    <div class="refnamediv">
      <h2>Name</h2>

      <p>socket — Linux socket interface</p>
    </div>

    <div class="refsynopsisdiv">
      <h2>Synopsis</h2>

      <div class="funcsynopsis">
        <pre class="funcsynopsisinfo" xml:space="preserve">
#include &lt;sys/socket.h&gt;
</pre>

        <table border="0" class="funcprototype-table" summary="Function synopsis" style="cellspacing: 0; cellpadding: 0;">
          <tr>
            <td rowspan="1" colspan="1"><code class="funcdef">sockfd =
            <strong>socket</strong>(</code></td>

            <td rowspan="1" colspan="1">int <var class="pdparam">socket_family</var>,</td>
          </tr>

          <tr>
            <td rowspan="1" colspan="1"> </td>

            <td rowspan="1" colspan="1">int <var class="pdparam">socket_type</var>,</td>
          </tr>

          <tr>
            <td rowspan="1" colspan="1"> </td>

            <td rowspan="1" colspan="1">int <var class="pdparam">protocol</var><code>)</code>;</td>
          </tr>
        </table>

        <div class="funcprototype-spacer">
           
        </div>
      </div>
    </div>

    <div class="refsect1">
      <a id="socket-7_sect1" name="socket-7_sect1" shape="rect"> </a>

      <h2>DESCRIPTION</h2>

      <p>This manual page describes the Linux networking socket
      layer user interface. The BSD compatible sockets are the
      uniform interface between the user process and the network
      protocol stacks in the kernel. The protocol modules are
      grouped into <span class="emphasis"><em>protocol
      families</em></span> such as <code class="constant">AF_INET</code>, <code class="constant">AF_IPX</code>, and <code class="constant">AF_PACKET</code>, and <span class="emphasis"><em>socket types</em></span> such as <code class="constant">SOCK_STREAM</code> or <code class="constant">SOCK_DGRAM</code>. See <a class="link" href="../htmlman2/socket.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">socket</span>(2)</span></a> for more
      information on families and types.</p>

      <div class="refsect2">
        <a id="socket-7_sect2" name="socket-7_sect2" shape="rect"> </a>

        <h3>Socket-layer functions</h3>

        <p>These functions are used by the user process to send or
        receive packets and to do other socket operations. For more
        information see their respective manual pages.</p>

        <p><a class="link" href="../htmlman2/socket.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">socket</span>(2)</span></a> creates a
        socket, <a class="link" href="../htmlman2/connect.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">connect</span>(2)</span></a> connects a
        socket to a remote socket address, the <a class="link" href="../htmlman2/bind.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">bind</span>(2)</span></a> function binds a
        socket to a local socket address, <a class="link" href="../htmlman2/listen.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">listen</span>(2)</span></a> tells the
        socket that new connections shall be accepted, and
        <a class="link" href="../htmlman2/accept.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">accept</span>(2)</span></a> is used to get
        a new socket with a new incoming connection. <a class="link" href="../htmlman2/socketpair.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">socketpair</span>(2)</span></a> returns two
        connected anonymous sockets (implemented only for a few
        local families like <code class="constant">AF_UNIX</code>)</p>

        <p><a class="link" href="../htmlman2/send.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">send</span>(2)</span></a>, <a class="link" href="../htmlman2/send.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">sendto</span>(2)</span></a>, and <a class="link" href="../htmlman2/send.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">sendmsg</span>(2)</span></a> send data over
        a socket, and <a class="link" href="../htmlman2/recv.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">recv</span>(2)</span></a>, <a class="link" href="../htmlman2/recv.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">recvfrom</span>(2)</span></a>, <a class="link" href="../htmlman2/recv.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">recvmsg</span>(2)</span></a> receive data
        from a socket. <a class="link" href="../htmlman2/poll.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">poll</span>(2)</span></a> and <a class="link" href="../htmlman2/select.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">select</span>(2)</span></a> wait for
        arriving data or a readiness to send data. In addition, the
        standard I/O operations like <a class="link" href="../htmlman2/write.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">write</span>(2)</span></a>, <a class="link" href="../htmlman2/readv.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">writev</span>(2)</span></a>, <a class="link" href="../htmlman2/sendfile.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">sendfile</span>(2)</span></a>, <a class="link" href="../htmlman2/read.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">read</span>(2)</span></a>, and <a class="link" href="../htmlman2/readv.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">readv</span>(2)</span></a> can be used to
        read and write data.</p>

        <p><a class="link" href="../htmlman2/getsockname.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">getsockname</span>(2)</span></a> returns
        the local socket address and <a class="link" href="../htmlman2/getpeername.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">getpeername</span>(2)</span></a> returns
        the remote socket address. <a class="link" href="../htmlman2/getsockopt.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">getsockopt</span>(2)</span></a> and
        <a class="link" href="../htmlman2/getsockopt.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">setsockopt</span>(2)</span></a> are used to
        set or get socket layer or protocol options. <a class="link" href="../htmlman2/ioctl.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">ioctl</span>(2)</span></a> can be used to
        set or read some other options.</p>

        <p><a class="link" href="../htmlman2/close.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">close</span>(2)</span></a> is used to close
        a socket. <a class="link" href="../htmlman2/shutdown.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">shutdown</span>(2)</span></a> closes parts
        of a full-duplex socket connection.</p>

        <p>Seeking, or calling <a class="link" href="../htmlman2/pread.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">pread</span>(2)</span></a> or <a class="link" href="../htmlman2/pread.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">pwrite</span>(2)</span></a> with a nonzero
        position is not supported on sockets.</p>

        <p>It is possible to do nonblocking I/O on sockets by
        setting the <code class="constant">O_NONBLOCK</code> flag
        on a socket file descriptor using <a class="link" href="../htmlman2/fcntl.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">fcntl</span>(2)</span></a>. Then all
        operations that would block will (usually) return with
        <span class="errorname">EAGAIN</span> (operation should be
        retried later); <a class="link" href="../htmlman2/connect.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">connect</span>(2)</span></a> will return
        <span class="errorname">EINPROGRESS</span> error. The user
        can then wait for various events via <a class="link" href="../htmlman2/poll.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">poll</span>(2)</span></a> or <a class="link" href="../htmlman2/select.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">select</span>(2)</span></a>.</p>

        <div class="informaltable">
          <table style="border-collapse: collapse;">
            <colgroup span="1">
              <col class="c0" span="1" />
              <col class="c1" span="1" />
              <col class="c2" span="1" />
            </colgroup>

            <tbody>
              <tr>
                <td style="" colspan="3" align="center" rowspan="1">I/O
                events</td>
              </tr>

              <tr>
                <td style="" align="left" rowspan="1" colspan="1">Event</td>

                <td style="" align="left" rowspan="1" colspan="1">Poll flag</td>

                <td style="" align="left" rowspan="1" colspan="1">Occurrence</td>
              </tr>

              <tr>
                <td style="" align="left" rowspan="1" colspan="1">Read</td>

                <td style="" align="left" rowspan="1" colspan="1">POLLIN</td>

                <td style="" align="left" rowspan="1" colspan="1">New data arrived.</td>
              </tr>

              <tr>
                <td style="" align="left" rowspan="1" colspan="1">Read</td>

                <td style="" align="left" rowspan="1" colspan="1">POLLIN</td>

                <td style="" align="left" rowspan="1" colspan="1">A connection setup has
                been completed (for connection-oriented
                sockets)</td>
              </tr>

              <tr>
                <td style="" align="left" rowspan="1" colspan="1">Read</td>

                <td style="" align="left" rowspan="1" colspan="1">POLLHUP</td>

                <td style="" align="left" rowspan="1" colspan="1">A disconnection request
                has been initiated by the other end.</td>
              </tr>

              <tr>
                <td style="" align="left" rowspan="1" colspan="1">Read</td>

                <td style="" align="left" rowspan="1" colspan="1">POLLHUP</td>

                <td style="" align="left" rowspan="1" colspan="1">A connection is broken
                (only for connection-oriented protocols). When the
                socket is written <code class="literal">SIGPIPE</code> is also sent.</td>
              </tr>

              <tr>
                <td style="" align="left" rowspan="1" colspan="1">Write</td>

                <td style="" align="left" rowspan="1" colspan="1">POLLOUT</td>

                <td style="" align="left" rowspan="1" colspan="1">Socket has enough send
                buffer space for writing new data.</td>
              </tr>

              <tr>
                <td style="" align="left" rowspan="1" colspan="1">Read/Write</td>

                <td style="" align="left" rowspan="1" colspan="1">POLLIN|POLLOUT</td>

                <td style="" align="left" rowspan="1" colspan="1">An outgoing <a class="link" href="../htmlman2/connect.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">connect</span>(2)</span></a>
                finished.</td>
              </tr>

              <tr>
                <td style="" align="left" rowspan="1" colspan="1">Read/Write</td>

                <td style="" align="left" rowspan="1" colspan="1">POLLERR</td>

                <td style="" align="left" rowspan="1" colspan="1">An asynchronous error
                occurred.</td>
              </tr>

              <tr>
                <td style="" align="left" rowspan="1" colspan="1">Read/Write</td>

                <td style="" align="left" rowspan="1" colspan="1">POLLHUP</td>

                <td style="" align="left" rowspan="1" colspan="1">The other end has shut
                down one direction.</td>
              </tr>

              <tr>
                <td style="" align="left" rowspan="1" colspan="1">Exception</td>

                <td style="" align="left" rowspan="1" colspan="1">POLLPRI</td>

                <td style="" align="left" rowspan="1" colspan="1">Urgent data arrived.
                <code class="literal">SIGURG</code> is sent
                then.</td>
              </tr>
            </tbody>
          </table>
        </div>

        <p>An alternative to <a class="link" href="../htmlman2/poll.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">poll</span>(2)</span></a> and <a class="link" href="../htmlman2/select.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">select</span>(2)</span></a> is to let the
        kernel inform the application about events via a
        <code class="constant">SIGIO</code> signal. For that the
        <code class="constant">O_ASYNC</code> flag must be set on a
        socket file descriptor via <a class="link" href="../htmlman2/fcntl.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">fcntl</span>(2)</span></a> and a valid
        signal handler for <code class="constant">SIGIO</code> must
        be installed via <a class="link" href="../htmlman2/sigaction.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">sigaction</span>(2)</span></a>. See the
        <em class="replaceable"><code>Signals</code></em>
        discussion below.</p>
      </div>

      <div class="refsect2">
        <a id="socket-7_sect3" name="socket-7_sect3" shape="rect"> </a>

        <h3>Socket address structures</h3>

        <p>Each socket domain has its own format for socket
        addresses, with a domain-specific address structure. Each
        of these structures begins with an integer "family" field
        (typed as <em class="replaceable"><code>sa_family_t</code></em>) that indicates
        the type of the address structure. This allows the various
        system calls (e.g., <a class="link" href="../htmlman2/connect.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">connect</span>(2)</span></a>, <a class="link" href="../htmlman2/bind.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">bind</span>(2)</span></a>, <a class="link" href="../htmlman2/accept.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">accept</span>(2)</span></a>, <a class="link" href="../htmlman2/getsockname.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">getsockname</span>(2)</span></a>, <a class="link" href="../htmlman2/getpeername.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">getpeername</span>(2)</span></a>), which
        are generic to all socket domains, to determine the domain
        of a particular socket address.</p>

        <p>To allow any type of socket address to be passed to
        interfaces in the sockets API, the type <span class="emphasis"><em>struct sockaddr</em></span> is defined. The
        purpose of this type is purely to allow casting of
        domain-specific socket address types to a "generic" type,
        so as to avoid compiler warnings about type mismatches in
        calls to the sockets API.</p>

        <p>In addition, the sockets API provides the data type
        <span class="emphasis"><em>struct
        sockaddr_storage</em></span>. This type is suitable to
        accommodate all supported domain-specific socket address
        structures; it is large enough and is aligned properly. (In
        particular, it is large enough to hold IPv6 socket
        addresses.) The structure includes the following field,
        which can be used to identify the type of socket address
        actually stored in the structure:</p>

        <div class="blockquote">
          <blockquote class="blockquote">
            <div class="informalexample">
              <pre class="programlisting" xml:space="preserve">
    sa_family_t ss_family;
</pre>
            </div>
          </blockquote>
        </div>

        <p>The <em class="replaceable"><code>sockaddr_storage</code></em> structure
        is useful in programs that must handle socket addresses in
        a generic way (e.g., programs that must deal with both IPv4
        and IPv6 socket addresses).</p>
      </div>

      <div class="refsect2">
        <a id="socket-7_sect4" name="socket-7_sect4" shape="rect"> </a>

        <h3>Socket options</h3>

        <p>The socket options listed below can be set by using
        <a class="link" href="../htmlman2/getsockopt.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">setsockopt</span>(2)</span></a> and read
        with <a class="link" href="../htmlman2/getsockopt.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">getsockopt</span>(2)</span></a> with the
        socket level set to <code class="constant">SOL_SOCKET</code> for all sockets. Unless
        otherwise noted, <em class="replaceable"><code>optval</code></em> is a pointer to an
        <em class="replaceable"><code>int</code></em>.</p>

        <div class="variablelist">
          <dl class="variablelist">
            <dt><span class="term"><code class="constant">SO_ACCEPTCONN</code></span></dt>

            <dd>
              <p>Returns a value indicating whether or not this
              socket has been marked to accept connections with
              <a class="link" href="../htmlman2/listen.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">listen</span>(2)</span></a>. The
              value 0 indicates that this is not a listening
              socket, the value 1 indicates that this is a
              listening socket. This socket option is
              read-only.</p>
            </dd>

            <dt><span class="term"><code class="constant">SO_BINDTODEVICE</code></span></dt>

            <dd>
              <p>Bind this socket to a particular device like
              <span class="quote">“<span class="quote">eth0</span>”</span>, as specified in
              the passed interface name. If the name is an empty
              string or the option length is zero, the socket
              device binding is removed. The passed option is a
              variable-length null-terminated interface name string
              with the maximum size of <code class="constant">IFNAMSIZ</code>. If a socket is bound to
              an interface, only packets received from that
              particular interface are processed by the socket.
              Note that this works only for some socket types,
              particularly <code class="constant">AF_INET</code>
              sockets. It is not supported for packet sockets (use
              normal <a class="link" href="../htmlman2/bind.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">bind</span>(2)</span></a> there).</p>

              <p>Before Linux 3.8, this socket option could be set,
              but could not retrieved with <a class="link" href="../htmlman2/getsockopt.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">getsockopt</span>(2)</span></a>.
              Since Linux 3.8, it is readable. The <em class="replaceable"><code>optlen</code></em> argument
              should contain the buffer size available to receive
              the device name and is recommended to be <code class="constant">IFNAMSZ</code> bytes. The real device name
              length is reported back in the <em class="replaceable"><code>optlen</code></em> argument.</p>
            </dd>

            <dt><span class="term"><code class="constant">SO_BROADCAST</code></span></dt>

            <dd>
              <p>Set or get the broadcast flag. When enabled,
              datagram sockets are allowed to send packets to a
              broadcast address. This option has no effect on
              stream-oriented sockets.</p>
            </dd>

            <dt><span class="term"><code class="constant">SO_BSDCOMPAT</code></span></dt>

            <dd>
              <p>Enable BSD bug-to-bug compatibility. This is used
              by the UDP protocol module in Linux 2.0 and 2.2. If
              enabled, ICMP errors received for a UDP socket will
              not be passed to the user program. In later kernel
              versions, support for this option has been phased
              out: Linux 2.4 silently ignores it, and Linux 2.6
              generates a kernel warning (printk()) if a program
              uses this option. Linux 2.0 also enabled BSD
              bug-to-bug compatibility options (random header
              changing, skipping of the broadcast flag) for raw
              sockets with this option, but that was removed in
              Linux 2.2.</p>
            </dd>

            <dt><span class="term"><code class="constant">SO_DEBUG</code></span></dt>

            <dd>
              <p>Enable socket debugging. Only allowed for
              processes with the <code class="constant">CAP_NET_ADMIN</code> capability or an
              effective user ID of 0.</p>
            </dd>

            <dt><span class="term"><code class="constant">SO_DOMAIN</code> (since Linux
            2.6.32)</span></dt>

            <dd>
              <p>Retrieves the socket domain as an integer,
              returning a value such as <code class="constant">AF_INET6</code>. See <a class="link" href="../htmlman2/socket.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">socket</span>(2)</span></a> for
              details. This socket option is read-only.</p>
            </dd>

            <dt><span class="term"><code class="constant">SO_ERROR</code></span></dt>

            <dd>
              <p>Get and clear the pending socket error. This
              socket option is read-only. Expects an integer.</p>
            </dd>

            <dt><span class="term"><code class="constant">SO_DONTROUTE</code></span></dt>

            <dd>
              <p>Don't send via a gateway, send only to directly
              connected hosts. The same effect can be achieved by
              setting the <code class="constant">MSG_DONTROUTE</code> flag on a socket
              <a class="link" href="../htmlman2/send.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">send</span>(2)</span></a> operation.
              Expects an integer boolean flag.</p>
            </dd>

            <dt><span class="term"><code class="constant">SO_KEEPALIVE</code></span></dt>

            <dd>
              <p>Enable sending of keep-alive messages on
              connection-oriented sockets. Expects an integer
              boolean flag.</p>
            </dd>

            <dt><span class="term"><code class="constant">SO_LINGER</code></span></dt>

            <dd>
              <p>Sets or gets the <code class="constant">SO_LINGER</code> option. The argument is a
              <em class="replaceable"><code>linger</code></em>
              structure.</p>

              <div class="blockquote">
                <blockquote class="blockquote">
                  <div class="structdef">
                    <table style="border-collapse: collapse;">
                      <colgroup span="1">
                        <col class="c1" span="1" />
                        <col class="c2" span="1" />
                        <col class="c3" span="1" />
                        <col class="c4" span="1" />
                        <col class="c5" span="1" />
                      </colgroup>

                      <tbody>
                        <tr>
                          <td class="structdefhdr" style="" align="left" rowspan="1" colspan="1">struct</td>

                          <td class="structdefhdr" style="" colspan="4" align="left" rowspan="1"><span class="structname">linger</span> {</td>
                        </tr>

                        <tr>
                          <td style="" rowspan="1" colspan="1"> </td>

                          <td style="" align="left" rowspan="1" colspan="1"><span class="type">int</span></td>

                          <td class="norightpad" style="" align="right" rowspan="1" colspan="1"> </td>

                          <td style="" align="left" rowspan="1" colspan="1"><em class="structfield"><code>l_onoff</code></em>;</td>

                          <td style="" align="left" rowspan="1" colspan="1">
                            <div class="literallayout">
                              
                              /* linger active */
                            </div>
                          </td>
                        </tr>

                        <tr>
                          <td style="" rowspan="1" colspan="1"> </td>

                          <td style="" align="left" rowspan="1" colspan="1"><span class="type">int</span></td>

                          <td class="norightpad" style="" align="right" rowspan="1" colspan="1"> </td>

                          <td style="" align="left" rowspan="1" colspan="1"><em class="structfield"><code>l_linger</code></em>;</td>

                          <td style="" align="left" rowspan="1" colspan="1">
                            <div class="literallayout">
                              
                              /* how many seconds to linger for */
                            </div>
                          </td>
                        </tr>

                        <tr>
                          <td class="structdefftr" style="" colspan="5" align="left" rowspan="1">};</td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </blockquote>
              </div>

              <p>When enabled, a <a class="link" href="../htmlman2/close.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">close</span>(2)</span></a> or
              <a class="link" href="../htmlman2/shutdown.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">shutdown</span>(2)</span></a> will
              not return until all queued messages for the socket
              have been successfully sent or the linger timeout has
              been reached. Otherwise, the call returns immediately
              and the closing is done in the background. When the
              socket is closed as part of <a class="link" href="../htmlman2/_exit.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">exit</span>(2)</span></a>, it always
              lingers in the background.</p>
            </dd>

            <dt><span class="term"><code class="constant">SO_MARK</code> (since Linux
            2.6.25)</span></dt>

            <dd>
              <p>Set the mark for each packet sent through this
              socket (similar to the netfilter MARK target but
              socket-based). Changing the mark can be used for
              mark-based routing without netfilter or for packet
              filtering. Setting this option requires the
              <code class="constant">CAP_NET_ADMIN</code>
              capability.</p>
            </dd>

            <dt><span class="term"><code class="constant">SO_OOBINLINE</code></span></dt>

            <dd>
              <p>If this option is enabled, out-of-band data is
              directly placed into the receive data stream.
              Otherwise, out-of-band data is passed only when the
              <code class="constant">MSG_OOB</code> flag is set
              during receiving.</p>
            </dd>

            <dt><span class="term"><code class="constant">SO_PASSCRED</code></span></dt>

            <dd>
              <p>Enable or disable the receiving of the
              <code class="constant">SCM_CREDENTIALS</code> control
              message. For more information see <a class="link" href="../htmlman7/unix.7.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">unix</span>(7)</span></a>.</p>
            </dd>

            <dt><span class="term"><code class="constant">SO_PEEK_OFF</code> (since Linux
            3.4)</span></dt>

            <dd>
              <p>This option, which is currently supported only for
              <a class="link" href="../htmlman7/unix.7.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">unix</span>(7)</span></a> sockets,
              sets the value of the "peek offset" for the <a class="link" href="../htmlman2/recv.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">recv</span>(2)</span></a> system call
              when used with <code class="constant">MSG_PEEK</code>
              flag.</p>

              <p>When this option is set to a negative value (it is
              set to −1 for all new sockets), traditional
              behavior is provided: <a class="link" href="../htmlman2/recv.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">recv</span>(2)</span></a> with the
              <code class="constant">MSG_PEEK</code> flag will peek
              data from the front of the queue.</p>

              <p>When the option is set to a value greater than or
              equal to zero, then the next peek at data queued in
              the socket will occur at the byte offset specified by
              the option value. At the same time, the "peek offset"
              will be incremented by the number of bytes that were
              peeked from the queue, so that a subsequent peek will
              return the next data in the queue.</p>

              <p>If data is removed from the front of the queue via
              a call to <a class="link" href="../htmlman2/recv.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">recv</span>(2)</span></a> (or
              similar) without the <code class="constant">MSG_PEEK</code> flag, the "peek offset"
              will be decreased by the number of bytes removed. In
              other words, receiving data without the <code class="constant">MSG_PEEK</code> flag will cause the "peek
              offset" to be adjusted to maintain the correct
              relative position in the queued data, so that a
              subsequent peek will retrieve the data that would
              have been retrieved had the data not been
              removed.</p>

              <p>For datagram sockets, if the "peek offset" points
              to the middle of a packet, the data returned will be
              marked with the <code class="constant">MSG_TRUNC</code> flag.</p>

              <p>The following example serves to illustrate the use
              of <code class="constant">SO_PEEK_OFF</code>. Suppose
              a stream socket has the following queued input
              data:</p>

              <p>aabbccddeeff</p>

              <p>The following sequence of <a class="link" href="../htmlman2/recv.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">recv</span>(2)</span></a> calls would
              have the effect noted in the comments:</p>

              <div class="blockquote">
                <blockquote class="blockquote">
                  <div class="informalexample">
                    <pre class="programlisting" xml:space="preserve">
int ov = 4;                  // Set peek offset to 4
setsockopt(fd, SOL_SOCKET, SO_PEEK_OFF, &amp;ov, sizeof(ov));

recv(fd, buf, 2, MSG_PEEK);  // Peeks "cc"; offset set to 6
recv(fd, buf, 2, MSG_PEEK);  // Peeks "dd"; offset set to 8
recv(fd, buf, 2, 0);         // Reads "aa"; offset set to 6
recv(fd, buf, 2, MSG_PEEK);  // Peeks "ee"; offset set to 8
</pre>
                  </div>
                </blockquote>
              </div>
            </dd>

            <dt><span class="term"><code class="constant">SO_PEERCRED</code></span></dt>

            <dd>
              <p>Return the credentials of the foreign process
              connected to this socket. This is possible only for
              connected <code class="constant">AF_UNIX</code>
              stream sockets and <code class="constant">AF_UNIX</code> stream and datagram socket
              pairs created using <a class="link" href="../htmlman2/socketpair.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">socketpair</span>(2)</span></a>; see
              <a class="link" href="../htmlman7/unix.7.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">unix</span>(7)</span></a>. The
              returned credentials are those that were in effect at
              the time of the call to <a class="link" href="../htmlman2/connect.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">connect</span>(2)</span></a> or
              <a class="link" href="../htmlman2/socketpair.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">socketpair</span>(2)</span></a>. The
              argument is a <em class="replaceable"><code>ucred</code></em> structure;
              define the <code class="constant">_GNU_SOURCE</code>
              feature test macro to obtain the definition of that
              structure from <code class="literal">&lt;</code><code class="filename">sys/socket.h</code><code class="literal">&gt;</code> This socket option is
              read-only.</p>
            </dd>

            <dt><span class="term"><code class="constant">SO_PRIORITY</code></span></dt>

            <dd>
              <p>Set the protocol-defined priority for all packets
              to be sent on this socket. Linux uses this value to
              order the networking queues: packets with a higher
              priority may be processed first depending on the
              selected device queueing discipline. Setting a
              priority outside the range 0 to 6 requires the
              <code class="constant">CAP_NET_ADMIN</code>
              capability.</p>
            </dd>

            <dt><span class="term"><code class="constant">SO_PROTOCOL</code> (since Linux
            2.6.32)</span></dt>

            <dd>
              <p>Retrieves the socket protocol as an integer,
              returning a value such as <code class="constant">IPPROTO_SCTP</code>. See <a class="link" href="../htmlman2/socket.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">socket</span>(2)</span></a> for
              details. This socket option is read-only.</p>
            </dd>

            <dt><span class="term"><code class="constant">SO_RCVBUF</code></span></dt>

            <dd>
              <p>Sets or gets the maximum socket receive buffer in
              bytes. The kernel doubles this value (to allow space
              for bookkeeping overhead) when it is set using
              <a class="link" href="../htmlman2/getsockopt.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">setsockopt</span>(2)</span></a>, and
              this doubled value is returned by <a class="link" href="../htmlman2/getsockopt.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">getsockopt</span>(2)</span></a>. The
              default value is set by the <code class="filename">/proc/sys/net/core/rmem_default</code>
              file, and the maximum allowed value is set by the
              <code class="filename">/proc/sys/net/core/rmem_max</code> file.
              The minimum (doubled) value for this option is
              256.</p>
            </dd>

            <dt><span class="term"><code class="constant">SO_RCVBUFFORCE</code> (since Linux
            2.6.14)</span></dt>

            <dd>
              <p>Using this socket option, a privileged
              (<code class="constant">CAP_NET_ADMIN</code>) process
              can perform the same task as <code class="constant">SO_RCVBUF</code>, but the <em class="replaceable"><code>rmem_max</code></em> limit can be
              overridden.</p>
            </dd>

            <dt><span class="term"><code class="constant">SO_RCVLOWAT</code> and <code class="constant">SO_SNDLOWAT</code></span></dt>

            <dd>
              <p>Specify the minimum number of bytes in the buffer
              until the socket layer will pass the data to the
              protocol (<code class="constant">SO_SNDLOWAT</code>)
              or the user on receiving (<code class="constant">SO_RCVLOWAT</code>). These two values are
              initialized to 1. <code class="constant">SO_SNDLOWAT</code> is not changeable on
              Linux (<a class="link" href="../htmlman2/getsockopt.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">setsockopt</span>(2)</span></a> fails
              with the error <span class="errorname">ENOPROTOOPT</span>). <code class="constant">SO_RCVLOWAT</code> is changeable only
              since Linux 2.4. The <a class="link" href="../htmlman2/select.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">select</span>(2)</span></a> and
              <a class="link" href="../htmlman2/poll.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">poll</span>(2)</span></a> system
              calls currently do not respect the <code class="constant">SO_RCVLOWAT</code> setting on Linux, and
              mark a socket readable when even a single byte of
              data is available. A subsequent read from the socket
              will block until <code class="constant">SO_RCVLOWAT</code> bytes are
              available.</p>
            </dd>

            <dt><span class="term"><code class="constant">SO_RCVTIMEO</code> and <code class="constant">SO_SNDTIMEO</code></span></dt>

            <dd>
              <p>Specify the receiving or sending timeouts until
              reporting an error. The argument is a <span class="emphasis"><em>struct timeval</em></span>. If an
              input or output function blocks for this period of
              time, and data has been sent or received, the return
              value of that function will be the amount of data
              transferred; if no data has been transferred and the
              timeout has been reached, then −1 is returned
              with <code class="varname">errno</code> set to
              <span class="errorname">EAGAIN</span> or <span class="errorname">EWOULDBLOCK</span>, or <span class="errorname">EINPROGRESS</span> (for <a class="link" href="../htmlman2/connect.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">connect</span>(2)</span></a>) just as
              if the socket was specified to be nonblocking. If the
              timeout is set to zero (the default), then the
              operation will never timeout. Timeouts only have
              effect for system calls that perform socket I/O
              (e.g., <a class="link" href="../htmlman2/read.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">read</span>(2)</span></a>, <a class="link" href="../htmlman2/recv.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">recvmsg</span>(2)</span></a>,
              <a class="link" href="../htmlman2/send.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">send</span>(2)</span></a>, <a class="link" href="../htmlman2/send.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">sendmsg</span>(2)</span></a>);
              timeouts have no effect for <a class="link" href="../htmlman2/select.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">select</span>(2)</span></a>,
              <a class="link" href="../htmlman2/poll.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">poll</span>(2)</span></a>, <a class="link" href="../htmlman2/epoll_wait.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">epoll_wait</span>(2)</span></a>, and
              so on.</p>
            </dd>

            <dt><span class="term"><code class="constant">SO_REUSEADDR</code></span></dt>

            <dd>
              <p>Indicates that the rules used in validating
              addresses supplied in a <a class="link" href="../htmlman2/bind.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">bind</span>(2)</span></a> call should
              allow reuse of local addresses. For <code class="constant">AF_INET</code> sockets this means that a
              socket may bind, except when there is an active
              listening socket bound to the address. When the
              listening socket is bound to <code class="constant">INADDR_ANY</code> with a specific port
              then it is not possible to bind to this port for any
              local address. Argument is an integer boolean
              flag.</p>
            </dd>

            <dt><span class="term"><code class="constant">SO_REUSEPORT</code> (since Linux
            3.9)</span></dt>

            <dd>
              <p>Permits multiple <code class="constant">AF_INET</code> or <code class="constant">AF_INET6</code> sockets to be bound to an
              identical socket address. This option must be set on
              each socket (including the first socket) prior to
              calling <a class="link" href="../htmlman2/bind.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">bind</span>(2)</span></a> on the
              socket. To prevent port hijacking, all of the
              processes binding to the same address must have the
              same effective UID. This option can be employed with
              both TCP and UDP sockets.</p>

              <p>For TCP sockets, this option allows <a class="link" href="../htmlman2/accept.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">accept</span>(2)</span></a> load
              distribution in a multi-threaded server to be
              improved by using a distinct listener socket for each
              thread. This provides improved load distribution as
              compared to traditional techniques such using a
              single <a class="link" href="../htmlman2/accept.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">accept</span>(2)</span></a>ing thread
              that distributes connections, or having multiple
              threads that compete to <a class="link" href="../htmlman2/accept.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">accept</span>(2)</span></a> from the
              same socket.</p>

              <p>For UDP sockets, the use of this option can
              provide better distribution of incoming datagrams to
              multiple processes (or threads) as compared to the
              traditional technique of having multiple processes
              compete to receive datagrams on the same socket.</p>
            </dd>

            <dt><span class="term"><code class="constant">SO_RXQ_OVFL</code> (since Linux
            2.6.33)</span></dt>

            <dd>
              <p>Indicates that an unsigned 32-bit value ancillary
              message (cmsg) should be attached to received skbs
              indicating the number of packets dropped by the
              socket between the last received packet and this
              received packet.</p>
            </dd>

            <dt><span class="term"><code class="constant">SO_SNDBUF</code></span></dt>

            <dd>
              <p>Sets or gets the maximum socket send buffer in
              bytes. The kernel doubles this value (to allow space
              for bookkeeping overhead) when it is set using
              <a class="link" href="../htmlman2/getsockopt.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">setsockopt</span>(2)</span></a>, and
              this doubled value is returned by <a class="link" href="../htmlman2/getsockopt.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">getsockopt</span>(2)</span></a>. The
              default value is set by the <code class="filename">/proc/sys/net/core/wmem_default</code>
              file and the maximum allowed value is set by the
              <code class="filename">/proc/sys/net/core/wmem_max</code> file.
              The minimum (doubled) value for this option is
              2048.</p>
            </dd>

            <dt><span class="term"><code class="constant">SO_SNDBUFFORCE</code> (since Linux
            2.6.14)</span></dt>

            <dd>
              <p>Using this socket option, a privileged
              (<code class="constant">CAP_NET_ADMIN</code>) process
              can perform the same task as <code class="constant">SO_SNDBUF</code>, but the <em class="replaceable"><code>wmem_max</code></em> limit can be
              overridden.</p>
            </dd>

            <dt><span class="term"><code class="constant">SO_TIMESTAMP</code></span></dt>

            <dd>
              <p>Enable or disable the receiving of the
              <code class="constant">SO_TIMESTAMP</code> control
              message. The timestamp control message is sent with
              level <code class="constant">SOL_SOCKET</code> and
              the <em class="replaceable"><code>cmsg_data</code></em> field is a
              <span class="emphasis"><em>struct timeval</em></span>
              indicating the reception time of the last packet
              passed to the user in this call. See <a class="link" href="../htmlman3/cmsg.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">cmsg</span>(3)</span></a> for details
              on control messages.</p>
            </dd>

            <dt><span class="term"><code class="constant">SO_TYPE</code></span></dt>

            <dd>
              <p>Gets the socket type as an integer (e.g.,
              <code class="constant">SOCK_STREAM</code>). This
              socket option is read-only.</p>
            </dd>

            <dt><span class="term"><code class="constant">SO_BUSY_POLL</code> (since Linux
            3.11)</span></dt>

            <dd>
              <p>Sets the approximate time in microseconds to busy
              poll on a blocking receive when there is no data.
              Increasing this value requires <code class="constant">CAP_NET_ADMIN</code>. The default for this
              option is controlled by the <code class="filename">/proc/sys/net/core/busy_read</code>
              file.</p>

              <p>The value in the <code class="filename">/proc/sys/net/core/busy_poll</code> file
              determines how long <a class="link" href="../htmlman2/select.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">select</span>(2)</span></a> and
              <a class="link" href="../htmlman2/poll.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">poll</span>(2)</span></a> will busy
              poll when they operate on sockets with <code class="constant">SO_BUSY_POLL</code> set and no events to
              report are found.</p>

              <p>In both cases, busy polling will only be done when
              the socket last received data from a network device
              that supports this option.</p>

              <p>While busy polling may improve latency of some
              applications, care must be taken when using it since
              this will increase both CPU utilization and power
              usage.</p>
            </dd>
          </dl>
        </div>
      </div>

      <div class="refsect2">
        <a id="socket-7_sect5" name="socket-7_sect5" shape="rect"> </a>

        <h3>Signals</h3>

        <p>When writing onto a connection-oriented socket that has
        been shut down (by the local or the remote end)
        <code class="constant">SIGPIPE</code> is sent to the
        writing process and <span class="errorname">EPIPE</span> is
        returned. The signal is not sent when the write call
        specified the <code class="constant">MSG_NOSIGNAL</code>
        flag.</p>

        <p>When requested with the <code class="constant">FIOSETOWN</code> <a class="link" href="../htmlman2/fcntl.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">fcntl</span>(2)</span></a> or <code class="constant">SIOCSPGRP</code> <a class="link" href="../htmlman2/ioctl.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">ioctl</span>(2)</span></a>, <code class="constant">SIGIO</code> is sent when an I/O event occurs.
        It is possible to use <a class="link" href="../htmlman2/poll.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">poll</span>(2)</span></a> or <a class="link" href="../htmlman2/select.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">select</span>(2)</span></a> in the signal
        handler to find out which socket the event occurred on. An
        alternative (in Linux 2.2) is to set a real-time signal
        using the <code class="constant">F_SETSIG</code> <a class="link" href="../htmlman2/fcntl.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">fcntl</span>(2)</span></a>; the handler of
        the real time signal will be called with the file
        descriptor in the <em class="replaceable"><code>si_fd</code></em> field of its
        <em class="replaceable"><code>siginfo_t</code></em>. See
        <a class="link" href="../htmlman2/fcntl.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">fcntl</span>(2)</span></a> for more
        information.</p>

        <p>Under some circumstances (e.g., multiple processes
        accessing a single socket), the condition that caused the
        <code class="constant">SIGIO</code> may have already
        disappeared when the process reacts to the signal. If this
        happens, the process should wait again because Linux will
        resend the signal later.</p>
      </div>

      <div class="refsect2">
        <a id="socket-7_sect6" name="socket-7_sect6" shape="rect"> </a>

        <h3>/proc interfaces</h3>

        <p>The core socket networking parameters can be accessed
        via files in the directory <code class="filename">/proc/sys/net/core/</code>.</p>

        <div class="variablelist">
          <dl class="variablelist">
            <dt><span class="term"><em class="replaceable"><code>rmem_default</code></em></span></dt>

            <dd>
              <p>contains the default setting in bytes of the
              socket receive buffer.</p>
            </dd>

            <dt><span class="term"><em class="replaceable"><code>rmem_max</code></em></span></dt>

            <dd>
              <p>contains the maximum socket receive buffer size in
              bytes which a user may set by using the <code class="constant">SO_RCVBUF</code> socket option.</p>
            </dd>

            <dt><span class="term"><em class="replaceable"><code>wmem_default</code></em></span></dt>

            <dd>
              <p>contains the default setting in bytes of the
              socket send buffer.</p>
            </dd>

            <dt><span class="term"><em class="replaceable"><code>wmem_max</code></em></span></dt>

            <dd>
              <p>contains the maximum socket send buffer size in
              bytes which a user may set by using the <code class="constant">SO_SNDBUF</code> socket option.</p>
            </dd>

            <dt><span class="term"><em class="replaceable"><code>message_cost</code></em> and
            <em class="replaceable"><code>message_burst</code></em></span></dt>

            <dd>
              <p>configure the token bucket filter used to load
              limit warning messages caused by external network
              events.</p>
            </dd>

            <dt><span class="term"><em class="replaceable"><code>netdev_max_backlog</code></em></span></dt>

            <dd>
              <p>Maximum number of packets in the global input
              queue.</p>
            </dd>

            <dt><span class="term"><em class="replaceable"><code>optmem_max</code></em></span></dt>

            <dd>
              <p>Maximum length of ancillary data and user control
              data like the iovecs per socket.</p>
            </dd>
          </dl>
        </div>
      </div>

      <div class="refsect2">
        <a id="socket-7_sect7" name="socket-7_sect7" shape="rect"> </a>

        <h3>Ioctls</h3>

        <p>These operations can be accessed using <a class="link" href="../htmlman2/ioctl.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">ioctl</span>(2)</span></a>:</p>

        <div class="blockquote">
          <blockquote class="blockquote">
            <div class="informalexample">
              <pre class="programlisting" xml:space="preserve">
<em class="replaceable"><code>error</code></em> = ioctl(<em class="replaceable"><code>ip_socket</code></em>, <em class="replaceable"><code>ioctl_type</code></em>, <em class="replaceable"><code>&amp;value_result</code></em>);
</pre>
            </div>
          </blockquote>
        </div>

        <div class="variablelist">
          <dl class="variablelist">
            <dt><span class="term"><code class="constant">SIOCGSTAMP</code></span></dt>

            <dd>
              <p>Return a <span class="emphasis"><em>struct
              timeval</em></span> with the receive timestamp of the
              last packet passed to the user. This is useful for
              accurate round trip time measurements. See <a class="link" href="../htmlman2/getitimer.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">setitimer</span>(2)</span></a> for a
              description of <span class="emphasis"><em>struct
              timeval</em></span>. This ioctl should be used only
              if the socket option <code class="constant">SO_TIMESTAMP</code> is not set on the
              socket. Otherwise, it returns the timestamp of the
              last packet that was received while <code class="constant">SO_TIMESTAMP</code> was not set, or it
              fails if no such packet has been received, (i.e.,
              <a class="link" href="../htmlman2/ioctl.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">ioctl</span>(2)</span></a> returns
              −1 with <code class="varname">errno</code> set
              to <span class="errorname">ENOENT</span>).</p>
            </dd>

            <dt><span class="term"><code class="constant">SIOCSPGRP</code></span></dt>

            <dd>
              <p>Set the process or process group to send
              <code class="constant">SIGIO</code> or <code class="constant">SIGURG</code> signals to when an
              asynchronous I/O operation has finished or urgent
              data is available. The argument is a pointer to a
              <em class="replaceable"><code>pid_t</code></em>. If
              the argument is positive, send the signals to that
              process. If the argument is negative, send the
              signals to the process group with the ID of the
              absolute value of the argument. The process may only
              choose itself or its own process group to receive
              signals unless it has the <code class="constant">CAP_KILL</code> capability or an effective
              UID of 0.</p>
            </dd>

            <dt><span class="term"><code class="constant">FIOASYNC</code></span></dt>

            <dd>
              <p>Change the <code class="constant">O_ASYNC</code>
              flag to enable or disable asynchronous I/O mode of
              the socket. Asynchronous I/O mode means that the
              <code class="constant">SIGIO</code> signal or the
              signal set with <code class="constant">F_SETSIG</code> is raised when a new I/O
              event occurs.</p>

              <p>Argument is an integer boolean flag. (This
              operation is synonymous with the use of <a class="link" href="../htmlman2/fcntl.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">fcntl</span>(2)</span></a> to set the
              <code class="constant">O_ASYNC</code> flag.)</p>
            </dd>

            <dt><span class="term"><code class="constant">SIOCGPGRP</code></span></dt>

            <dd>
              <p>Get the current process or process group that
              receives <code class="constant">SIGIO</code> or
              <code class="constant">SIGURG</code> signals, or 0
              when none is set.</p>
            </dd>
          </dl>
        </div>

        <p>Valid <a class="link" href="../htmlman2/fcntl.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">fcntl</span>(2)</span></a> operations:</p>

        <div class="variablelist">
          <dl class="variablelist">
            <dt><span class="term"><code class="constant">FIOGETOWN</code></span></dt>

            <dd>
              <p>The same as the <code class="constant">SIOCGPGRP</code> <a class="link" href="../htmlman2/ioctl.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">ioctl</span>(2)</span></a>.</p>
            </dd>

            <dt><span class="term"><code class="constant">FIOSETOWN</code></span></dt>

            <dd>
              <p>The same as the <code class="constant">SIOCSPGRP</code> <a class="link" href="../htmlman2/ioctl.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">ioctl</span>(2)</span></a>.</p>
            </dd>
          </dl>
        </div>
      </div>
    </div>

    <div class="refsect1">
      <a id="socket-7_sect8" name="socket-7_sect8" shape="rect"> </a>

      <h2>VERSIONS</h2>

      <p><code class="constant">SO_BINDTODEVICE</code> was
      introduced in Linux 2.0.30. <code class="constant">SO_PASSCRED</code> is new in Linux 2.2. The
      <code class="filename">/proc</code> interfaces were
      introduced in Linux 2.2. <code class="constant">SO_RCVTIMEO</code> and <code class="constant">SO_SNDTIMEO</code> are supported since Linux
      2.3.41. Earlier, timeouts were fixed to a protocol-specific
      setting, and could not be read or written.</p>
    </div>

    <div class="refsect1">
      <a id="socket-7_sect9" name="socket-7_sect9" shape="rect"> </a>

      <h2>NOTES</h2>

      <p>Linux assumes that half of the send/receive buffer is used
      for internal kernel structures; thus the values in the
      corresponding <code class="filename">/proc</code> files are
      twice what can be observed on the wire.</p>

      <p>Linux will allow port reuse only with the <code class="constant">SO_REUSEADDR</code> option when this option was
      set both in the previous program that performed a <a class="link" href="../htmlman2/bind.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">bind</span>(2)</span></a> to the port and in
      the program that wants to reuse the port. This differs from
      some implementations (e.g., FreeBSD) where only the later
      program needs to set the <code class="constant">SO_REUSEADDR</code> option. Typically this
      difference is invisible, since, for example, a server program
      is designed to always set this option.</p>
    </div>

    <div class="refsect1">
      <a id="socket-7_sect10" name="socket-7_sect10" shape="rect"> </a>

      <h2>BUGS</h2>

      <p>The <code class="constant">CONFIG_FILTER</code> socket
      options <code class="constant">SO_ATTACH_FILTER</code> and
      <code class="constant">SO_DETACH_FILTER</code> are not
      documented. The suggested interface to use them is via the
      libpcap library.</p>
    </div>

    <div class="refsect1">
      <a id="socket-7_sect11" name="socket-7_sect11" shape="rect"> </a>

      <h2>SEE ALSO</h2>

      <p><a class="link" href="../htmlman2/connect.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">connect</span>(2)</span></a>, <a class="link" href="../htmlman2/getsockopt.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">getsockopt</span>(2)</span></a>, <a class="link" href="../htmlman2/getsockopt.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">setsockopt</span>(2)</span></a>, <a class="link" href="../htmlman2/socket.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">socket</span>(2)</span></a>, <a class="link" href="../htmlman7/capabilities.7.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">capabilities</span>(7)</span></a>, <a class="link" href="../htmlman7/ddp.7.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">ddp</span>(7)</span></a>, <a class="link" href="../htmlman7/ip.7.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">ip</span>(7)</span></a>, <a class="link" href="../htmlman7/packet.7.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">packet</span>(7)</span></a>, <a class="link" href="../htmlman7/tcp.7.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">tcp</span>(7)</span></a>, <a class="link" href="../htmlman7/udp.7.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">udp</span>(7)</span></a>, <a class="link" href="../htmlman7/unix.7.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">unix</span>(7)</span></a></p>
    </div>

    <div class="colophon">
      <a id="socket-7_sect12" name="socket-7_sect12" shape="rect"> </a>

      <h2>COLOPHON</h2>

      <p>This page is part of release 4.00 of the Linux <em class="replaceable"><code>man-pages</code></em> project. A
      description of the project, information about reporting bugs,
      and the latest version of this page, can be found at
      http://www.kernel.org/doc/man−pages/.</p>

      <div class="license">
        <table style="border-collapse: collapse;">
          <colgroup span="1">
            <col span="1" />
          </colgroup>

          <tbody>
            <tr>
              <td style="" rowspan="1" colspan="1">
                <div class="literallayout">
                  <br />
                    t<br />
                  This man page is Copyright (C) 1999 Andi Kleen &lt;ak<script type="text/javascript">document.write('@');</script><noscript>(@)</noscript>muc.de&gt;.<br />

                  and copyright (c) 1999 Matthew Wilcox.<br />

                  <br />
                  %%%LICENSE_START(VERBATIM_ONE_PARA)<br />
                  Permission is granted to distribute possibly modified copies<br />

                  of this page provided the header is included verbatim,<br />

                  and in case of nontrivial modification author and date<br />

                  of the modification is added to the header.<br />

                  %%%LICENSE_END<br />
                  <br />
                  2002-10-30, Michael Kerrisk, &lt;mtk.manpages<script type="text/javascript">document.write('@');</script><noscript>(@)</noscript>gmail.com&gt;<br />

                  Added description of SO_ACCEPTCONN<br />

                  2004-05-20, aeb, added SO_RCVTIMEO/SO_SNDTIMEO text.<br />

                  Modified, 27 May 2004, Michael Kerrisk &lt;mtk.manpages<script type="text/javascript">document.write('@');</script><noscript>(@)</noscript>gmail.com&gt;<br />

                      Added notes on capability requirements<br />

                  A few small grammar fixes<br />

                  2010-06-13 Jan Engelhardt &lt;jengelh<script type="text/javascript">document.write('@');</script><noscript>(@)</noscript>medozas.de&gt;<br />

                  Documented SO_DOMAIN and SO_PROTOCOL.<br />

                  FIXME<br />
                  The following are not yet documented:<br />

                  SO_PEERNAME (2.4?)<br />
                  get only<br />
                  Seems to do something similar to getpeername(), but then<br />

                  why is it necessary / how does it differ?<br />

                  SO_TIMESTAMPNS (2.6.22)<br />
                  Documentation/networking/timestamping.txt<br />
                  commit 92f37fd2ee805aa77925c1e64fd56088b46094fc<br />

                  Author: Eric Dumazet &lt;dada1<script type="text/javascript">document.write('@');</script><noscript>(@)</noscript>cosmosbay.com&gt;<br />

                  SO_TIMESTAMPING (2.6.30)<br />
                  Documentation/networking/timestamping.txt<br />
                  commit cb9eff097831007afb30d64373f29d99825d0068<br />

                  Author: Patrick Ohly &lt;patrick.ohly<script type="text/javascript">document.write('@');</script><noscript>(@)</noscript>intel.com&gt;<br />

                  SO_WIFI_STATUS (3.3)<br />
                  commit 6e3e939f3b1bf8534b32ad09ff199d88800835a0<br />

                  Author: Johannes Berg &lt;johannes.berg<script type="text/javascript">document.write('@');</script><noscript>(@)</noscript>intel.com&gt;<br />

                  Also: SCM_WIFI_STATUS<br />
                  SO_NOFCS (3.4)<br />
                  commit 3bdc0eba0b8b47797f4a76e377dd8360f317450f<br />

                  Author: Ben Greear &lt;greearb<script type="text/javascript">document.write('@');</script><noscript>(@)</noscript>candelatech.com&gt;<br />

                  SO_GET_FILTER (3.8)<br />
                  commit a8fc92778080c845eaadc369a0ecf5699a03bef0<br />

                  Author: Pavel Emelyanov &lt;xemul<script type="text/javascript">document.write('@');</script><noscript>(@)</noscript>parallels.com&gt;<br />

                  SO_LOCK_FILTER (3.9)<br />
                  commit d59577b6ffd313d0ab3be39cb1ab47e29bdc9182<br />

                  Author: Vincent Bernat &lt;bernat<script type="text/javascript">document.write('@');</script><noscript>(@)</noscript>luffy.cx&gt;<br />

                  SO_SELECT_ERR_QUEUE (3.10)<br />
                              commit 7d4c04fc170087119727119074e72445f2bb192b<br />

                  Author: Keller, Jacob E &lt;jacob.e.keller<script type="text/javascript">document.write('@');</script><noscript>(@)</noscript>intel.com&gt;<br />

                      SO_MAX_PACING_RATE (3.13)<br />

                              commit 62748f32d501f5d3712a7c372bbb92abc7c62bc7<br />

                      SO_BPF_EXTENSIONS (3.14)<br />

                              commit ea02f9411d9faa3553ed09ce0ec9f00ceae9885e<br />
                  
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</body>
</html>
