<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

  <title>tzset(3) — Linux manual pages</title>
  <link rel="stylesheet" type="text/css" href="../stylesheet/manpages.css" />
  
  <link rel="home" href="../index.html" title="tzset(3) — Linux manual pages" />
  <script type="text/javascript" src="../stylesheet/manpages.js" xml:space="preserve">
</script>
  <link rel="icon" href="../stylesheet/icon.gif" type="image/gif" />
</head>

<body onload="javascript:init()">
  <div class="navheader">
    <table width="100%">
      <tbody>
        <tr>
          <td style="width: 33%" rowspan="1" colspan="1"><a href="../index.html" shape="rect">Linux
          manual pages</a></td>

          <th rowspan="1" colspan="1"><a href="../index3.html" shape="rect">Section 3</a></th>

          <td style="width: 33%" rowspan="1" colspan="1"> </td>
        </tr>
      </tbody>
    </table>
    <hr />
  </div>

  <div class="refentry">
    <a id="tzset.3" name="tzset.3" shape="rect"> </a>

    <div class="titlepage"> </div>

    <div class="refnamediv">
      <h2>Name</h2>

      <p>tzset, tzname, timezone, daylight — initialize time
      conversion information</p>
    </div>

    <div class="refsynopsisdiv">
      <h2>Synopsis</h2>

      <div class="funcsynopsis">
        <pre class="funcsynopsisinfo" xml:space="preserve">
#include &lt;time.h&gt;
</pre>

        <table border="0" class="funcprototype-table" summary="Function synopsis" style="cellspacing: 0; cellpadding: 0;">
          <tr>
            <td rowspan="1" colspan="1"><code class="funcdef">void
            <strong>tzset</strong>(</code></td>

            <td rowspan="1" colspan="1"><code>void)</code>;</td>

            <td rowspan="1" colspan="1"> </td>
          </tr>
        </table>

        <div class="funcprototype-spacer">
           
        </div>
      </div>

      <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
        <table border="0" summary="Note">
          <tr>
            <td rowspan="2" align="center" valign="top" width="25" colspan="1">
            <img alt="[Note]" src="../stylesheet/note.png" /></td>

            <th align="left" rowspan="1" colspan="1">Note</th>
          </tr>

          <tr>
            <td align="left" valign="top" rowspan="1" colspan="1">
              <div class="featuretests">
                <table style="border-collapse: collapse;">
                  <colgroup span="1">
                    <col span="1" />
                  </colgroup>

                  <thead>
                    <tr>
                      <th style="" rowspan="1" colspan="1">Feature Test Macro Requirements
                      for glibc (see <a class="link" href="../htmlman7/feature_test_macros.7.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">feature_test_macros</span>(7)</span></a>):</th>
                    </tr>
                  </thead>

                  <tbody>
                    <tr>
                      <td style="" rowspan="1" colspan="1"><code class="function">tzset</code>():</td>
                    </tr>

                    <tr>
                      <td class="featuretestdef" style="" rowspan="1" colspan="1">
                      <code class="constant">_POSIX_C_SOURCE</code>
                      &gt;= 1 || <code class="constant">_XOPEN_SOURCE</code> ||
                      <code class="constant">_POSIX_SOURCE</code></td>
                    </tr>

                    <tr>
                      <td style="" rowspan="1" colspan="1"><code class="varname">tzname</code>:</td>
                    </tr>

                    <tr>
                      <td class="featuretestdef" style="" rowspan="1" colspan="1">
                      <code class="constant">_POSIX_C_SOURCE</code>
                      &gt;= 1 || <code class="constant">_XOPEN_SOURCE</code> ||
                      <code class="constant">_POSIX_SOURCE</code></td>
                    </tr>

                    <tr>
                      <td style="" rowspan="1" colspan="1"><code class="varname">timezone</code>:</td>
                    </tr>

                    <tr>
                      <td class="featuretestdef" style="" rowspan="1" colspan="1">
                      <code class="constant">_SVID_SOURCE</code> ||
                      <code class="constant">_XOPEN_SOURCE</code></td>
                    </tr>

                    <tr>
                      <td style="" rowspan="1" colspan="1"><code class="varname">daylight</code>:</td>
                    </tr>

                    <tr>
                      <td class="featuretestdef" style="" rowspan="1" colspan="1">
                      <code class="constant">_SVID_SOURCE</code> ||
                      <code class="constant">_XOPEN_SOURCE</code></td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </td>
          </tr>
        </table>
      </div>

      <div class="informalexample">
        <pre class="programlisting" xml:space="preserve">
extern char *tzname[2];
extern long timezone;
extern int daylight;
  
</pre>
      </div>
    </div>

    <div class="refsect1">
      <a id="tzset-3_sect1" name="tzset-3_sect1" shape="rect"> </a>

      <h2>DESCRIPTION</h2>

      <p>The <code class="function">tzset</code>() function
      initializes the <code class="varname">tzname</code> variable
      from the <code class="constant">TZ</code> environment
      variable. This function is automatically called by the other
      time conversion functions that depend on the timezone. In a
      System-V-like environment, it will also set the variables
      <code class="varname">timezone</code> (seconds West of UTC)
      and <code class="varname">daylight</code> (to 0 if this
      timezone does not have any daylight saving time rules, or to
      nonzero if there is a time during the year when daylight
      saving time applies).</p>

      <p>If the <code class="constant">TZ</code> variable does not
      appear in the environment, the system timezone is used. The
      system timezone is configured by copying, or linking, a file
      in the <a class="link" href="../htmlman5/tzfile.5.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">tzfile</span>(5)</span></a> format to
      <code class="filename">/etc/localtime</code>. A timezone
      database of these files may be located in the system timezone
      directory (see the <code class="constant">FILES</code>
      section below).</p>

      <p>If the <code class="constant">TZ</code> variable does
      appear in the environment, but its value is empty, or its
      value cannot be interpreted using any of the formats
      specified below, then Coordinated Universal Time (UTC) is
      used.</p>

      <p>The value of <code class="constant">TZ</code> can be one
      of two formats. The first format is a string of characters
      that directly represent the timezone to be used:</p>

      <div class="blockquote">
        <blockquote class="blockquote">
          <p><span class="emphasis"><em>std
          offset</em></span>[<code class="varname">dst</code>[<code class="varname">offset</code>][,<code class="varname">start</code>[<code class="filename">/time<code class="literal">]</code></code>,<code class="varname">end</code>[<code class="filename">/time<em class="replaceable"><code>]]]</code></em></code></p>
        </blockquote>
      </div>

      <p>There are no spaces in the specification. The <code class="varname">std</code> string specifies an abbreviation for the
      timezone and must be three or more alphabetic characters.
      When enclosed between the less-than (&lt;) and greater-than
      (&gt;) signs, the characters set is expanded to include the
      plus (+) sign, the minus (-) sign, and digits. The
      <code class="varname">offset</code> string immediately
      follows <code class="varname">std</code> and specifies the
      time value to be added to the local time to get Coordinated
      Universal Time (UTC). The <code class="varname">offset</code>
      is positive if the local timezone is west of the Prime
      Meridian and negative if it is east. The hour must be between
      0 and 24, and the minutes and seconds 00 and 59:</p>

      <div class="blockquote">
        <blockquote class="blockquote">
          <p>[<code class="literal">+</code>|<span class="emphasis"><em>-</em></span>]<code class="function">hh</code>[<em class="replaceable"><code>:mm</code></em>[<em class="replaceable"><code>:ss</code></em>]]</p>
        </blockquote>
      </div>

      <p>The <code class="varname">dst</code> string and
      <code class="varname">offset</code> specify the name and
      offset for the corresponding daylight saving timezone. If the
      offset is omitted, it defaults to one hour ahead of standard
      time.</p>

      <p>The <code class="varname">start</code> field specifies
      when daylight saving time goes into effect and the
      <code class="varname">end</code> field specifies when the
      change is made back to standard time. These fields may have
      the following formats:</p>

      <div class="variablelist">
        <dl class="variablelist">
          <dt><span class="term">J<code class="literal">n</code></span></dt>

          <dd>
            <p>This specifies the Julian day with <code class="literal">n</code> between 1 and 365. Leap days are not
            counted. In this format, February 29 can't be
            represented; February 28 is day 59, and March 1 is
            always day 60.</p>
          </dd>

          <dt><span class="term"><code class="literal">n</code></span></dt>

          <dd>
            <p>This specifies the zero-based Julian day with
            <code class="literal">n</code> between 0 and 365.
            February 29 is counted in leap years.</p>
          </dd>

          <dt><span class="term">M<code class="literal">m</code>.<code class="literal">w</code>.<code class="literal">d</code></span></dt>

          <dd>
            <p>This specifies day <code class="literal">d</code> (0
            &lt;= <code class="literal">d</code> &lt;= 6) of week
            <code class="literal">w</code> (1 &lt;= <code class="literal">w</code> &lt;= 5) of month <code class="literal">m</code> (1 &lt;= <code class="literal">m</code> &lt;= 12). Week 1 is the first week
            in which day <code class="literal">d</code> occurs and
            week 5 is the last week in which day <code class="literal">d</code> occurs. Day 0 is a Sunday.</p>
          </dd>
        </dl>
      </div>

      <p>The <code class="function">time</code> fields specify
      when, in the local time currently in effect, the change to
      the other time occurs. If omitted, the default is
      02:00:00.</p>

      <p>Here is an example for New Zealand, where the standard
      time (NZST) is 12 hours ahead of UTC, and daylight saving
      time (NZDT), 13 hours ahead of UTC, runs from the first
      Sunday in October to the third Sunday in March, and the
      changeovers happen at the default time of 02:00:00:</p>

      <div class="informalexample">
        <pre class="programlisting" xml:space="preserve">
    TZ="NZST-12:00:00NZDT-13:00:00,M10.1.0,M3.3.0"
</pre>
      </div>

      <p>The second format specifies that the timezone information
      should be read from a file:</p>

      <div class="blockquote">
        <blockquote class="blockquote">
          <p>:[filespec]</p>
        </blockquote>
      </div>

      <p>If the file specification <code class="varname">filespec</code> is omitted, or its value cannot be
      interpreted, then Coordinated Universal Time (UTC) is used.
      If <code class="varname">filespec</code> is given, it
      specifies another <a class="link" href="../htmlman5/tzfile.5.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">tzfile</span>(5)</span></a>-format file to
      read the timezone information from. If <code class="varname">filespec</code> does not begin with a '/', the file
      specification is relative to the system timezone directory.
      If the colon is omitted each of the above <code class="constant">TZ</code> formats will be tried.</p>

      <p>Here's an example, once more for New Zealand:</p>

      <div class="informalexample">
        <pre class="programlisting" xml:space="preserve">
    TZ=":Pacific/Auckland"
</pre>
      </div>
    </div>

    <div class="refsect1">
      <a id="tzset-3_sect2" name="tzset-3_sect2" shape="rect"> </a>

      <h2>ENVIRONMENT</h2>

      <div class="variablelist">
        <dl class="variablelist">
          <dt><span class="term"><code class="constant">TZ</code></span></dt>

          <dd>
            <p>If this variable is set its value takes precedence
            over the system configured timezone.</p>
          </dd>

          <dt><span class="term"><code class="constant">TZDIR</code></span></dt>

          <dd>
            <p>If this variable is set its value takes precedence
            over the system configured timezone database directory
            path.</p>
          </dd>
        </dl>
      </div>
    </div>

    <div class="refsect1">
      <a id="tzset-3_sect3" name="tzset-3_sect3" shape="rect"> </a>

      <h2>FILES</h2>

      <div class="variablelist">
        <dl class="variablelist">
          <dt><span class="term"><code class="filename">/etc/localtime</code></span></dt>

          <dd>
            <p>The system timezone file.</p>
          </dd>

          <dt><span class="term"><code class="filename">/usr/share/zoneinfo/</code></span></dt>

          <dd>
            <p>The system timezone database directory.</p>
          </dd>

          <dt><span class="term"><code class="filename">/usr/share/zoneinfo/posixrules</code></span></dt>

          <dd>
            <p>When a TZ string includes a dst timezone without
            anything following it, then this file is used for the
            start/end rules. It is in the <a class="link" href="../htmlman5/tzfile.5.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">tzfile</span>(5)</span></a> format. By
            default, the zoneinfo Makefile hard links it to the
            <code class="function">America/New_York</code>
            tzfile.</p>
          </dd>
        </dl>
      </div>

      <p>Above are the current standard file locations, but they
      are configurable when glibc is compiled.</p>
    </div>

    <div class="refsect1">
      <a id="tzset-3_sect4" name="tzset-3_sect4" shape="rect"> </a>

      <h2>ATTRIBUTES</h2>

      <p>For an explanation of the terms used in this section, see
      <a class="link" href="../htmlman7/attributes.7.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">attributes</span>(7)</span></a>.</p>

      <div class="informaltable">
        <table style="border-collapse: collapse;">
          <colgroup span="1">
            <col class="c0" span="1" />
            <col class="c1" span="1" />
            <col class="c2" span="1" />
          </colgroup>

          <tbody>
            <tr>
              <td style="" align="left" rowspan="1" colspan="1">Interface</td>

              <td style="" align="left" rowspan="1" colspan="1">Attribute</td>

              <td style="" align="left" rowspan="1" colspan="1">Value</td>
            </tr>

            <tr>
              <td style="" align="left" rowspan="1" colspan="1"><code class="literal">tzset</code>()</td>

              <td style="" align="left" rowspan="1" colspan="1">Thread safety</td>

              <td style="" align="left" rowspan="1" colspan="1">MT-Safe env locale</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <div class="refsect1">
      <a id="tzset-3_sect5" name="tzset-3_sect5" shape="rect"> </a>

      <h2>CONFORMING TO</h2>

      <p>SVr4, POSIX.1-2001, 4.3BSD.</p>
    </div>

    <div class="refsect1">
      <a id="tzset-3_sect6" name="tzset-3_sect6" shape="rect"> </a>

      <h2>NOTES</h2>

      <p>Note that the variable <code class="varname">daylight</code> does not indicate that daylight
      saving time applies right now. It used to give the number of
      some algorithm (see the variable <code class="varname">tz_dsttime</code> in <a class="link" href="../htmlman2/gettimeofday.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">gettimeofday</span>(2)</span></a>). It has
      been obsolete for many years but is required by SUSv2.</p>

      <p>4.3BSD had a function <code class="function">char
      *timezone</code>(<em class="parameter"><code>zone</code></em>, <em class="parameter"><code>dst</code></em>) that returned the name of
      the timezone corresponding to its first argument (minutes
      West of UTC). If the second argument was 0, the standard name
      was used, otherwise the daylight saving time version.</p>
    </div>

    <div class="refsect1">
      <a id="tzset-3_sect7" name="tzset-3_sect7" shape="rect"> </a>

      <h2>SEE ALSO</h2>

      <p><a class="link" href="../htmlman1/date.1.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">date</span>(1)</span></a>, <a class="link" href="../htmlman2/gettimeofday.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">gettimeofday</span>(2)</span></a>, <a class="link" href="../htmlman2/time.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">time</span>(2)</span></a>, <a class="link" href="../htmlman3/ctime.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">ctime</span>(3)</span></a>, <a class="link" href="../htmlman3/getenv.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">getenv</span>(3)</span></a>, <a class="link" href="../htmlman5/tzfile.5.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">tzfile</span>(5)</span></a></p>
    </div>

    <div class="colophon">
      <a id="tzset-3_sect8" name="tzset-3_sect8" shape="rect"> </a>

      <h2>COLOPHON</h2>

      <p>This page is part of release 4.00 of the Linux <em class="replaceable"><code>man-pages</code></em> project. A
      description of the project, information about reporting bugs,
      and the latest version of this page, can be found at
      http://www.kernel.org/doc/man−pages/.</p>

      <div class="license">
        <table style="border-collapse: collapse;">
          <colgroup span="1">
            <col span="1" />
          </colgroup>

          <tbody>
            <tr>
              <td style="" rowspan="1" colspan="1">
                <div class="literallayout">
                  <br />
                    Copyright 1993 David Metcalfe (david<script type="text/javascript">document.write('@');</script><noscript>(@)</noscript>prism.demon.co.uk)<br />

                  <br />
                  %%%LICENSE_START(VERBATIM)<br />
                  Permission is granted to make and distribute verbatim copies of this<br />

                  manual provided the copyright notice and this permission notice are<br />

                  preserved on all copies.<br />
                  <br />
                  Permission is granted to copy and distribute modified versions of this<br />

                  manual under the conditions for verbatim copying, provided that the<br />

                  entire resulting derived work is distributed under the terms of a<br />

                  permission notice identical to this one.<br />

                  <br />
                  Since the Linux kernel and libraries are constantly changing, this<br />

                  manual page may be incorrect or out-of-date.  The author(s) assume no<br />

                  responsibility for errors or omissions, or for damages resulting from<br />

                  the use of the information contained herein.  The author(s) may not<br />

                  have taken the same level of care in the production of this manual,<br />

                  which is licensed free of charge, as they might when working<br />

                  professionally.<br />
                  <br />
                  Formatted or processed versions of this manual, if unaccompanied by<br />

                  the source, must acknowledge the copyright and authors of this work.<br />

                  %%%LICENSE_END<br />
                  <br />
                  References consulted:<br />
                      Linux libc source code<br />

                      Lewine's _POSIX Programmer's Guide_ (O'Reilly &amp; Associates, 1991)<br />

                      386BSD man pages<br />

                  Modified Sun Jul 25 11:01:58 1993 by Rik Faith (faith<script type="text/javascript">document.write('@');</script><noscript>(@)</noscript>cs.unc.edu)<br />

                  Modified 2001-11-13, aeb<br />
                  Modified 2004-12-01 mtk and Martin Schulze &lt;joey<script type="text/javascript">document.write('@');</script><noscript>(@)</noscript>infodrom.org&gt;<br />
                  
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</body>
</html>
