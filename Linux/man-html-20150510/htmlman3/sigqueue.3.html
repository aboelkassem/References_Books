<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

  <title>sigqueue(3) — Linux manual pages</title>
  <link rel="stylesheet" type="text/css" href="../stylesheet/manpages.css" />
  
  <link rel="home" href="../index.html" title="sigqueue(3) — Linux manual pages" />
  <script type="text/javascript" src="../stylesheet/manpages.js" xml:space="preserve">
</script>
  <link rel="icon" href="../stylesheet/icon.gif" type="image/gif" />
</head>

<body onload="javascript:init()">
  <div class="navheader">
    <table width="100%">
      <tbody>
        <tr>
          <td style="width: 33%" rowspan="1" colspan="1"><a href="../index.html" shape="rect">Linux
          manual pages</a></td>

          <th rowspan="1" colspan="1"><a href="../index3.html" shape="rect">Section 3</a></th>

          <td style="width: 33%" rowspan="1" colspan="1"> </td>
        </tr>
      </tbody>
    </table>
    <hr />
  </div>

  <div class="refentry">
    <a id="sigqueue.3" name="sigqueue.3" shape="rect"> </a>

    <div class="titlepage"> </div>

    <div class="refnamediv">
      <h2>Name</h2>

      <p>sigqueue — queue a signal and data to a process</p>
    </div>

    <div class="refsynopsisdiv">
      <h2>Synopsis</h2>

      <div class="funcsynopsis">
        <pre class="funcsynopsisinfo" xml:space="preserve">
#include &lt;signal.h&gt;
</pre>

        <table border="0" class="funcprototype-table" summary="Function synopsis" style="cellspacing: 0; cellpadding: 0;">
          <tr>
            <td rowspan="1" colspan="1"><code class="funcdef">int
            <strong>sigqueue</strong>(</code></td>

            <td rowspan="1" colspan="1">pid_t <var class="pdparam">pid</var>,</td>
          </tr>

          <tr>
            <td rowspan="1" colspan="1"> </td>

            <td rowspan="1" colspan="1">int <var class="pdparam">sig</var>,</td>
          </tr>

          <tr>
            <td rowspan="1" colspan="1"> </td>

            <td rowspan="1" colspan="1">const union sigval <var class="pdparam">value</var><code>)</code>;</td>
          </tr>
        </table>

        <div class="funcprototype-spacer">
           
        </div>
      </div>

      <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
        <table border="0" summary="Note">
          <tr>
            <td rowspan="2" align="center" valign="top" width="25" colspan="1">
            <img alt="[Note]" src="../stylesheet/note.png" /></td>

            <th align="left" rowspan="1" colspan="1">Note</th>
          </tr>

          <tr>
            <td align="left" valign="top" rowspan="1" colspan="1">
              <div class="featuretests">
                <table style="border-collapse: collapse;">
                  <colgroup span="1">
                    <col span="1" />
                  </colgroup>

                  <thead>
                    <tr>
                      <th style="" rowspan="1" colspan="1">Feature Test Macro Requirements
                      for glibc (see <a class="link" href="../htmlman7/feature_test_macros.7.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">feature_test_macros</span>(7)</span></a>):</th>
                    </tr>
                  </thead>

                  <tbody>
                    <tr>
                      <td style="" rowspan="1" colspan="1"><code class="function">sigqueue</code>():</td>
                    </tr>

                    <tr>
                      <td class="featuretestdef" style="" rowspan="1" colspan="1">
                      <code class="constant">_POSIX_C_SOURCE</code>
                      &gt;= 199309L</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </td>
          </tr>
        </table>
      </div>
    </div>

    <div class="refsect1">
      <a id="sigqueue-3_sect1" name="sigqueue-3_sect1" shape="rect"> </a>

      <h2>DESCRIPTION</h2>

      <p><code class="function">sigqueue</code>() sends the signal
      specified in <em class="parameter"><code>sig</code></em> to
      the process whose PID is given in <em class="parameter"><code>pid</code></em>. The permissions required
      to send a signal are the same as for <a class="link" href="../htmlman2/kill.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">kill</span>(2)</span></a>. As with <a class="link" href="../htmlman2/kill.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">kill</span>(2)</span></a>, the null signal
      (0) can be used to check if a process with a given PID
      exists.</p>

      <p>The <em class="parameter"><code>value</code></em> argument
      is used to specify an accompanying item of data (either an
      integer or a pointer value) to be sent with the signal, and
      has the following type:</p>

      <div class="blockquote">
        <blockquote class="blockquote">
          <div class="structdef">
            <table style="border-collapse: collapse;">
              <colgroup span="1">
                <col class="c1" span="1" />
                <col class="c2" span="1" />
                <col class="c3" span="1" />
                <col class="c4" span="1" />
                <col class="c5" span="1" />
              </colgroup>

              <tbody>
                <tr>
                  <td class="structdefhdr" style="" align="left" rowspan="1" colspan="1">
                  union</td>

                  <td class="structdefhdr" style="" colspan="4" align="left" rowspan="1"><span class="structname">sigval</span> {</td>
                </tr>

                <tr>
                  <td style="" rowspan="1" colspan="1"> </td>

                  <td style="" align="left" rowspan="1" colspan="1"><span class="type">int</span></td>

                  <td class="norightpad" style="" align="right" rowspan="1" colspan="1">
                   </td>

                  <td style="" align="left" rowspan="1" colspan="1"><em class="structfield"><code>sival_int</code></em>;</td>

                  <td style="" align="left" rowspan="1" colspan="1"> </td>
                </tr>

                <tr>
                  <td style="" rowspan="1" colspan="1"> </td>

                  <td style="" align="left" rowspan="1" colspan="1"><span class="type">void</span></td>

                  <td class="norightpad" style="" align="right" rowspan="1" colspan="1">
                  *</td>

                  <td style="" align="left" rowspan="1" colspan="1"><em class="structfield"><code>sival_ptr</code></em>;</td>

                  <td style="" align="left" rowspan="1" colspan="1"> </td>
                </tr>

                <tr>
                  <td class="structdefftr" style="" colspan="5" align="left" rowspan="1">};</td>
                </tr>
              </tbody>
            </table>
          </div>
        </blockquote>
      </div>

      <p>If the receiving process has installed a handler for this
      signal using the <code class="constant">SA_SIGINFO</code>
      flag to <a class="link" href="../htmlman2/sigaction.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">sigaction</span>(2)</span></a>, then it can
      obtain this data via the <code class="function">si_value</code> field of the <span class="type">siginfo_t</span> structure passed as the second
      argument to the handler. Furthermore, the <code class="function">si_code</code> field of that structure will be set
      to <code class="constant">SI_QUEUE</code>.</p>
    </div>

    <div class="refsect1">
      <a id="sigqueue-3_sect2" name="sigqueue-3_sect2" shape="rect"> </a>

      <h2>RETURN VALUE</h2>

      <p>On success, <code class="function">sigqueue</code>()
      returns 0, indicating that the signal was successfully queued
      to the receiving process. Otherwise, −1 is returned and
      <code class="varname">errno</code> is set to indicate the
      error.</p>
    </div>

    <div class="refsect1">
      <a id="sigqueue-3_sect3" name="sigqueue-3_sect3" shape="rect"> </a>

      <h2>ERRORS</h2>

      <div class="variablelist">
        <dl class="variablelist">
          <dt><span class="term"><span class="errorname">EAGAIN</span></span></dt>

          <dd>
            <p>The limit of signals which may be queued has been
            reached. (See <a class="link" href="../htmlman7/signal.7.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">signal</span>(7)</span></a> for further
            information.)</p>
          </dd>

          <dt><span class="term"><span class="errorname">EINVAL</span></span></dt>

          <dd>
            <p><em class="parameter"><code>sig</code></em> was
            invalid.</p>
          </dd>

          <dt><span class="term"><span class="errorname">EPERM</span></span></dt>

          <dd>
            <p>The process does not have permission to send the
            signal to the receiving process. For the required
            permissions, see <a class="link" href="../htmlman2/kill.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">kill</span>(2)</span></a>.</p>
          </dd>

          <dt><span class="term"><span class="errorname">ESRCH</span></span></dt>

          <dd>
            <p>No process has a PID matching <em class="parameter"><code>pid</code></em>.</p>
          </dd>
        </dl>
      </div>
    </div>

    <div class="refsect1">
      <a id="sigqueue-3_sect4" name="sigqueue-3_sect4" shape="rect"> </a>

      <h2>VERSIONS</h2>

      <p><code class="function">sigqueue</code>() and the
      underlying <code class="function">rt_sigqueueinfo</code>()
      system call first appeared in Linux 2.2.</p>
    </div>

    <div class="refsect1">
      <a id="sigqueue-3_sect5" name="sigqueue-3_sect5" shape="rect"> </a>

      <h2>ATTRIBUTES</h2>

      <p>For an explanation of the terms used in this section, see
      <a class="link" href="../htmlman7/attributes.7.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">attributes</span>(7)</span></a>.</p>

      <div class="informaltable">
        <table style="border-collapse: collapse;">
          <colgroup span="1">
            <col class="c0" span="1" />
            <col class="c1" span="1" />
            <col class="c2" span="1" />
          </colgroup>

          <tbody>
            <tr>
              <td style="" align="left" rowspan="1" colspan="1">Interface</td>

              <td style="" align="left" rowspan="1" colspan="1">Attribute</td>

              <td style="" align="left" rowspan="1" colspan="1">Value</td>
            </tr>

            <tr>
              <td style="" align="left" rowspan="1" colspan="1"><code class="literal">sigqueue</code>()</td>

              <td style="" align="left" rowspan="1" colspan="1">Thread safety</td>

              <td style="" align="left" rowspan="1" colspan="1">MT-Safe</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <div class="refsect1">
      <a id="sigqueue-3_sect6" name="sigqueue-3_sect6" shape="rect"> </a>

      <h2>CONFORMING TO</h2>

      <p>POSIX.1-2001.</p>
    </div>

    <div class="refsect1">
      <a id="sigqueue-3_sect7" name="sigqueue-3_sect7" shape="rect"> </a>

      <h2>NOTES</h2>

      <p>If this function results in the sending of a signal to the
      process that invoked it, and that signal was not blocked by
      the calling thread, and no other threads were willing to
      handle this signal (either by having it unblocked, or by
      waiting for it using <a class="link" href="../htmlman3/sigwait.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">sigwait</span>(3)</span></a>), then at least
      some signal must be delivered to this thread before this
      function returns.</p>

      <div class="refsect2">
        <a id="sigqueue-3_sect8" name="sigqueue-3_sect8" shape="rect"> </a>

        <h3>C library/kernel ABI differences</h3>

        <p>On Linux, <code class="function">sigqueue</code>() is
        implemented using the <a class="link" href="../htmlman2/rt_sigqueueinfo.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">rt_sigqueueinfo</span>(2)</span></a> system
        call. The system call differs in its third argument, which
        is the <span class="type">siginfo_t</span> structure that
        will be supplied to the receiving process's signal handler
        or returned by the receiving process's <a class="link" href="../htmlman2/sigwaitinfo.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">sigtimedwait</span>(2)</span></a> call.
        Inside the glibc <code class="function">sigqueue</code>()
        wrapper, this argument, <code class="function">uinfo</code>, is initialized as follows:</p>

        <div class="blockquote">
          <blockquote class="blockquote">
            <div class="informalexample">
              <pre class="programlisting" xml:space="preserve">
uinfo.si_signo = sig;      /* Argument supplied to sigqueue() */
uinfo.si_code = SI_QUEUE;
uinfo.si_pid = getpid();   /* Process ID of sender */
uinfo.si_uid = getuid();   /* Real UID of sender */
uinfo.si_value = val;      /* Argument supplied to sigqueue() */
</pre>
            </div>
          </blockquote>
        </div>
      </div>
    </div>

    <div class="refsect1">
      <a id="sigqueue-3_sect9" name="sigqueue-3_sect9" shape="rect"> </a>

      <h2>SEE ALSO</h2>

      <p><a class="link" href="../htmlman2/kill.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">kill</span>(2)</span></a>, <a class="link" href="../htmlman2/rt_sigqueueinfo.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">rt_sigqueueinfo</span>(2)</span></a>,
      <a class="link" href="../htmlman2/sigaction.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">sigaction</span>(2)</span></a>, <a class="link" href="../htmlman2/signal.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">signal</span>(2)</span></a>, <a class="link" href="../htmlman3/pthread_sigqueue.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">pthread_sigqueue</span>(3)</span></a>,
      <a class="link" href="../htmlman3/sigwait.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">sigwait</span>(3)</span></a>, <a class="link" href="../htmlman7/signal.7.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">signal</span>(7)</span></a></p>
    </div>

    <div class="colophon">
      <a id="sigqueue-3_sect10" name="sigqueue-3_sect10" shape="rect"> </a>

      <h2>COLOPHON</h2>

      <p>This page is part of release 4.00 of the Linux <em class="replaceable"><code>man-pages</code></em> project. A
      description of the project, information about reporting bugs,
      and the latest version of this page, can be found at
      http://www.kernel.org/doc/man−pages/.</p>

      <div class="license">
        <table style="border-collapse: collapse;">
          <colgroup span="1">
            <col span="1" />
          </colgroup>

          <tbody>
            <tr>
              <td style="" rowspan="1" colspan="1">
                <div class="literallayout">
                  <br />
                    Copyright (c) 2002 Michael Kerrisk &lt;mtk.manpages<script type="text/javascript">document.write('@');</script><noscript>(@)</noscript>gmail.com&gt;<br />

                  <br />
                  %%%LICENSE_START(VERBATIM)<br />
                  Permission is granted to make and distribute verbatim copies of this<br />

                  manual provided the copyright notice and this permission notice are<br />

                  preserved on all copies.<br />
                  <br />
                  Permission is granted to copy and distribute modified versions of this<br />

                  manual under the conditions for verbatim copying, provided that the<br />

                  entire resulting derived work is distributed under the terms of a<br />

                  permission notice identical to this one.<br />

                  <br />
                  Since the Linux kernel and libraries are constantly changing, this<br />

                  manual page may be incorrect or out-of-date.  The author(s) assume no<br />

                  responsibility for errors or omissions, or for damages resulting from<br />

                  the use of the information contained herein.  The author(s) may not<br />

                  have taken the same level of care in the production of this manual,<br />

                  which is licensed free of charge, as they might when working<br />

                  professionally.<br />
                  <br />
                  Formatted or processed versions of this manual, if unaccompanied by<br />

                  the source, must acknowledge the copyright and authors of this work.<br />

                  %%%LICENSE_END<br />
                  <br />
                  added note on self-signaling, aeb, 2002-06-07<br />

                  added note on CAP_KILL, mtk, 2004-06-16<br />
                  
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</body>
</html>
