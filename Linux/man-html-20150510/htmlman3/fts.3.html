<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

  <title>fts(3) — Linux manual pages</title>
  <link rel="stylesheet" type="text/css" href="../stylesheet/manpages.css" />
  
  <link rel="home" href="../index.html" title="fts(3) — Linux manual pages" />
  <script type="text/javascript" src="../stylesheet/manpages.js" xml:space="preserve">
</script>
  <link rel="icon" href="../stylesheet/icon.gif" type="image/gif" />
</head>

<body onload="javascript:init()">
  <div class="navheader">
    <table width="100%">
      <tbody>
        <tr>
          <td style="width: 33%" rowspan="1" colspan="1"><a href="../index.html" shape="rect">Linux
          manual pages</a></td>

          <th rowspan="1" colspan="1"><a href="../index3.html" shape="rect">Section 3</a></th>

          <td style="width: 33%" rowspan="1" colspan="1"> </td>
        </tr>
      </tbody>
    </table>
    <hr />
  </div>

  <div class="refentry">
    <a id="fts.3" name="fts.3" shape="rect"> </a>

    <div class="titlepage"> </div>

    <div class="refnamediv">
      <h2>Name</h2>

      <p>fts, fts_open, fts_read, fts_children, fts_set, fts_close
      — traverse a file hierarchy</p>
    </div>

    <div class="refsynopsisdiv">
      <h2>Synopsis</h2>

      <div class="informalexample">
        <pre class="programlisting" xml:space="preserve">
#include &lt;sys/types.h&gt;
#include &lt;sys/stat.h&gt;
#include &lt;fts.h&gt;
</pre>
      </div>

      <div class="funcsynopsis">
        <table border="0" class="funcprototype-table" summary="Function synopsis" style="cellspacing: 0; cellpadding: 0;">
          <tr>
            <td rowspan="1" colspan="1"><code class="funcdef">FTS
            *<strong>fts_open</strong>(</code></td>

            <td rowspan="1" colspan="1">char * const *<var class="pdparam">path_argv</var>,</td>
          </tr>

          <tr>
            <td rowspan="1" colspan="1"> </td>

            <td rowspan="1" colspan="1">int <var class="pdparam">options</var>,</td>
          </tr>

          <tr>
            <td rowspan="1" colspan="1"> </td>

            <td rowspan="1" colspan="1">int <var class="pdparam">(*compar)</var><code>(</code>const FTSENT **,
            const FTSENT **<code>)</code><code>)</code>;</td>
          </tr>
        </table>

        <div class="funcprototype-spacer">
           
        </div>
      </div>

      <div class="funcsynopsis">
        <table border="0" class="funcprototype-table" summary="Function synopsis" style="cellspacing: 0; cellpadding: 0;">
          <tr>
            <td rowspan="1" colspan="1"><code class="funcdef">FTSENT
            *<strong>fts_read</strong>(</code></td>

            <td rowspan="1" colspan="1">FTS *<var class="pdparam">ftsp</var><code>)</code>;</td>
          </tr>
        </table>

        <div class="funcprototype-spacer">
           
        </div>
      </div>

      <div class="funcsynopsis">
        <table border="0" class="funcprototype-table" summary="Function synopsis" style="cellspacing: 0; cellpadding: 0;">
          <tr>
            <td rowspan="1" colspan="1"><code class="funcdef">FTSENT
            *<strong>fts_children</strong>(</code></td>

            <td rowspan="1" colspan="1">FTS *<var class="pdparam">ftsp</var>,</td>
          </tr>

          <tr>
            <td rowspan="1" colspan="1"> </td>

            <td rowspan="1" colspan="1">int <var class="pdparam">options</var><code>)</code>;</td>
          </tr>
        </table>

        <div class="funcprototype-spacer">
           
        </div>
      </div>

      <div class="funcsynopsis">
        <table border="0" class="funcprototype-table" summary="Function synopsis" style="cellspacing: 0; cellpadding: 0;">
          <tr>
            <td rowspan="1" colspan="1"><code class="funcdef">int
            <strong>fts_set</strong>(</code></td>

            <td rowspan="1" colspan="1">FTS *<var class="pdparam">ftsp</var>,</td>
          </tr>

          <tr>
            <td rowspan="1" colspan="1"> </td>

            <td rowspan="1" colspan="1">FTSENT *<var class="pdparam">f</var>,</td>
          </tr>

          <tr>
            <td rowspan="1" colspan="1"> </td>

            <td rowspan="1" colspan="1">int <var class="pdparam">options</var><code>)</code>;</td>
          </tr>
        </table>

        <div class="funcprototype-spacer">
           
        </div>
      </div>

      <div class="funcsynopsis">
        <table border="0" class="funcprototype-table" summary="Function synopsis" style="cellspacing: 0; cellpadding: 0;">
          <tr>
            <td rowspan="1" colspan="1"><code class="funcdef">int
            <strong>fts_close</strong>(</code></td>

            <td rowspan="1" colspan="1">FTS *<var class="pdparam">ftsp</var><code>)</code>;</td>
          </tr>
        </table>

        <div class="funcprototype-spacer">
           
        </div>
      </div>
    </div>

    <div class="refsect1">
      <a id="fts-3_sect1" name="fts-3_sect1" shape="rect"> </a>

      <h2>DESCRIPTION</h2>

      <p>The fts functions are provided for traversing file
      hierarchies. A simple overview is that the <code class="function">fts_open</code>() function returns a "handle" on a
      file hierarchy, which is then supplied to the other fts
      functions. The function <code class="function">fts_read</code>() returns a pointer to a structure
      describing one of the files in the file hierarchy. The
      function <code class="function">fts_children</code>() returns
      a pointer to a linked list of structures, each of which
      describes one of the files contained in a directory in the
      hierarchy. In general, directories are visited two
      distinguishable times; in preorder (before any of their
      descendants are visited) and in postorder (after all of their
      descendants have been visited). Files are visited once. It is
      possible to walk the hierarchy "logically" (visiting the
      files that symbolic links point to) or physically (visiting
      the symbolic links themselves), order the walk of the
      hierarchy or prune and/or revisit portions of the
      hierarchy.</p>

      <p>Two structures are defined (and typedef'd) in the include
      file <code class="literal">&lt;</code><code class="filename">fts.h</code><code class="literal">&gt;</code> The
      first is <code class="constant">FTS</code>, the structure
      that represents the file hierarchy itself. The second is
      <code class="constant">FTSENT</code>, the structure that
      represents a file in the file hierarchy. Normally, an
      <code class="constant">FTSENT</code> structure is returned
      for every file in the file hierarchy. In this manual page,
      "file" and "FTSENT structure" are generally interchangeable.
      The <code class="constant">FTSENT</code> structure contains
      at least the following fields, which are described in greater
      detail below:</p>

      <div class="blockquote">
        <blockquote class="blockquote">
          <div class="structdef">
            <table style="border-collapse: collapse;">
              <colgroup span="1">
                <col class="c1" span="1" />
                <col class="c2" span="1" />
                <col class="c3" span="1" />
                <col class="c4" span="1" />
                <col class="c5" span="1" />
              </colgroup>

              <tbody>
                <tr>
                  <td class="structdefhdr" style="" align="left" rowspan="1" colspan="1">
                  typedef</td>

                  <td class="structdefhdr" style="" colspan="4" align="left" rowspan="1">struct <span class="structname">_ftsent</span> {</td>
                </tr>

                <tr>
                  <td style="" rowspan="1" colspan="1"> </td>

                  <td style="" align="left" rowspan="1" colspan="1"><span class="type">unsigned short</span></td>

                  <td class="norightpad" style="" align="right" rowspan="1" colspan="1">
                   </td>

                  <td style="" align="left" rowspan="1" colspan="1"><em class="structfield"><code>fts_info</code></em>;</td>

                  <td style="" align="left" rowspan="1" colspan="1">
                    <div class="literallayout">
                      
                      /* flags for FTSENT structure */
                    </div>
                  </td>
                </tr>

                <tr>
                  <td style="" rowspan="1" colspan="1"> </td>

                  <td style="" align="left" rowspan="1" colspan="1"><span class="type">char</span></td>

                  <td class="norightpad" style="" align="right" rowspan="1" colspan="1">
                  *</td>

                  <td style="" align="left" rowspan="1" colspan="1"><em class="structfield"><code>fts_accpath</code></em>;</td>

                  <td style="" align="left" rowspan="1" colspan="1">
                    <div class="literallayout">
                      /* access path */
                    </div>
                  </td>
                </tr>

                <tr>
                  <td style="" rowspan="1" colspan="1"> </td>

                  <td style="" align="left" rowspan="1" colspan="1"><span class="type">char</span></td>

                  <td class="norightpad" style="" align="right" rowspan="1" colspan="1">
                  *</td>

                  <td style="" align="left" rowspan="1" colspan="1"><em class="structfield"><code>fts_path</code></em>;</td>

                  <td style="" align="left" rowspan="1" colspan="1">
                    <div class="literallayout">
                      /* root path */
                    </div>
                  </td>
                </tr>

                <tr>
                  <td style="" rowspan="1" colspan="1"> </td>

                  <td style="" align="left" rowspan="1" colspan="1"><span class="type">short</span></td>

                  <td class="norightpad" style="" align="right" rowspan="1" colspan="1">
                   </td>

                  <td style="" align="left" rowspan="1" colspan="1"><em class="structfield"><code>fts_pathlen</code></em>;</td>

                  <td style="" align="left" rowspan="1" colspan="1">
                    <div class="literallayout">
                      /* strlen(fts_path) */
                    </div>
                  </td>
                </tr>

                <tr>
                  <td style="" rowspan="1" colspan="1"> </td>

                  <td style="" align="left" rowspan="1" colspan="1"><span class="type">char</span></td>

                  <td class="norightpad" style="" align="right" rowspan="1" colspan="1">
                  *</td>

                  <td style="" align="left" rowspan="1" colspan="1"><em class="structfield"><code>fts_name</code></em>;</td>

                  <td style="" align="left" rowspan="1" colspan="1">
                    <div class="literallayout">
                      /* filename */
                    </div>
                  </td>
                </tr>

                <tr>
                  <td style="" rowspan="1" colspan="1"> </td>

                  <td style="" align="left" rowspan="1" colspan="1"><span class="type">short</span></td>

                  <td class="norightpad" style="" align="right" rowspan="1" colspan="1">
                   </td>

                  <td style="" align="left" rowspan="1" colspan="1"><em class="structfield"><code>fts_namelen</code></em>;</td>

                  <td style="" align="left" rowspan="1" colspan="1">
                    <div class="literallayout">
                      /* strlen(fts_name) */
                    </div>
                  </td>
                </tr>

                <tr>
                  <td style="" rowspan="1" colspan="1"> </td>

                  <td style="" align="left" rowspan="1" colspan="1"><span class="type">short</span></td>

                  <td class="norightpad" style="" align="right" rowspan="1" colspan="1">
                   </td>

                  <td style="" align="left" rowspan="1" colspan="1"><em class="structfield"><code>fts_level</code></em>;</td>

                  <td style="" align="left" rowspan="1" colspan="1">
                    <div class="literallayout">
                      
                      /* depth (\-1 to N) */
                    </div>
                  </td>
                </tr>

                <tr>
                  <td style="" rowspan="1" colspan="1"> </td>

                  <td style="" align="left" rowspan="1" colspan="1"><span class="type">int</span></td>

                  <td class="norightpad" style="" align="right" rowspan="1" colspan="1">
                   </td>

                  <td style="" align="left" rowspan="1" colspan="1"><em class="structfield"><code>fts_errno</code></em>;</td>

                  <td style="" align="left" rowspan="1" colspan="1">
                    <div class="literallayout">
                      /* file errno */
                    </div>
                  </td>
                </tr>

                <tr>
                  <td style="" rowspan="1" colspan="1"> </td>

                  <td style="" align="left" rowspan="1" colspan="1"><span class="type">long</span></td>

                  <td class="norightpad" style="" align="right" rowspan="1" colspan="1">
                   </td>

                  <td style="" align="left" rowspan="1" colspan="1"><em class="structfield"><code>fts_number</code></em>;</td>

                  <td style="" align="left" rowspan="1" colspan="1">
                    <div class="literallayout">
                      
                      /* local numeric value */
                    </div>
                  </td>
                </tr>

                <tr>
                  <td style="" rowspan="1" colspan="1"> </td>

                  <td style="" align="left" rowspan="1" colspan="1"><span class="type">void</span></td>

                  <td class="norightpad" style="" align="right" rowspan="1" colspan="1">
                  *</td>

                  <td style="" align="left" rowspan="1" colspan="1"><em class="structfield"><code>fts_pointer</code></em>;</td>

                  <td style="" align="left" rowspan="1" colspan="1">
                    <div class="literallayout">
                      
                      /* local address value */
                    </div>
                  </td>
                </tr>

                <tr>
                  <td style="" rowspan="1" colspan="1"> </td>

                  <td style="" align="left" rowspan="1" colspan="1"><span class="type">struct ftsent</span></td>

                  <td class="norightpad" style="" align="right" rowspan="1" colspan="1">
                  *</td>

                  <td style="" align="left" rowspan="1" colspan="1"><em class="structfield"><code>fts_parent</code></em>;</td>

                  <td style="" align="left" rowspan="1" colspan="1">
                    <div class="literallayout">
                      /* parent directory */
                    </div>
                  </td>
                </tr>

                <tr>
                  <td style="" rowspan="1" colspan="1"> </td>

                  <td style="" align="left" rowspan="1" colspan="1"><span class="type">struct ftsent</span></td>

                  <td class="norightpad" style="" align="right" rowspan="1" colspan="1">
                  *</td>

                  <td style="" align="left" rowspan="1" colspan="1"><em class="structfield"><code>fts_link</code></em>;</td>

                  <td style="" align="left" rowspan="1" colspan="1">
                    <div class="literallayout">
                      
                      /* next file structure */
                    </div>
                  </td>
                </tr>

                <tr>
                  <td style="" rowspan="1" colspan="1"> </td>

                  <td style="" align="left" rowspan="1" colspan="1"><span class="type">struct ftsent</span></td>

                  <td class="norightpad" style="" align="right" rowspan="1" colspan="1">
                  *</td>

                  <td style="" align="left" rowspan="1" colspan="1"><em class="structfield"><code>fts_cycle</code></em>;</td>

                  <td style="" align="left" rowspan="1" colspan="1">
                    <div class="literallayout">
                      /* cycle structure */
                    </div>
                  </td>
                </tr>

                <tr>
                  <td style="" rowspan="1" colspan="1"> </td>

                  <td style="" align="left" rowspan="1" colspan="1"><span class="type">struct stat</span></td>

                  <td class="norightpad" style="" align="right" rowspan="1" colspan="1">
                  *</td>

                  <td style="" align="left" rowspan="1" colspan="1"><em class="structfield"><code>fts_statp</code></em>;</td>

                  <td style="" align="left" rowspan="1" colspan="1">
                    <div class="literallayout">
                      
                      /* stat(2) information */
                    </div>
                  </td>
                </tr>

                <tr>
                  <td class="structdefftr" style="" colspan="5" align="left" rowspan="1">} FTSENT;</td>
                </tr>
              </tbody>
            </table>
          </div>
        </blockquote>
      </div>

      <p>These fields are defined as follows:</p>

      <div class="variablelist">
        <dl class="variablelist">
          <dt><span class="term"><em class="parameter"><code>fts_info</code></em></span></dt>

          <dd>
            <p>One of the following flags describing the returned
            <code class="constant">FTSENT</code> structure and the
            file it represents. With the exception of directories
            without errors (<code class="constant">FTS_D</code>),
            all of these entries are terminal, that is, they will
            not be revisited, nor will any of their descendants be
            visited.</p>

            <div class="blockquote">
              <blockquote class="blockquote">
                <div class="variablelist">
                  <dl class="variablelist">
                    <dt><span class="term"><code class="constant">FTS_D</code></span></dt>

                    <dd>
                      <p>A directory being visited in preorder.</p>
                    </dd>

                    <dt><span class="term"><code class="constant">FTS_DC</code></span></dt>

                    <dd>
                      <p>A directory that causes a cycle in the
                      tree. (The <em class="parameter"><code>fts_cycle</code></em> field
                      of the <code class="constant">FTSENT</code>
                      structure will be filled in as well.)</p>
                    </dd>

                    <dt><span class="term"><code class="constant">FTS_DEFAULT</code></span></dt>

                    <dd>
                      <p>Any <code class="constant">FTSENT</code>
                      structure that represents a file type not
                      explicitly described by one of the other
                      <em class="parameter"><code>fts_info</code></em>
                      values.</p>
                    </dd>

                    <dt><span class="term"><code class="constant">FTS_DNR</code></span></dt>

                    <dd>
                      <p>A directory which cannot be read. This is
                      an error return, and the <em class="parameter"><code>fts_errno</code></em> field
                      will be set to indicate what caused the
                      error.</p>
                    </dd>

                    <dt><span class="term"><code class="constant">FTS_DOT</code></span></dt>

                    <dd>
                      <p>A file named "." or ".." which was not
                      specified as a filename to <code class="function">fts_open</code>() (see
                      <code class="constant">FTS_SEEDOT</code>).</p>
                    </dd>

                    <dt><span class="term"><code class="constant">FTS_DP</code></span></dt>

                    <dd>
                      <p>A directory being visited in postorder.
                      The contents of the <code class="constant">FTSENT</code> structure will be
                      unchanged from when it was returned in
                      preorder, that is, with the <em class="parameter"><code>fts_info</code></em> field
                      set to <code class="constant">FTS_D</code>.</p>
                    </dd>

                    <dt><span class="term"><code class="constant">FTS_ERR</code></span></dt>

                    <dd>
                      <p>This is an error return, and the
                      <em class="parameter"><code>fts_errno</code></em>
                      field will be set to indicate what caused the
                      error.</p>
                    </dd>

                    <dt><span class="term"><code class="constant">FTS_F</code></span></dt>

                    <dd>
                      <p>A regular file.</p>
                    </dd>

                    <dt><span class="term"><code class="constant">FTS_NS</code></span></dt>

                    <dd>
                      <p>A file for which no <a class="link" href="../htmlman2/stat.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">stat</span>(2)</span></a>
                      information was available. The contents of
                      the <em class="parameter"><code>fts_statp</code></em> field
                      are undefined. This is an error return, and
                      the <em class="parameter"><code>fts_errno</code></em> field
                      will be set to indicate what caused the
                      error.</p>
                    </dd>

                    <dt><span class="term"><code class="constant">FTS_NSOK</code></span></dt>

                    <dd>
                      <p>A file for which no <a class="link" href="../htmlman2/stat.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">stat</span>(2)</span></a>
                      information was requested. The contents of
                      the <em class="parameter"><code>fts_statp</code></em> field
                      are undefined.</p>
                    </dd>

                    <dt><span class="term"><code class="constant">FTS_SL</code></span></dt>

                    <dd>
                      <p>A symbolic link.</p>
                    </dd>

                    <dt><span class="term"><code class="constant">FTS_SLNONE</code></span></dt>

                    <dd>
                      <p>A symbolic link with a nonexistent target.
                      The contents of the <em class="parameter"><code>fts_statp</code></em> field
                      reference the file characteristic information
                      for the symbolic link itself.</p>
                    </dd>
                  </dl>
                </div>
              </blockquote>
            </div>
          </dd>

          <dt><span class="term"><em class="parameter"><code>fts_accpath</code></em></span></dt>

          <dd>
            <p>A path for accessing the file from the current
            directory.</p>
          </dd>

          <dt><span class="term"><em class="parameter"><code>fts_path</code></em></span></dt>

          <dd>
            <p>The path for the file relative to the root of the
            traversal. This path contains the path specified to
            <code class="function">fts_open</code>() as a
            prefix.</p>
          </dd>

          <dt><span class="term"><em class="parameter"><code>fts_pathlen</code></em></span></dt>

          <dd>
            <p>The length of the string referenced by <em class="parameter"><code>fts_path</code></em>.</p>
          </dd>

          <dt><span class="term"><em class="parameter"><code>fts_name</code></em></span></dt>

          <dd>
            <p>The name of the file.</p>
          </dd>

          <dt><span class="term"><em class="parameter"><code>fts_namelen</code></em></span></dt>

          <dd>
            <p>The length of the string referenced by <em class="parameter"><code>fts_name</code></em>.</p>
          </dd>

          <dt><span class="term"><em class="parameter"><code>fts_level</code></em></span></dt>

          <dd>
            <p>The depth of the traversal, numbered from −1
            to N, where this file was found. The <code class="constant">FTSENT</code> structure representing the
            parent of the starting point (or root) of the traversal
            is numbered −1, and the <code class="constant">FTSENT</code> structure for the root itself
            is numbered 0.</p>
          </dd>

          <dt><span class="term"><em class="parameter"><code>fts_errno</code></em></span></dt>

          <dd>
            <p>Upon return of a <code class="constant">FTSENT</code> structure from the
            <code class="function">fts_children</code>() or
            <code class="function">fts_read</code>() functions,
            with its <em class="parameter"><code>fts_info</code></em> field set to
            <code class="constant">FTS_DNR</code>, <code class="constant">FTS_ERR</code> or <code class="constant">FTS_NS</code>, the <em class="parameter"><code>fts_errno</code></em> field contains
            the value of the external variable <code class="varname">errno</code> specifying the cause of the
            error. Otherwise, the contents of the <em class="parameter"><code>fts_errno</code></em> field are
            undefined.</p>
          </dd>

          <dt><span class="term"><em class="parameter"><code>fts_number</code></em></span></dt>

          <dd>
            <p>This field is provided for the use of the
            application program and is not modified by the fts
            functions. It is initialized to 0.</p>
          </dd>

          <dt><span class="term"><em class="parameter"><code>fts_pointer</code></em></span></dt>

          <dd>
            <p>This field is provided for the use of the
            application program and is not modified by the fts
            functions. It is initialized to NULL.</p>
          </dd>

          <dt><span class="term"><em class="parameter"><code>fts_parent</code></em></span></dt>

          <dd>
            <p>A pointer to the <code class="constant">FTSENT</code> structure referencing the file
            in the hierarchy immediately above the current file,
            that is, the directory of which this file is a member.
            A parent structure for the initial entry point is
            provided as well, however, only the <em class="parameter"><code>fts_level</code></em>, <em class="parameter"><code>fts_number</code></em> and <em class="parameter"><code>fts_pointer</code></em> fields are
            guaranteed to be initialized.</p>
          </dd>

          <dt><span class="term"><em class="parameter"><code>fts_link</code></em></span></dt>

          <dd>
            <p>Upon return from the <code class="function">fts_children</code>() function, the
            <em class="parameter"><code>fts_link</code></em> field
            points to the next structure in the NULL-terminated
            linked list of directory members. Otherwise, the
            contents of the <em class="parameter"><code>fts_link</code></em> field are
            undefined.</p>
          </dd>

          <dt><span class="term"><em class="parameter"><code>fts_cycle</code></em></span></dt>

          <dd>
            <p>If a directory causes a cycle in the hierarchy (see
            <code class="constant">FTS_DC</code>), either because
            of a hard link between two directories, or a symbolic
            link pointing to a directory, the <em class="parameter"><code>fts_cycle</code></em> field of the
            structure will point to the <code class="constant">FTSENT</code> structure in the hierarchy
            that references the same file as the current
            <code class="constant">FTSENT</code> structure.
            Otherwise, the contents of the <em class="parameter"><code>fts_cycle</code></em> field are
            undefined.</p>
          </dd>

          <dt><span class="term"><em class="parameter"><code>fts_statp</code></em></span></dt>

          <dd>
            <p>A pointer to <a class="link" href="../htmlman2/stat.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">stat</span>(2)</span></a> information
            for the file.</p>
          </dd>
        </dl>
      </div>

      <p>A single buffer is used for all of the paths of all of the
      files in the file hierarchy. Therefore, the <em class="parameter"><code>fts_path</code></em> and <em class="parameter"><code>fts_accpath</code></em> fields are
      guaranteed to be null-terminated <span class="emphasis"><em>only</em></span> for the file most recently
      returned by <code class="function">fts_read</code>(). To use
      these fields to reference any files represented by other
      <code class="constant">FTSENT</code> structures will require
      that the path buffer be modified using the information
      contained in that <code class="constant">FTSENT</code>
      structure's <em class="parameter"><code>fts_pathlen</code></em> field. Any such
      modifications should be undone before further calls to
      <code class="function">fts_read</code>() are attempted. The
      <em class="parameter"><code>fts_name</code></em> field is
      always null-terminated.</p>

      <div class="refsect2">
        <a id="fts-3_sect2" name="fts-3_sect2" shape="rect"> </a>

        <h3>fts_open()</h3>

        <p>The <code class="function">fts_open</code>() function
        takes a pointer to an array of character pointers naming
        one or more paths which make up a logical file hierarchy to
        be traversed. The array must be terminated by a null
        pointer.</p>

        <p>There are a number of options, at least one of which
        (either <code class="constant">FTS_LOGICAL</code> or
        <code class="constant">FTS_PHYSICAL</code>) must be
        specified. The options are selected by ORing the following
        values:</p>

        <div class="variablelist">
          <dl class="variablelist">
            <dt><span class="term"><code class="constant">FTS_COMFOLLOW</code></span></dt>

            <dd>
              <p>This option causes any symbolic link specified as
              a root path to be followed immediately whether or not
              <code class="constant">FTS_LOGICAL</code> is also
              specified.</p>
            </dd>

            <dt><span class="term"><code class="constant">FTS_LOGICAL</code></span></dt>

            <dd>
              <p>This option causes the fts routines to return
              <code class="constant">FTSENT</code> structures for
              the targets of symbolic links instead of the symbolic
              links themselves. If this option is set, the only
              symbolic links for which <code class="constant">FTSENT</code> structures are returned to
              the application are those referencing nonexistent
              files. Either <code class="constant">FTS_LOGICAL</code> or <code class="constant">FTS_PHYSICAL</code> <span class="emphasis"><em>must</em></span> be provided to the
              <code class="function">fts_open</code>()
              function.</p>
            </dd>

            <dt><span class="term"><code class="constant">FTS_NOCHDIR</code></span></dt>

            <dd>
              <p>As a performance optimization, the fts functions
              change directories as they walk the file hierarchy.
              This has the side-effect that an application cannot
              rely on being in any particular directory during the
              traversal. The <code class="constant">FTS_NOCHDIR</code> option turns off this
              optimization, and the fts functions will not change
              the current directory. Note that applications should
              not themselves change their current directory and try
              to access files unless <code class="constant">FTS_NOCHDIR</code> is specified and
              absolute pathnames were provided as arguments to
              <code class="function">fts_open</code>().</p>
            </dd>

            <dt><span class="term"><code class="constant">FTS_NOSTAT</code></span></dt>

            <dd>
              <p>By default, returned <code class="constant">FTSENT</code> structures reference file
              characteristic information (the <code class="function">statp</code> field) for each file visited.
              This option relaxes that requirement as a performance
              optimization, allowing the fts functions to set the
              <em class="parameter"><code>fts_info</code></em>
              field to <code class="constant">FTS_NSOK</code> and
              leave the contents of the <code class="function">statp</code> field undefined.</p>
            </dd>

            <dt><span class="term"><code class="constant">FTS_PHYSICAL</code></span></dt>

            <dd>
              <p>This option causes the fts routines to return
              <code class="constant">FTSENT</code> structures for
              symbolic links themselves instead of the target files
              they point to. If this option is set, <code class="constant">FTSENT</code> structures for all symbolic
              links in the hierarchy are returned to the
              application. Either <code class="constant">FTS_LOGICAL</code> or <code class="constant">FTS_PHYSICAL</code> <span class="emphasis"><em>must</em></span> be provided to the
              <code class="function">fts_open</code>()
              function.</p>
            </dd>

            <dt><span class="term"><code class="constant">FTS_SEEDOT</code></span></dt>

            <dd>
              <p>By default, unless they are specified as path
              arguments to <code class="function">fts_open</code>(), any files named "." or
              ".." encountered in the file hierarchy are ignored.
              This option causes the fts routines to return
              <code class="constant">FTSENT</code> structures for
              them.</p>
            </dd>

            <dt><span class="term"><code class="constant">FTS_XDEV</code></span></dt>

            <dd>
              <p>This option prevents fts from descending into
              directories that have a different device number than
              the file from which the descent began.</p>
            </dd>
          </dl>
        </div>

        <p>The argument <code class="function">compar</code>()
        specifies a user-defined function which may be used to
        order the traversal of the hierarchy. It takes two pointers
        to pointers to <code class="constant">FTSENT</code>
        structures as arguments and should return a negative value,
        zero, or a positive value to indicate if the file
        referenced by its first argument comes before, in any order
        with respect to, or after, the file referenced by its
        second argument. The <em class="parameter"><code>fts_accpath</code></em>, <em class="parameter"><code>fts_path</code></em> and <em class="parameter"><code>fts_pathlen</code></em> fields of the
        <code class="constant">FTSENT</code> structures may
        <code class="function">never</code> be used in this
        comparison. If the <em class="parameter"><code>fts_info</code></em> field is set to
        <code class="constant">FTS_NS</code> or <code class="constant">FTS_NSOK</code>, the <em class="parameter"><code>fts_statp</code></em> field may not
        either. If the <code class="function">compar</code>()
        argument is NULL, the directory traversal order is in the
        order listed in <em class="parameter"><code>path_argv</code></em> for the root paths,
        and in the order listed in the directory for everything
        else.</p>
      </div>

      <div class="refsect2">
        <a id="fts-3_sect3" name="fts-3_sect3" shape="rect"> </a>

        <h3>fts_read()</h3>

        <p>The <code class="function">fts_read</code>() function
        returns a pointer to an <code class="constant">FTSENT</code> structure describing a file in the
        hierarchy. Directories (that are readable and do not cause
        cycles) are visited at least twice, once in preorder and
        once in postorder. All other files are visited at least
        once. (Hard links between directories that do not cause
        cycles or symbolic links to symbolic links may cause files
        to be visited more than once, or directories more than
        twice.)</p>

        <p>If all the members of the hierarchy have been returned,
        <code class="function">fts_read</code>() returns NULL and
        sets the external variable <code class="varname">errno</code> to 0. If an error unrelated to a
        file in the hierarchy occurs, <code class="function">fts_read</code>() returns NULL and sets
        <code class="varname">errno</code> appropriately. If an
        error related to a returned file occurs, a pointer to an
        <code class="constant">FTSENT</code> structure is returned,
        and <code class="varname">errno</code> may or may not have
        been set (see <em class="parameter"><code>fts_info</code></em>).</p>

        <p>The <code class="constant">FTSENT</code> structures
        returned by <code class="function">fts_read</code>() may be
        overwritten after a call to <code class="function">fts_close</code>() on the same file hierarchy
        stream, or, after a call to <code class="function">fts_read</code>() on the same file hierarchy
        stream unless they represent a file of type directory, in
        which case they will not be overwritten until after a call
        to <code class="function">fts_read</code>() after the
        <code class="constant">FTSENT</code> structure has been
        returned by the function <code class="function">fts_read</code>() in postorder.</p>
      </div>

      <div class="refsect2">
        <a id="fts-3_sect4" name="fts-3_sect4" shape="rect"> </a>

        <h3>fts_children()</h3>

        <p>The <code class="function">fts_children</code>()
        function returns a pointer to an <code class="constant">FTSENT</code> structure describing the first
        entry in a NULL-terminated linked list of the files in the
        directory represented by the <code class="constant">FTSENT</code> structure most recently returned
        by <code class="function">fts_read</code>(). The list is
        linked through the <em class="parameter"><code>fts_link</code></em> field of the
        <code class="constant">FTSENT</code> structure, and is
        ordered by the user-specified comparison function, if any.
        Repeated calls to <code class="function">fts_children</code>() will re-create this linked
        list.</p>

        <p>As a special case, if <code class="function">fts_read</code>() has not yet been called for a
        hierarchy, <code class="function">fts_children</code>()
        will return a pointer to the files in the logical directory
        specified to <code class="function">fts_open</code>(), that
        is, the arguments specified to <code class="function">fts_open</code>(). Otherwise, if the
        <code class="constant">FTSENT</code> structure most
        recently returned by <code class="function">fts_read</code>() is not a directory being
        visited in preorder, or the directory does not contain any
        files, <code class="function">fts_children</code>() returns
        NULL and sets <code class="varname">errno</code> to zero.
        If an error occurs, <code class="function">fts_children</code>() returns NULL and sets
        <code class="varname">errno</code> appropriately.</p>

        <p>The <code class="constant">FTSENT</code> structures
        returned by <code class="function">fts_children</code>()
        may be overwritten after a call to <code class="function">fts_children</code>(), <code class="function">fts_close</code>() or <code class="function">fts_read</code>() on the same file hierarchy
        stream.</p>

        <p><code class="function">Option</code> may be set to the
        following value:</p>

        <div class="variablelist">
          <dl class="variablelist">
            <dt><span class="term"><code class="constant">FTS_NAMEONLY</code></span></dt>

            <dd>
              <p>Only the names of the files are needed. The
              contents of all the fields in the returned linked
              list of structures are undefined with the exception
              of the <em class="parameter"><code>fts_name</code></em> and <em class="parameter"><code>fts_namelen</code></em> fields.</p>
            </dd>
          </dl>
        </div>
      </div>

      <div class="refsect2">
        <a id="fts-3_sect5" name="fts-3_sect5" shape="rect"> </a>

        <h3>fts_set()</h3>

        <p>The function <code class="function">fts_set</code>()
        allows the user application to determine further processing
        for the file <em class="parameter"><code>f</code></em> of
        the stream <em class="parameter"><code>ftsp</code></em>.
        The <code class="function">fts_set</code>() function
        returns 0 on success, and −1 if an error occurs.
        <code class="function">Option</code> must be set to one of
        the following values:</p>

        <div class="variablelist">
          <dl class="variablelist">
            <dt><span class="term"><code class="constant">FTS_AGAIN</code></span></dt>

            <dd>
              <p>Revisit the file; any file type may be revisited.
              The next call to <code class="function">fts_read</code>() will return the
              referenced file. The <code class="function">fts_stat</code> and <em class="parameter"><code>fts_info</code></em> fields of the
              structure will be reinitialized at that time, but no
              other fields will have been changed. This option is
              meaningful only for the most recently returned file
              from <code class="function">fts_read</code>(). Normal
              use is for postorder directory visits, where it
              causes the directory to be revisited (in both
              preorder and postorder) as well as all of its
              descendants.</p>
            </dd>

            <dt><span class="term"><code class="constant">FTS_FOLLOW</code></span></dt>

            <dd>
              <p>The referenced file must be a symbolic link. If
              the referenced file is the one most recently returned
              by <code class="function">fts_read</code>(), the next
              call to <code class="function">fts_read</code>()
              returns the file with the <em class="parameter"><code>fts_info</code></em> and <em class="parameter"><code>fts_statp</code></em> fields
              reinitialized to reflect the target of the symbolic
              link instead of the symbolic link itself. If the file
              is one of those most recently returned by
              <code class="function">fts_children</code>(), the
              <em class="parameter"><code>fts_info</code></em> and
              <em class="parameter"><code>fts_statp</code></em>
              fields of the structure, when returned by
              <code class="function">fts_read</code>(), will
              reflect the target of the symbolic link instead of
              the symbolic link itself. In either case, if the
              target of the symbolic link does not exist, the
              fields of the returned structure will be unchanged
              and the <em class="parameter"><code>fts_info</code></em> field will be
              set to <code class="constant">FTS_SLNONE</code>.</p>

              <p>If the target of the link is a directory, the
              preorder return, followed by the return of all of its
              descendants, followed by a postorder return, is
              done.</p>
            </dd>

            <dt><span class="term"><code class="constant">FTS_SKIP</code></span></dt>

            <dd>
              <p>No descendants of this file are visited. The file
              may be one of those most recently returned by either
              <code class="function">fts_children</code>() or
              <code class="function">fts_read</code>().</p>
            </dd>
          </dl>
        </div>
      </div>

      <div class="refsect2">
        <a id="fts-3_sect6" name="fts-3_sect6" shape="rect"> </a>

        <h3>fts_close()</h3>

        <p>The <code class="function">fts_close</code>() function
        closes a file hierarchy stream <em class="parameter"><code>ftsp</code></em> and restores the current
        directory to the directory from which <code class="function">fts_open</code>() was called to open <em class="parameter"><code>ftsp</code></em>. The <code class="function">fts_close</code>() function returns 0 on
        success, and −1 if an error occurs.</p>
      </div>
    </div>

    <div class="refsect1">
      <a id="fts-3_sect7" name="fts-3_sect7" shape="rect"> </a>

      <h2>ERRORS</h2>

      <p>The function <code class="function">fts_open</code>() may
      fail and set <code class="varname">errno</code> for any of
      the errors specified for <a class="link" href="../htmlman2/open.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">open</span>(2)</span></a> and <a class="link" href="../htmlman3/malloc.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">malloc</span>(3)</span></a>.</p>

      <p>The function <code class="function">fts_close</code>() may
      fail and set <code class="varname">errno</code> for any of
      the errors specified for <a class="link" href="../htmlman2/chdir.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">chdir</span>(2)</span></a> and <a class="link" href="../htmlman2/close.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">close</span>(2)</span></a>.</p>

      <p>The functions <code class="function">fts_read</code>() and
      <code class="function">fts_children</code>() may fail and set
      <code class="varname">errno</code> for any of the errors
      specified for <a class="link" href="../htmlman2/chdir.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">chdir</span>(2)</span></a>, <a class="link" href="../htmlman3/malloc.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">malloc</span>(3)</span></a>, <a class="link" href="../htmlman3/opendir.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">opendir</span>(3)</span></a>, <a class="link" href="../htmlman3/readdir.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">readdir</span>(3)</span></a>, and <a class="link" href="../htmlman2/stat.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">stat</span>(2)</span></a>.</p>

      <p>In addition, <code class="function">fts_children</code>(),
      <code class="function">fts_open</code>(), and <code class="function">fts_set</code>() may fail and set <code class="varname">errno</code> as follows:</p>

      <div class="variablelist">
        <dl class="variablelist">
          <dt><span class="term"><span class="errorname">EINVAL</span></span></dt>

          <dd>
            <p>The options were invalid.</p>
          </dd>
        </dl>
      </div>
    </div>

    <div class="refsect1">
      <a id="fts-3_sect8" name="fts-3_sect8" shape="rect"> </a>

      <h2>VERSIONS</h2>

      <p>These functions are available in Linux since glibc2.</p>
    </div>

    <div class="refsect1">
      <a id="fts-3_sect9" name="fts-3_sect9" shape="rect"> </a>

      <h2>CONFORMING TO</h2>

      <p>4.4BSD.</p>
    </div>

    <div class="refsect1">
      <a id="fts-3_sect10" name="fts-3_sect10" shape="rect"> </a>

      <h2>BUGS</h2>

      <p>All of the APIs described in this man page are not safe
      when compiling a program using the LFS APIs (e.g., when
      compiling with <code class="option">−D_FILE_OFFSET_BITS=64</code>).</p>
    </div>

    <div class="refsect1">
      <a id="fts-3_sect11" name="fts-3_sect11" shape="rect"> </a>

      <h2>SEE ALSO</h2>

      <p><span class="citerefentry"><span class="refentrytitle">find</span>(1)</span>, <a class="link" href="../htmlman2/chdir.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">chdir</span>(2)</span></a>, <a class="link" href="../htmlman2/stat.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">stat</span>(2)</span></a>, <a class="link" href="../htmlman3/ftw.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">ftw</span>(3)</span></a>, <a class="link" href="../htmlman3/qsort.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">qsort</span>(3)</span></a></p>
    </div>

    <div class="colophon">
      <a id="fts-3_sect12" name="fts-3_sect12" shape="rect"> </a>

      <h2>COLOPHON</h2>

      <p>This page is part of release 3.72 of the Linux <em class="replaceable"><code>man-pages</code></em> project. A
      description of the project, information about reporting bugs,
      and the latest version of this page, can be found at
      http://www.kernel.org/doc/man−pages/.</p>

      <div class="license">
        <table style="border-collapse: collapse;">
          <colgroup span="1">
            <col span="1" />
          </colgroup>

          <tbody>
            <tr>
              <td style="" rowspan="1" colspan="1">
                <div class="literallayout">
                  <br />
                   
                  $NetBSD: fts.3,v 1.13.2.1 1997/11/14 02:09:32 mrg Exp $<br />

                  <br />
                  Copyright (c) 1989, 1991, 1993, 1994<br />

                  The Regents of the University of California.  All rights reserved.<br />

                  <br />
                  %%%LICENSE_START(BSD_4_CLAUSE_UCB)<br />
                  Redistribution and use in source and binary forms, with or without<br />

                  modification, are permitted provided that the following conditions<br />

                  are met:<br />
                  1. Redistributions of source code must retain the above copyright<br />

                     notice, this list of conditions and the following disclaimer.<br />

                  2. Redistributions in binary form must reproduce the above copyright<br />

                     notice, this list of conditions and the following disclaimer in the<br />

                     documentation and/or other materials provided with the distribution.<br />

                  3. All advertising materials mentioning features or use of this software<br />

                     must display the following acknowledgement:<br />

                  This product includes software developed by the University of<br />

                  California, Berkeley and its contributors.<br />

                  4. Neither the name of the University nor the names of its contributors<br />

                     may be used to endorse or promote products derived from this software<br />

                     without specific prior written permission.<br />

                  <br />
                  THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND<br />

                  ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE<br />

                  IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE<br />

                  ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE<br />

                  FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL<br />

                  DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS<br />

                  OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)<br />

                  HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT<br />

                  LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY<br />

                  OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF<br />

                  SUCH DAMAGE.<br />
                  %%%LICENSE_END<br />
                  <br />
                      <script type="text/javascript">document.write('@');</script><noscript>(@)</noscript>(#)fts.3
                  8.5 (Berkeley) 4/16/94<br />
                  <br />
                  2007-12-08, mtk, Converted from mdoc to man macros<br />
                  
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</body>
</html>
