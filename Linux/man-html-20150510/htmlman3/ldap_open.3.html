<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

  <title>ldap_open(3) — Linux manual pages</title>
  <link rel="stylesheet" type="text/css" href="../stylesheet/manpages.css" />
  
  <link rel="home" href="../index.html" title="ldap_open(3) — Linux manual pages" />
  <script type="text/javascript" src="../stylesheet/manpages.js" xml:space="preserve">
</script>
  <link rel="icon" href="../stylesheet/icon.gif" type="image/gif" />
</head>

<body onload="javascript:init()">
  <div class="navheader">
    <table width="100%">
      <tbody>
        <tr>
          <td style="width: 33%" rowspan="1" colspan="1"><a href="../index.html" shape="rect">Linux
          manual pages</a></td>

          <th rowspan="1" colspan="1"><a href="../index3.html" shape="rect">Section 3</a></th>

          <td style="width: 33%" rowspan="1" colspan="1"> </td>
        </tr>
      </tbody>
    </table>
    <hr />
  </div>

  <div class="refentry">
    <a id="ldap-open.3" name="ldap-open.3" shape="rect"> </a>

    <div class="titlepage"> </div>

    <div class="refnamediv">
      <h2>Name</h2>

      <p>ldap_init, ldap_initialize, ldap_open — Initialize
      the LDAP library and open a connection to an LDAP server</p>
    </div>

    <div class="refsynopsisdiv">
      <h2>Synopsis</h2>

      <div class="funcsynopsis">
        <pre class="funcsynopsisinfo" xml:space="preserve">
#include &lt;ldap.h&gt;
</pre>

        <table border="0" class="funcprototype-table" summary="Function synopsis" style="cellspacing: 0; cellpadding: 0;">
          <tr>
            <td rowspan="1" colspan="1"><code class="funcdef">LDAP
            *<strong>ldap_open</strong>(</code></td>

            <td rowspan="1" colspan="1">char *<var class="pdparam">host</var>,</td>
          </tr>

          <tr>
            <td rowspan="1" colspan="1"> </td>

            <td rowspan="1" colspan="1">int <var class="pdparam">port</var><code>)</code>;</td>
          </tr>
        </table>

        <div class="funcprototype-spacer">
           
        </div>
      </div>

      <div class="funcsynopsis">
        <table border="0" class="funcprototype-table" summary="Function synopsis" style="cellspacing: 0; cellpadding: 0;">
          <tr>
            <td rowspan="1" colspan="1"><code class="funcdef">LDAP
            *<strong>ldap_init</strong>(</code></td>

            <td rowspan="1" colspan="1">char *<var class="pdparam">host</var>,</td>
          </tr>

          <tr>
            <td rowspan="1" colspan="1"> </td>

            <td rowspan="1" colspan="1">int <var class="pdparam">port</var><code>)</code>;</td>
          </tr>
        </table>

        <div class="funcprototype-spacer">
           
        </div>
      </div>

      <div class="funcsynopsis">
        <table border="0" class="funcprototype-table" summary="Function synopsis" style="cellspacing: 0; cellpadding: 0;">
          <tr>
            <td rowspan="1" colspan="1"><code class="funcdef">int
            <strong>ldap_initialize</strong>(</code></td>

            <td rowspan="1" colspan="1">LDAP **<var class="pdparam">ldp</var>,</td>
          </tr>

          <tr>
            <td rowspan="1" colspan="1"> </td>

            <td rowspan="1" colspan="1">char *<var class="pdparam">uri</var><code>)</code>;</td>
          </tr>
        </table>

        <div class="funcprototype-spacer">
           
        </div>
      </div>

      <div class="funcsynopsis">
        <table border="0" class="funcprototype-table" summary="Function synopsis" style="cellspacing: 0; cellpadding: 0;">
          <tr>
            <td rowspan="1" colspan="1"><code class="funcdef">int
            <strong>ldap_set_urllist_proc</strong>(</code></td>

            <td rowspan="1" colspan="1">LDAP *<var class="pdparam">ld</var>,</td>
          </tr>

          <tr>
            <td rowspan="1" colspan="1"> </td>

            <td rowspan="1" colspan="1">LDAP_URLLIST_PROC *<var class="pdparam">proc</var>,</td>
          </tr>

          <tr>
            <td rowspan="1" colspan="1"> </td>

            <td rowspan="1" colspan="1">void *<var class="pdparam">params</var><code>)</code>;</td>
          </tr>
        </table>

        <div class="funcprototype-spacer">
           
        </div>
      </div>

      <div class="funcsynopsis">
        <table border="0" class="funcprototype-table" summary="Function synopsis" style="cellspacing: 0; cellpadding: 0;">
          <tr>
            <td rowspan="1" colspan="1"><code class="funcdef">int
            <strong>(LDAP_URLLIST_PROC)</strong>(</code></td>

            <td rowspan="1" colspan="1"><var class="pdparam">ld</var>,</td>
          </tr>

          <tr>
            <td rowspan="1" colspan="1"> </td>

            <td rowspan="1" colspan="1"><var class="pdparam">urllist</var>,</td>
          </tr>

          <tr>
            <td rowspan="1" colspan="1"> </td>

            <td rowspan="1" colspan="1"><var class="pdparam">url</var>,</td>
          </tr>

          <tr>
            <td rowspan="1" colspan="1"> </td>

            <td rowspan="1" colspan="1"><var class="pdparam">params</var><code>)</code>;</td>
          </tr>
        </table>

        <div class="funcprototype-spacer">
           
        </div>
      </div>

      <div class="informalexample">
        <pre class="programlisting" xml:space="preserve">
LDAP *ld;
LDAPURLDesc **urllist;
LDAPURLDesc **url;
void *params;

#include &lt;ldap_pvt.h&gt;
</pre>
      </div>

      <div class="funcsynopsis">
        <table border="0" class="funcprototype-table" summary="Function synopsis" style="cellspacing: 0; cellpadding: 0;">
          <tr>
            <td rowspan="1" colspan="1"><code class="funcdef">int
            <strong>ldap_init_fd</strong>(</code></td>

            <td rowspan="1" colspan="1">ber_socket_t <var class="pdparam">fd</var>,</td>
          </tr>

          <tr>
            <td rowspan="1" colspan="1"> </td>

            <td rowspan="1" colspan="1">int <var class="pdparam">proto</var>,</td>
          </tr>

          <tr>
            <td rowspan="1" colspan="1"> </td>

            <td rowspan="1" colspan="1">char *<var class="pdparam">uri</var>,</td>
          </tr>

          <tr>
            <td rowspan="1" colspan="1"> </td>

            <td rowspan="1" colspan="1">LDAP **<var class="pdparam">ldp</var><code>)</code>;</td>
          </tr>
        </table>

        <div class="funcprototype-spacer">
           
        </div>
      </div>
    </div>

    <div class="refsect1">
      <a id="ldap-open-3_sect1" name="ldap-open-3_sect1" shape="rect"> </a>

      <h2>LIBRARY</h2>

      <p>OpenLDAP LDAP (libldap, −lldap)</p>
    </div>

    <div class="refsect1">
      <a id="ldap-open-3_sect2" name="ldap-open-3_sect2" shape="rect"> </a>

      <h2>DESCRIPTION</h2>

      <p><code class="function">ldap_open</code>() opens a
      connection to an LDAP server and allocates an LDAP structure
      which is used to identify the connection and to maintain
      per-connection information. <code class="function">ldap_init</code>() allocates an LDAP structure but
      does not open an initial connection. <code class="function">ldap_initialize</code>() allocates an LDAP
      structure but does not open an initial connection.
      <code class="function">ldap_init_fd</code>() allocates an
      LDAP structure using an existing connection on the provided
      socket. One of these routines must be called before any
      operations are attempted.</p>

      <p><code class="function">ldap_open</code>() takes <em class="parameter"><code>host</code></em>, the hostname on which the
      LDAP server is running, and <em class="parameter"><code>port</code></em>, the port number to which
      to connect. If the default IANA-assigned port of 389 is
      desired, LDAP_PORT should be specified for <em class="parameter"><code>port</code></em>. The <em class="parameter"><code>host</code></em> parameter may contain a
      blank-separated list of hosts to try to connect to, and each
      host may optionally by of the form <em class="replaceable"><code>host:port</code></em>. If present, the
      <em class="replaceable"><code>:port</code></em> overrides the
      <em class="parameter"><code>port</code></em> parameter to
      <code class="function">ldap_open</code><code class="literal">(</code><code class="literal">)</code>. Upon
      successfully making a connection to an LDAP server,
      <code class="function">ldap_open</code>() returns a pointer
      to an opaque LDAP structure, which should be passed to
      subsequent calls to <code class="function">ldap_bind</code><code class="literal">(</code><code class="literal">)</code>,
      <code class="function">ldap_search</code><code class="literal">(</code><code class="literal">)</code>, etc.
      Certain fields in the LDAP structure can be set to indicate
      size limit, time limit, and how aliases are handled during
      operations; read and write access to those fields must occur
      by calling <a class="link" href="../htmlman3/ldap_get_option.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">ldap_get_option</span>(3)</span></a> and
      <a class="link" href="../htmlman3/ldap_get_option.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">ldap_set_option</span>(3)</span></a>
      respectively, whenever possible.</p>

      <p><code class="function">ldap_init</code>() acts just like
      <code class="function">ldap_open</code><code class="literal">(</code><code class="literal">)</code>, but does
      not open a connection to the LDAP server. The actual
      connection open will occur when the first operation is
      attempted.</p>

      <p><code class="function">ldap_initialize</code>() acts like
      <code class="function">ldap_init</code><code class="literal">(</code><code class="literal">)</code>, but it
      returns an integer indicating either success or the failure
      reason, and it allows to specify details for the connection
      in the schema portion of the URI. The <em class="parameter"><code>uri</code></em> parameter may be a comma-
      or whitespace-separated list of URIs containing only the
      <em class="parameter"><code>schema</code></em>, the
      <em class="parameter"><code>host</code></em>, and the
      <em class="parameter"><code>port</code></em> fields. Apart
      from <code class="function">ldap</code>, other (non-standard)
      recognized values of the <em class="parameter"><code>schema</code></em> field are <code class="function">ldaps</code> (LDAP over TLS), <code class="function">ldapi</code> (LDAP over IPC), and <code class="function">cldap</code> (connectionless LDAP). If other
      fields are present, the behavior is undefined.</p>

      <p>At this time, <code class="function">ldap_open</code>()
      and <code class="function">ldap_init</code>() are deprecated
      in favor of <code class="function">ldap_initialize</code><code class="literal">(</code><code class="literal">)</code>, essentially
      because the latter allows to specify a schema in the URI and
      it explicitly returns an error code.</p>

      <p><code class="function">ldap_init_fd</code>() allows an
      LDAP structure to be initialized using an already-opened
      connection. The <em class="parameter"><code>proto</code></em>
      parameter should be one of LDAP_PROTO_TCP, LDAP_PROTO_UDP, or
      LDAP_PROTO_IPC for a connection using TCP, UDP, or IPC,
      respectively. The value LDAP_PROTO_EXT may also be specified
      if user-supplied sockbuf handlers are going to be used. Note
      that support for UDP is not implemented unless libldap was
      built with LDAP_CONNECTIONLESS defined. The <em class="parameter"><code>uri</code></em> parameter may optionally be
      provided for informational purposes.</p>

      <p><code class="function">ldap_set_urllist_proc</code>()
      allows to set a function <em class="parameter"><code>proc</code></em> of type <code class="constant">LDAP_URLLIST_PROC</code> that is called when a
      successful connection can be established. This function
      receives the list of URIs parsed from the <em class="parameter"><code>uri</code></em> string originally passed to
      <code class="function">ldap_initialize</code><code class="literal">(</code><code class="literal">)</code>, and the one
      that successfully connected. The function may manipulate the
      URI list; the typical use consists in moving the successful
      URI to the head of the list, so that subsequent attempts to
      connect to one of the URIs using the same LDAP handle will
      try it first. If <em class="parameter"><code>ld</code></em>
      is null, <em class="parameter"><code>proc</code></em> is set
      as a global parameter that is inherited by all handlers
      within the process that are created after the call to
      <code class="function">ldap_set_urllist_proc</code><code class="literal">(</code><code class="literal">)</code>. By default,
      no <code class="constant">LDAP_URLLIST_PROC</code> is set. In
      a multithreaded environment, <code class="function">ldap_set_urllist_proc</code>() must be called
      before any concurrent operation using the LDAP handle is
      started.</p>

      <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
        <table border="0" summary="Note">
          <tr>
            <td rowspan="2" align="center" valign="top" width="25" colspan="1">
            <img alt="[Note]" src="../stylesheet/note.png" /></td>

            <th align="left" rowspan="1" colspan="1">Note</th>
          </tr>

          <tr>
            <td align="left" valign="top" rowspan="1" colspan="1">
              <p>The first call into the LDAP library also
              initializes the global options for the library. As
              such the first call should be single-threaded or
              otherwise protected to insure that only one call is
              active. It is recommended that <code class="function">ldap_get_option</code>() or <code class="function">ldap_set_option</code>() be used in the
              program's main thread before any additional threads
              are created. See <a class="link" href="../htmlman3/ldap_get_option.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">ldap_get_option</span>(3)</span></a>.</p>
            </td>
          </tr>
        </table>
      </div>
    </div>

    <div class="refsect1">
      <a id="ldap-open-3_sect3" name="ldap-open-3_sect3" shape="rect"> </a>

      <h2>ERRORS</h2>

      <p>If an error occurs, <code class="function">ldap_open</code>() and <code class="function">ldap_init</code>() will return NULL and
      <code class="varname">errno</code> should be set
      appropriately. <code class="function">ldap_initialize</code>() and <code class="function">ldap_init_fd</code>() will directly return the
      LDAP code associated to the error (or <code class="constant">LDAP_SUCCESS</code> in case of success);
      <code class="varname">errno</code> should be set as well
      whenever appropriate. <code class="function">ldap_set_urllist_proc</code>() returns
      LDAP_OPT_ERROR on error, and LDAP_OPT_SUCCESS on success.</p>
    </div>

    <div class="refsect1">
      <a id="ldap-open-3_sect4" name="ldap-open-3_sect4" shape="rect"> </a>

      <h2>SEE ALSO</h2>

      <p><a class="link" href="../htmlman3/ldap.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">ldap</span>(3)</span></a>, <a class="link" href="../htmlman3/ldap_bind.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">ldap_bind</span>(3)</span></a>, <a class="link" href="../htmlman3/ldap_get_option.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">ldap_get_option</span>(3)</span></a>,
      <a class="link" href="../htmlman3/ldap_get_option.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">ldap_set_option</span>(3)</span></a>,
      <a class="link" href="../htmlman3/lber-sockbuf.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">lber-sockbuf</span>(3)</span></a>, <a class="link" href="../htmlman3/errno.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">errno</span>(3)</span></a></p>
    </div>

    <div class="refsect1">
      <a id="ldap-open-3_sect5" name="ldap-open-3_sect5" shape="rect"> </a>

      <h2>ACKNOWLEDGEMENTS</h2>

      <p><span class="emphasis"><em>OpenLDAP Software</em></span>
      is developed and maintained by The OpenLDAP Project
      &lt;<a class="literalurl" href="http://www.openldap.org/" target="_top" shape="rect">http://www.openldap.org/</a>&gt;. <span class="emphasis"><em>OpenLDAP Software</em></span> is derived from
      University of Michigan LDAP 3.3 Release.</p>

      <div class="license">
        <table style="border-collapse: collapse;">
          <colgroup span="1">
            <col span="1" />
          </colgroup>

          <tbody>
            <tr>
              <td style="" rowspan="1" colspan="1">
                <div class="literallayout">
                  <br />
                  See the following documents: <a class="ulink" href="../openldap-COPYRIGHT.html" target="_top" shape="rect">COPYRIGHT</a>, <a class="ulink" href="../openldap-LICENSE.html" target="_top" shape="rect">LICENSE</a><br />
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</body>
</html>
