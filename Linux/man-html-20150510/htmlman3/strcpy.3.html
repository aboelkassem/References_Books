<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

  <title>strcpy(3) — Linux manual pages</title>
  <link rel="stylesheet" type="text/css" href="../stylesheet/manpages.css" />
  
  <link rel="home" href="../index.html" title="strcpy(3) — Linux manual pages" />
  <script type="text/javascript" src="../stylesheet/manpages.js" xml:space="preserve">
</script>
  <link rel="icon" href="../stylesheet/icon.gif" type="image/gif" />
</head>

<body onload="javascript:init()">
  <div class="navheader">
    <table width="100%">
      <tbody>
        <tr>
          <td style="width: 33%" rowspan="1" colspan="1"><a href="../index.html" shape="rect">Linux
          manual pages</a></td>

          <th rowspan="1" colspan="1"><a href="../index3.html" shape="rect">Section 3</a></th>

          <td style="width: 33%" rowspan="1" colspan="1"> </td>
        </tr>
      </tbody>
    </table>
    <hr />
  </div>

  <div class="refentry">
    <a id="strcpy.3" name="strcpy.3" shape="rect"> </a>

    <div class="titlepage"> </div>

    <div class="refnamediv">
      <h2>Name</h2>

      <p>strcpy, strncpy — copy a string</p>
    </div>

    <div class="refsynopsisdiv">
      <h2>Synopsis</h2>

      <div class="funcsynopsis">
        <pre class="funcsynopsisinfo" xml:space="preserve">
#include &lt;string.h&gt;
</pre>

        <table border="0" class="funcprototype-table" summary="Function synopsis" style="cellspacing: 0; cellpadding: 0;">
          <tr>
            <td rowspan="1" colspan="1"><code class="funcdef">char
            *<strong>strcpy</strong>(</code></td>

            <td rowspan="1" colspan="1">char *<var class="pdparam">dest</var>,</td>
          </tr>

          <tr>
            <td rowspan="1" colspan="1"> </td>

            <td rowspan="1" colspan="1">const char *<var class="pdparam">src</var><code>)</code>;</td>
          </tr>
        </table>

        <div class="funcprototype-spacer">
           
        </div>
      </div>

      <div class="funcsynopsis">
        <table border="0" class="funcprototype-table" summary="Function synopsis" style="cellspacing: 0; cellpadding: 0;">
          <tr>
            <td rowspan="1" colspan="1"><code class="funcdef">char
            *<strong>strncpy</strong>(</code></td>

            <td rowspan="1" colspan="1">char *<var class="pdparam">dest</var>,</td>
          </tr>

          <tr>
            <td rowspan="1" colspan="1"> </td>

            <td rowspan="1" colspan="1">const char *<var class="pdparam">src</var>,</td>
          </tr>

          <tr>
            <td rowspan="1" colspan="1"> </td>

            <td rowspan="1" colspan="1">size_t <var class="pdparam">n</var><code>)</code>;</td>
          </tr>
        </table>

        <div class="funcprototype-spacer">
           
        </div>
      </div>
    </div>

    <div class="refsect1">
      <a id="strcpy-3_sect1" name="strcpy-3_sect1" shape="rect"> </a>

      <h2>DESCRIPTION</h2>

      <p>The <code class="function">strcpy</code>() function copies
      the string pointed to by <em class="parameter"><code>src</code></em>, including the terminating
      null byte ('\0'), to the buffer pointed to by <em class="parameter"><code>dest</code></em>. The strings may not
      overlap, and the destination string <em class="parameter"><code>dest</code></em> must be large enough to
      receive the copy. <span class="emphasis"><em>Beware of buffer
      overruns!</em></span> (See BUGS.)</p>

      <p>The <code class="function">strncpy</code>() function is
      similar, except that at most <em class="parameter"><code>n</code></em> bytes of <em class="parameter"><code>src</code></em> are copied.</p>

      <div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;">
        <table border="0" summary="Warning">
          <tr>
            <td rowspan="2" align="center" valign="top" width="25" colspan="1">
            <img alt="[Warning]" src="../stylesheet/warning.png" /></td>

            <th align="left" rowspan="1" colspan="1">Warning</th>
          </tr>

          <tr>
            <td align="left" valign="top" rowspan="1" colspan="1">
              <p>If there is no null byte among the first
              <em class="parameter"><code>n</code></em> bytes of
              <em class="parameter"><code>src</code></em>, the
              string placed in <em class="parameter"><code>dest</code></em> will not be
              null-terminated.</p>
            </td>
          </tr>
        </table>
      </div>

      <p>If the length of <em class="parameter"><code>src</code></em> is less than <em class="parameter"><code>n</code></em>, <code class="function">strncpy</code>() writes additional null bytes to
      <em class="parameter"><code>dest</code></em> to ensure that a
      total of <em class="parameter"><code>n</code></em> bytes are
      written.</p>

      <p>A simple implementation of <code class="function">strncpy</code>() might be:</p>

      <div class="blockquote">
        <blockquote class="blockquote">
          <div class="informalexample">
            <pre class="programlisting" xml:space="preserve">
char *
strncpy(char *dest, const char *src, size_t n)
{
    size_t i;

    for (i = 0; i &lt; n &amp;&amp; src[i] != '\0'; i++)
        dest[i] = src[i];
    for ( ; i &lt; n; i++)
        dest[i] = '\0';

    return dest;
}
</pre>
          </div>
        </blockquote>
      </div>
    </div>

    <div class="refsect1">
      <a id="strcpy-3_sect2" name="strcpy-3_sect2" shape="rect"> </a>

      <h2>RETURN VALUE</h2>

      <p>The <code class="function">strcpy</code>() and
      <code class="function">strncpy</code>() functions return a
      pointer to the destination string <em class="parameter"><code>dest</code></em>.</p>
    </div>

    <div class="refsect1">
      <a id="strcpy-3_sect3" name="strcpy-3_sect3" shape="rect"> </a>

      <h2>ATTRIBUTES</h2>

      <p>For an explanation of the terms used in this section, see
      <a class="link" href="../htmlman7/attributes.7.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">attributes</span>(7)</span></a>.</p>

      <div class="informaltable">
        <table style="border-collapse: collapse;">
          <colgroup span="1">
            <col class="c0" span="1" />
            <col class="c1" span="1" />
            <col class="c2" span="1" />
          </colgroup>

          <tbody>
            <tr>
              <td style="" align="left" rowspan="1" colspan="1">Interface</td>

              <td style="" align="left" rowspan="1" colspan="1">Attribute</td>

              <td style="" align="left" rowspan="1" colspan="1">Value</td>
            </tr>

            <tr>
              <td style="" align="left" rowspan="1" colspan="1"><code class="literal">strcpy</code>(), <code class="literal">strncpy</code>()</td>

              <td style="" align="left" rowspan="1" colspan="1">Thread safety</td>

              <td style="" align="left" rowspan="1" colspan="1">MT-Safe</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <div class="refsect1">
      <a id="strcpy-3_sect4" name="strcpy-3_sect4" shape="rect"> </a>

      <h2>CONFORMING TO</h2>

      <p>SVr4, 4.3BSD, C89, C99.</p>
    </div>

    <div class="refsect1">
      <a id="strcpy-3_sect5" name="strcpy-3_sect5" shape="rect"> </a>

      <h2>NOTES</h2>

      <p>Some programmers consider <code class="function">strncpy</code>() to be inefficient and error
      prone. If the programmer knows (i.e., includes code to test!)
      that the size of <em class="parameter"><code>dest</code></em>
      is greater than the length of <em class="parameter"><code>src</code></em>, then <code class="function">strcpy</code>() can be used.</p>

      <p>One valid (and intended) use of <code class="function">strncpy</code>() is to copy a C string to a
      fixed-length buffer while ensuring both that the buffer is
      not overflowed and that unused bytes in the target buffer are
      zeroed out (perhaps to prevent information leaks if the
      buffer is to be written to media or transmitted to another
      process via an interprocess communication technique).</p>

      <p>If there is no terminating null byte in the first
      <em class="parameter"><code>n</code></em> bytes of <em class="parameter"><code>src</code></em>, <code class="function">strncpy</code>() produces an unterminated string
      in <em class="parameter"><code>dest</code></em>. If
      <code class="function">buf</code> has length <code class="function">buflen</code>, you can force termination using
      something like the following:</p>

      <div class="blockquote">
        <blockquote class="blockquote">
          <div class="informalexample">
            <pre class="programlisting" xml:space="preserve">
strncpy(buf, str, buflen − 1);
if (buflen &gt; 0)
    buf[buflen − 1]= '\0';
</pre>
          </div>
        </blockquote>
      </div>

      <p>(Of course, the above technique ignores the fact that, if
      <em class="parameter"><code>src</code></em> contains more
      than <span class="emphasis"><em>buflen − 1</em></span>
      bytes, information is lost in the copying to <em class="parameter"><code>dest</code></em>.)</p>

      <div class="refsect2">
        <a id="strcpy-3_sect6" name="strcpy-3_sect6" shape="rect"> </a>

        <h3>strlcpy()</h3>

        <p>Some systems (the BSDs, Solaris, and others) provide the
        following function:</p>

        <p>size_t strlcpy(char *dest, const char *src, size_t
        size);</p>

        <p>This function is similar to <code class="function">strncpy</code>(), but it copies at most
        <em class="replaceable"><code>size−1</code></em>
        bytes to <em class="parameter"><code>dest</code></em>,
        always adds a terminating null byte, and does not pad the
        target with (further) null bytes. This function fixes some
        of the problems of <code class="function">strcpy</code>()
        and <code class="function">strncpy</code>(), but the caller
        must still handle the possibility of data loss if
        <code class="function">size</code> is too small. The return
        value of the function is the length of <em class="parameter"><code>src</code></em>, which allows truncation
        to be easily detected: if the return value is greater than
        or equal to <code class="function">size</code>, truncation
        occurred. If loss of data matters, the caller <span class="emphasis"><em>must</em></span> either check the arguments
        before the call, or test the function return value.
        <code class="function">strlcpy</code>() is not present in
        glibc and is not standardized by POSIX, but is available on
        Linux via the <code class="function">libbsd</code>
        library.</p>
      </div>
    </div>

    <div class="refsect1">
      <a id="strcpy-3_sect7" name="strcpy-3_sect7" shape="rect"> </a>

      <h2>BUGS</h2>

      <p>If the destination string of a <code class="function">strcpy</code>() is not large enough, then anything
      might happen. Overflowing fixed-length string buffers is a
      favorite cracker technique for taking complete control of the
      machine. Any time a program reads or copies data into a
      buffer, the program first needs to check that there's enough
      space. This may be unnecessary if you can show that overflow
      is impossible, but be careful: programs can get changed over
      time, in ways that may make the impossible possible.</p>
    </div>

    <div class="refsect1">
      <a id="strcpy-3_sect8" name="strcpy-3_sect8" shape="rect"> </a>

      <h2>SEE ALSO</h2>

      <p><a class="link" href="../htmlman3/bcopy.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">bcopy</span>(3)</span></a>, <a class="link" href="../htmlman3/memccpy.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">memccpy</span>(3)</span></a>, <a class="link" href="../htmlman3/memcpy.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">memcpy</span>(3)</span></a>, <a class="link" href="../htmlman3/memmove.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">memmove</span>(3)</span></a>, <a class="link" href="../htmlman3/stpcpy.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">stpcpy</span>(3)</span></a>, <a class="link" href="../htmlman3/stpncpy.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">stpncpy</span>(3)</span></a>, <a class="link" href="../htmlman3/strdup.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">strdup</span>(3)</span></a>, <a class="link" href="../htmlman3/string.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">string</span>(3)</span></a>, <a class="link" href="../htmlman3/wcscpy.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">wcscpy</span>(3)</span></a>, <a class="link" href="../htmlman3/wcsncpy.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">wcsncpy</span>(3)</span></a></p>
    </div>

    <div class="colophon">
      <a id="strcpy-3_sect9" name="strcpy-3_sect9" shape="rect"> </a>

      <h2>COLOPHON</h2>

      <p>This page is part of release 4.00 of the Linux <em class="replaceable"><code>man-pages</code></em> project. A
      description of the project, information about reporting bugs,
      and the latest version of this page, can be found at
      http://www.kernel.org/doc/man−pages/.</p>

      <div class="license">
        <table style="border-collapse: collapse;">
          <colgroup span="1">
            <col span="1" />
          </colgroup>

          <tbody>
            <tr>
              <td style="" rowspan="1" colspan="1">
                <div class="literallayout">
                  <br />
                    Copyright (C) 1993 David Metcalfe (david<script type="text/javascript">document.write('@');</script><noscript>(@)</noscript>prism.demon.co.uk)<br />

                  <br />
                  %%%LICENSE_START(VERBATIM)<br />
                  Permission is granted to make and distribute verbatim copies of this<br />

                  manual provided the copyright notice and this permission notice are<br />

                  preserved on all copies.<br />
                  <br />
                  Permission is granted to copy and distribute modified versions of this<br />

                  manual under the conditions for verbatim copying, provided that the<br />

                  entire resulting derived work is distributed under the terms of a<br />

                  permission notice identical to this one.<br />

                  <br />
                  Since the Linux kernel and libraries are constantly changing, this<br />

                  manual page may be incorrect or out-of-date.  The author(s) assume no<br />

                  responsibility for errors or omissions, or for damages resulting from<br />

                  the use of the information contained herein.  The author(s) may not<br />

                  have taken the same level of care in the production of this manual,<br />

                  which is licensed free of charge, as they might when working<br />

                  professionally.<br />
                  <br />
                  Formatted or processed versions of this manual, if unaccompanied by<br />

                  the source, must acknowledge the copyright and authors of this work.<br />

                  %%%LICENSE_END<br />
                  <br />
                  References consulted:<br />
                      Linux libc source code<br />

                      Lewine's _POSIX Programmer's Guide_ (O'Reilly &amp; Associates, 1991)<br />

                      386BSD man pages<br />

                  Modified Sat Jul 24 18:06:49 1993 by Rik Faith (faith<script type="text/javascript">document.write('@');</script><noscript>(@)</noscript>cs.unc.edu)<br />

                  Modified Fri Aug 25 23:17:51 1995 by Andries Brouwer (aeb<script type="text/javascript">document.write('@');</script><noscript>(@)</noscript>cwi.nl)<br />

                  Modified Wed Dec 18 00:47:18 1996 by Andries Brouwer (aeb<script type="text/javascript">document.write('@');</script><noscript>(@)</noscript>cwi.nl)<br />

                  2007-06-15, Marc Boyer &lt;marc.boyer<script type="text/javascript">document.write('@');</script><noscript>(@)</noscript>enseeiht.fr&gt; + mtk<br />

                      Improve discussion of strncpy().<br />
                  
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</body>
</html>
