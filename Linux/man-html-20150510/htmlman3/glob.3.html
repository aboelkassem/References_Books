<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

  <title>glob(3) — Linux manual pages</title>
  <link rel="stylesheet" type="text/css" href="../stylesheet/manpages.css" />
  
  <link rel="home" href="../index.html" title="glob(3) — Linux manual pages" />
  <script type="text/javascript" src="../stylesheet/manpages.js" xml:space="preserve">
</script>
  <link rel="icon" href="../stylesheet/icon.gif" type="image/gif" />
</head>

<body onload="javascript:init()">
  <div class="navheader">
    <table width="100%">
      <tbody>
        <tr>
          <td style="width: 33%" rowspan="1" colspan="1"><a href="../index.html" shape="rect">Linux
          manual pages</a></td>

          <th rowspan="1" colspan="1"><a href="../index3.html" shape="rect">Section 3</a></th>

          <td style="width: 33%" rowspan="1" colspan="1"> </td>
        </tr>
      </tbody>
    </table>
    <hr />
  </div>

  <div class="refentry">
    <a id="glob.3" name="glob.3" shape="rect"> </a>

    <div class="titlepage"> </div>

    <div class="refnamediv">
      <h2>Name</h2>

      <p>glob, globfree — find pathnames matching a pattern,
      free memory from glob()</p>
    </div>

    <div class="refsynopsisdiv">
      <h2>Synopsis</h2>

      <div class="funcsynopsis">
        <pre class="funcsynopsisinfo" xml:space="preserve">
#include &lt;glob.h&gt;
</pre>

        <table border="0" class="funcprototype-table" summary="Function synopsis" style="cellspacing: 0; cellpadding: 0;">
          <tr>
            <td rowspan="1" colspan="1"><code class="funcdef">int
            <strong>glob</strong>(</code></td>

            <td rowspan="1" colspan="1">const char *<var class="pdparam">pattern</var>,</td>
          </tr>

          <tr>
            <td rowspan="1" colspan="1"> </td>

            <td rowspan="1" colspan="1">int <var class="pdparam">flags</var>,</td>
          </tr>

          <tr>
            <td rowspan="1" colspan="1"> </td>

            <td rowspan="1" colspan="1">int <var class="pdparam">(*errfunc)</var><code>(</code>const char
            *epath, int eerrno<code>)</code>,</td>
          </tr>

          <tr>
            <td rowspan="1" colspan="1"> </td>

            <td rowspan="1" colspan="1">glob_t *<var class="pdparam">pglob</var><code>)</code>;</td>
          </tr>
        </table>

        <div class="funcprototype-spacer">
           
        </div>
      </div>

      <div class="funcsynopsis">
        <table border="0" class="funcprototype-table" summary="Function synopsis" style="cellspacing: 0; cellpadding: 0;">
          <tr>
            <td rowspan="1" colspan="1"><code class="funcdef">void
            <strong>globfree</strong>(</code></td>

            <td rowspan="1" colspan="1">glob_t *<var class="pdparam">pglob</var><code>)</code>;</td>
          </tr>
        </table>

        <div class="funcprototype-spacer">
           
        </div>
      </div>
    </div>

    <div class="refsect1">
      <a id="glob-3_sect1" name="glob-3_sect1" shape="rect"> </a>

      <h2>DESCRIPTION</h2>

      <p>The <code class="function">glob</code>() function searches
      for all the pathnames matching <em class="parameter"><code>pattern</code></em> according to the rules
      used by the shell (see <a class="link" href="../htmlman7/glob.7.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">glob</span>(7)</span></a>). No tilde
      expansion or parameter substitution is done; if you want
      these, use <a class="link" href="../htmlman3/wordexp.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">wordexp</span>(3)</span></a>.</p>

      <p>The <code class="function">globfree</code>() function
      frees the dynamically allocated storage from an earlier call
      to <code class="function">glob</code>().</p>

      <p>The results of a <code class="function">glob</code>() call
      are stored in the structure pointed to by <em class="parameter"><code>pglob</code></em>. This structure is of
      type <span class="type">glob_t</span> (declared in
      <code class="literal">&lt;</code><code class="filename">glob.h</code><code class="literal">&gt;</code> and
      includes the following elements defined by POSIX.2 (more may
      be present as an extension):</p>

      <div class="blockquote">
        <blockquote class="blockquote">
          <div class="structdef">
            <table style="border-collapse: collapse;">
              <colgroup span="1">
                <col class="c1" span="1" />
                <col class="c2" span="1" />
                <col class="c3" span="1" />
                <col class="c4" span="1" />
                <col class="c5" span="1" />
              </colgroup>

              <tbody>
                <tr>
                  <td class="structdefhdr" style="" align="left" rowspan="1" colspan="1">
                  typedef</td>

                  <td class="structdefhdr" style="" colspan="4" align="left" rowspan="1">struct {</td>
                </tr>

                <tr>
                  <td style="" rowspan="1" colspan="1"> </td>

                  <td style="" align="left" rowspan="1" colspan="1"><span class="type">size_t</span></td>

                  <td class="norightpad" style="" align="right" rowspan="1" colspan="1">
                   </td>

                  <td style="" align="left" rowspan="1" colspan="1"><em class="structfield"><code>gl_pathc</code></em>;</td>

                  <td style="" align="left" rowspan="1" colspan="1">
                    <div class="literallayout">
                      
                      /* Count of paths matched so far  */
                    </div>
                  </td>
                </tr>

                <tr>
                  <td style="" rowspan="1" colspan="1"> </td>

                  <td style="" align="left" rowspan="1" colspan="1"><span class="type">char</span></td>

                  <td class="norightpad" style="" align="right" rowspan="1" colspan="1">
                  **</td>

                  <td style="" align="left" rowspan="1" colspan="1"><em class="structfield"><code>gl_pathv</code></em>;</td>

                  <td style="" align="left" rowspan="1" colspan="1">
                    <div class="literallayout">
                      
                      /* List of matched pathnames.  */
                    </div>
                  </td>
                </tr>

                <tr>
                  <td style="" rowspan="1" colspan="1"> </td>

                  <td style="" align="left" rowspan="1" colspan="1"><span class="type">size_t</span></td>

                  <td class="norightpad" style="" align="right" rowspan="1" colspan="1">
                   </td>

                  <td style="" align="left" rowspan="1" colspan="1"><em class="structfield"><code>gl_offs</code></em>;</td>

                  <td style="" align="left" rowspan="1" colspan="1">
                    <div class="literallayout">
                      
                      /* Slots to reserve in gl_pathv.  */
                    </div>
                  </td>
                </tr>

                <tr>
                  <td class="structdefftr" style="" colspan="5" align="left" rowspan="1">} glob_t;</td>
                </tr>
              </tbody>
            </table>
          </div>
        </blockquote>
      </div>

      <p>Results are stored in dynamically allocated storage.</p>

      <p>The argument <em class="parameter"><code>flags</code></em>
      is made up of the bitwise OR of zero or more the following
      symbolic constants, which modify the behavior of <code class="function">glob</code>():</p>

      <div class="variablelist">
        <dl class="variablelist">
          <dt><span class="term"><code class="constant">GLOB_ERR</code></span></dt>

          <dd>
            <p>Return upon a read error (because a directory does
            not have read permission, for example). By default,
            <code class="function">glob</code>() attempts carry on
            despite errors, reading all of the directories that it
            can.</p>
          </dd>

          <dt><span class="term"><code class="constant">GLOB_MARK</code></span></dt>

          <dd>
            <p>Append a slash to each path which corresponds to a
            directory.</p>
          </dd>

          <dt><span class="term"><code class="constant">GLOB_NOSORT</code></span></dt>

          <dd>
            <p>Don't sort the returned pathnames. The only reason
            to do this is to save processing time. By default, the
            returned pathnames are sorted.</p>
          </dd>

          <dt><span class="term"><code class="constant">GLOB_DOOFFS</code></span></dt>

          <dd>
            <p>Reserve <em class="replaceable"><code>pglob−&gt;gl_offs</code></em>
            slots at the beginning of the list of strings in
            <em class="replaceable"><code>pglob−&gt;pathv</code></em>.
            The reserved slots contain null pointers.</p>
          </dd>

          <dt><span class="term"><code class="constant">GLOB_NOCHECK</code></span></dt>

          <dd>
            <p>If no pattern matches, return the original pattern.
            By default, <code class="function">glob</code>()
            returns <code class="constant">GLOB_NOMATCH</code> if
            there are no matches.</p>
          </dd>

          <dt><span class="term"><code class="constant">GLOB_APPEND</code></span></dt>

          <dd>
            <p>Append the results of this call to the vector of
            results returned by a previous call to <code class="function">glob</code>(). Do not set this flag on the
            first invocation of <code class="function">glob</code>().</p>
          </dd>

          <dt><span class="term"><code class="constant">GLOB_NOESCAPE</code></span></dt>

          <dd>
            <p>Don't allow backslash ('\') to be used as an escape
            character. Normally, a backslash can be used to quote
            the following character, providing a mechanism to turn
            off the special meaning metacharacters.</p>
          </dd>
        </dl>
      </div>

      <p><em class="parameter"><code>flags</code></em> may also
      include any of the following, which are GNU extensions and
      not defined by POSIX.2:</p>

      <div class="variablelist">
        <dl class="variablelist">
          <dt><span class="term"><code class="constant">GLOB_PERIOD</code></span></dt>

          <dd>
            <p>Allow a leading period to be matched by
            metacharacters. By default, metacharacters can't match
            a leading period.</p>
          </dd>

          <dt><span class="term"><code class="constant">GLOB_ALTDIRFUNC</code></span></dt>

          <dd>
            <p>Use alternative functions <em class="replaceable"><code>pglob−&gt;gl_closedir</code></em>,
            <em class="replaceable"><code>pglob−&gt;gl_readdir</code></em>,
            <em class="replaceable"><code>pglob−&gt;gl_opendir</code></em>,
            <em class="replaceable"><code>pglob−&gt;gl_lstat</code></em>,
            and <em class="replaceable"><code>pglob−&gt;gl_stat</code></em>
            for filesystem access instead of the normal library
            functions.</p>
          </dd>

          <dt><span class="term"><code class="constant">GLOB_BRACE</code></span></dt>

          <dd>
            <p>Expand <span class="citerefentry"><span class="refentrytitle">csh</span>(1)</span> style brace
            expressions of the form <em class="replaceable"><code>{a,b}</code></em>. Brace
            expressions can be nested. Thus, for example,
            specifying the pattern "{foo/{,cat,dog},bar}" would
            return the same results as four separate <code class="function">glob</code>() calls using the strings:
            "foo/", "foo/cat", "foo/dog", and "bar".</p>
          </dd>

          <dt><span class="term"><code class="constant">GLOB_NOMAGIC</code></span></dt>

          <dd>
            <p>If the pattern contains no metacharacters, then it
            should be returned as the sole matching word, even if
            there is no file with that name.</p>
          </dd>

          <dt><span class="term"><code class="constant">GLOB_TILDE</code></span></dt>

          <dd>
            <p>Carry out tilde expansion. If a tilde ('~') is the
            only character in the pattern, or an initial tilde is
            followed immediately by a slash ('/'), then the home
            directory of the caller is substituted for the tilde.
            If an initial tilde is followed by a username (e.g.,
            "~andrea/bin"), then the tilde and username are
            substituted by the home directory of that user. If the
            username is invalid, or the home directory cannot be
            determined, then no substitution is performed.</p>
          </dd>

          <dt><span class="term"><code class="constant">GLOB_TILDE_CHECK</code></span></dt>

          <dd>
            <p>This provides behavior similar to that of
            <code class="constant">GLOB_TILDE</code>. The
            difference is that if the username is invalid, or the
            home directory cannot be determined, then instead of
            using the pattern itself as the name, <code class="function">glob</code>() returns <code class="constant">GLOB_NOMATCH</code> to indicate an
            error.</p>
          </dd>

          <dt><span class="term"><code class="constant">GLOB_ONLYDIR</code></span></dt>

          <dd>
            <p>This is a <span class="emphasis"><em>hint</em></span> to <code class="function">glob</code>() that the caller is interested
            only in directories that match the pattern. If the
            implementation can easily determine file-type
            information, then nondirectory files are not returned
            to the caller. However, the caller must still check
            that returned files are directories. (The purpose of
            this flag is merely to optimize performance when the
            caller is interested only in directories.)</p>
          </dd>
        </dl>
      </div>

      <p>If <em class="parameter"><code>errfunc</code></em> is not
      NULL, it will be called in case of an error with the
      arguments <em class="parameter"><code>epath</code></em>, a
      pointer to the path which failed, and <code class="varname">eerrno</code>, the value of <code class="varname">errno</code> as returned from one of the calls to
      <a class="link" href="../htmlman3/opendir.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">opendir</span>(3)</span></a>, <a class="link" href="../htmlman3/readdir.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">readdir</span>(3)</span></a>, or <a class="link" href="../htmlman2/stat.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">stat</span>(2)</span></a>. If <em class="parameter"><code>errfunc</code></em> returns nonzero, or if
      <code class="constant">GLOB_ERR</code> is set, <code class="function">glob</code>() will terminate after the call to
      <em class="parameter"><code>errfunc</code></em>.</p>

      <p>Upon successful return, <em class="replaceable"><code>pglob−&gt;gl_pathc</code></em>
      contains the number of matched pathnames and <em class="replaceable"><code>pglob−&gt;gl_pathv</code></em>
      contains a pointer to the list of pointers to matched
      pathnames. The list of pointers is terminated by a null
      pointer.</p>

      <p>It is possible to call <code class="function">glob</code>() several times. In that case, the
      <code class="constant">GLOB_APPEND</code> flag has to be set
      in <em class="parameter"><code>flags</code></em> on the
      second and later invocations.</p>

      <p>As a GNU extension, <em class="replaceable"><code>pglob−&gt;gl_flags</code></em> is
      set to the flags specified, <span class="emphasis"><em>or</em></span>ed with <code class="constant">GLOB_MAGCHAR</code> if any metacharacters were
      found.</p>
    </div>

    <div class="refsect1">
      <a id="glob-3_sect2" name="glob-3_sect2" shape="rect"> </a>

      <h2>RETURN VALUE</h2>

      <p>On successful completion, <code class="function">glob</code>() returns zero. Other possible returns
      are:</p>

      <div class="variablelist">
        <dl class="variablelist">
          <dt><span class="term"><code class="constant">GLOB_NOSPACE</code></span></dt>

          <dd>
            <p>for running out of memory,</p>
          </dd>

          <dt><span class="term"><code class="constant">GLOB_ABORTED</code></span></dt>

          <dd>
            <p>for a read error, and</p>
          </dd>

          <dt><span class="term"><code class="constant">GLOB_NOMATCH</code></span></dt>

          <dd>
            <p>for no found matches.</p>
          </dd>
        </dl>
      </div>
    </div>

    <div class="refsect1">
      <a id="glob-3_sect3" name="glob-3_sect3" shape="rect"> </a>

      <h2>ATTRIBUTES</h2>

      <p>For an explanation of the terms used in this section, see
      <a class="link" href="../htmlman7/attributes.7.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">attributes</span>(7)</span></a>.</p>

      <div class="informaltable">
        <table style="border-collapse: collapse;">
          <colgroup span="1">
            <col class="c0" span="1" />
            <col class="c1" span="1" />
            <col class="c2" span="1" />
          </colgroup>

          <tbody>
            <tr>
              <td style="" align="left" rowspan="1" colspan="1">Interface</td>

              <td style="" align="left" rowspan="1" colspan="1">Attribute</td>

              <td style="" align="left" rowspan="1" colspan="1">Value</td>
            </tr>

            <tr>
              <td style="" align="left" rowspan="1" colspan="1"><code class="literal">glob</code>()</td>

              <td style="" align="left" rowspan="1" colspan="1">Thread safety</td>

              <td style="" align="left" rowspan="1" colspan="1">
                <p>MT-Unsafe race:utent env</p>

                <p>sig:ALRM timer locale</p>
              </td>
            </tr>

            <tr>
              <td style="" align="left" rowspan="1" colspan="1"><code class="literal">globfree</code>()</td>

              <td style="" align="left" rowspan="1" colspan="1">Thread safety</td>

              <td style="" align="left" rowspan="1" colspan="1">MT-Safe</td>
            </tr>
          </tbody>
        </table>
      </div>

      <p>In the above table, <code class="function">utent</code> in
      <em class="replaceable"><code>race:utent</code></em>
      signifies that if any of the functions <a class="link" href="../htmlman3/getutent.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">setutent</span>(3)</span></a>, <a class="link" href="../htmlman3/getutent.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">getutent</span>(3)</span></a>, or <a class="link" href="../htmlman3/getutent.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">endutent</span>(3)</span></a> are used in
      parallel in different threads of a program, then data races
      could occur. <a class="link" href="../htmlman3/glob.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">glob</span>(3)</span></a> calls those
      functions, so we use race:utent to remind users.</p>
    </div>

    <div class="refsect1">
      <a id="glob-3_sect4" name="glob-3_sect4" shape="rect"> </a>

      <h2>CONFORMING TO</h2>

      <p>POSIX.2, POSIX.1-2001.</p>
    </div>

    <div class="refsect1">
      <a id="glob-3_sect5" name="glob-3_sect5" shape="rect"> </a>

      <h2>NOTES</h2>

      <p>The structure elements <em class="parameter"><code>gl_pathc</code></em> and <em class="parameter"><code>gl_offs</code></em> are declared as
      <span class="type">size_t</span> in glibc 2.1, as they should
      be according to POSIX.2, but are declared as <span class="type">int</span> in glibc 2.0.</p>
    </div>

    <div class="refsect1">
      <a id="glob-3_sect6" name="glob-3_sect6" shape="rect"> </a>

      <h2>BUGS</h2>

      <p>The <code class="function">glob</code>() function may fail
      due to failure of underlying function calls, such as
      <a class="link" href="../htmlman3/malloc.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">malloc</span>(3)</span></a> or <a class="link" href="../htmlman3/opendir.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">opendir</span>(3)</span></a>. These will
      store their error code in <code class="varname">errno</code>.</p>
    </div>

    <div class="refsect1">
      <a id="glob-3_sect7" name="glob-3_sect7" shape="rect"> </a>

      <h2>EXAMPLE</h2>

      <p>One example of use is the following code, which simulates
      typing</p>

      <p>ls −l *.c ../*.c</p>

      <p>in the shell:</p>

      <div class="blockquote">
        <blockquote class="blockquote">
          <div class="informalexample">
            <pre class="programlisting" xml:space="preserve">
glob_t globbuf;

globbuf.gl_offs = 2;
glob("*.c", GLOB_DOOFFS, NULL, &amp;globbuf);
glob("../*.c", GLOB_DOOFFS | GLOB_APPEND, NULL, &amp;globbuf);
globbuf.gl_pathv[0] = "ls";
globbuf.gl_pathv[1] = "−l";
execvp("ls", &amp;globbuf.gl_pathv[0]);
</pre>
          </div>
        </blockquote>
      </div>
    </div>

    <div class="refsect1">
      <a id="glob-3_sect8" name="glob-3_sect8" shape="rect"> </a>

      <h2>SEE ALSO</h2>

      <p><a class="link" href="../htmlman1/ls.1.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">ls</span>(1)</span></a>, <span class="citerefentry"><span class="refentrytitle">sh</span>(1)</span>, <a class="link" href="../htmlman2/stat.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">stat</span>(2)</span></a>, <a class="link" href="../htmlman3/exec.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">exec</span>(3)</span></a>, <a class="link" href="../htmlman3/fnmatch.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">fnmatch</span>(3)</span></a>, <a class="link" href="../htmlman3/malloc.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">malloc</span>(3)</span></a>, <a class="link" href="../htmlman3/opendir.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">opendir</span>(3)</span></a>, <a class="link" href="../htmlman3/readdir.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">readdir</span>(3)</span></a>, <a class="link" href="../htmlman3/wordexp.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">wordexp</span>(3)</span></a>, <a class="link" href="../htmlman7/glob.7.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">glob</span>(7)</span></a></p>
    </div>

    <div class="colophon">
      <a id="glob-3_sect9" name="glob-3_sect9" shape="rect"> </a>

      <h2>COLOPHON</h2>

      <p>This page is part of release 4.00 of the Linux <em class="replaceable"><code>man-pages</code></em> project. A
      description of the project, information about reporting bugs,
      and the latest version of this page, can be found at
      http://www.kernel.org/doc/man−pages/.</p>

      <div class="license">
        <table style="border-collapse: collapse;">
          <colgroup span="1">
            <col span="1" />
          </colgroup>

          <tbody>
            <tr>
              <td style="" rowspan="1" colspan="1">
                <div class="literallayout">
                  <br />
                    Copyright (c) 1993 by Thomas Koenig (ig25<script type="text/javascript">document.write('@');</script><noscript>(@)</noscript>rz.uni-karlsruhe.de)<br />

                  <br />
                  %%%LICENSE_START(VERBATIM)<br />
                  Permission is granted to make and distribute verbatim copies of this<br />

                  manual provided the copyright notice and this permission notice are<br />

                  preserved on all copies.<br />
                  <br />
                  Permission is granted to copy and distribute modified versions of this<br />

                  manual under the conditions for verbatim copying, provided that the<br />

                  entire resulting derived work is distributed under the terms of a<br />

                  permission notice identical to this one.<br />

                  <br />
                  Since the Linux kernel and libraries are constantly changing, this<br />

                  manual page may be incorrect or out-of-date.  The author(s) assume no<br />

                  responsibility for errors or omissions, or for damages resulting from<br />

                  the use of the information contained herein.  The author(s) may not<br />

                  have taken the same level of care in the production of this manual,<br />

                  which is licensed free of charge, as they might when working<br />

                  professionally.<br />
                  <br />
                  Formatted or processed versions of this manual, if unaccompanied by<br />

                  the source, must acknowledge the copyright and authors of this work.<br />

                  %%%LICENSE_END<br />
                  <br />
                  Modified Wed Jul 28 11:12:17 1993 by Rik Faith (faith<script type="text/javascript">document.write('@');</script><noscript>(@)</noscript>cs.unc.edu)<br />

                  Modified Mon May 13 23:08:50 1996 by Martin Schulze (joey<script type="text/javascript">document.write('@');</script><noscript>(@)</noscript>linux.de)<br />

                  Modified 11 May 1998 by Joseph S. Myers (jsm28<script type="text/javascript">document.write('@');</script><noscript>(@)</noscript>cam.ac.uk)<br />

                  Modified 990912 by aeb<br />
                  2007-10-10 mtk<br />
                      Added description of GLOB_TILDE_NOMATCH<br />

                      Expanded the description of various flags<br />

                      Various wording fixes.<br />
                  
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</body>
</html>
