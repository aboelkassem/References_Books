<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

  <title>recno(3) — Linux manual pages</title>
  <link rel="stylesheet" type="text/css" href="../stylesheet/manpages.css" />
  
  <link rel="home" href="../index.html" title="recno(3) — Linux manual pages" />
  <script type="text/javascript" src="../stylesheet/manpages.js" xml:space="preserve">
</script>
  <link rel="icon" href="../stylesheet/icon.gif" type="image/gif" />
</head>

<body onload="javascript:init()">
  <div class="navheader">
    <table width="100%">
      <tbody>
        <tr>
          <td style="width: 33%" rowspan="1" colspan="1"><a href="../index.html" shape="rect">Linux
          manual pages</a></td>

          <th rowspan="1" colspan="1"><a href="../index3.html" shape="rect">Section 3</a></th>

          <td style="width: 33%" rowspan="1" colspan="1"> </td>
        </tr>
      </tbody>
    </table>
    <hr />
  </div>

  <div class="refentry">
    <a id="recno.3" name="recno.3" shape="rect"> </a>

    <div class="titlepage"> </div>

    <div class="refnamediv">
      <h2>Name</h2>

      <p>recno — record number database access method</p>
    </div>

    <div class="refsynopsisdiv">
      <h2>Synopsis</h2>

      <div class="informalexample">
        <pre class="programlisting" xml:space="preserve">
#include &lt;sys/types.h&gt;
#include &lt;db.h&gt;
  
</pre>
      </div>
    </div>

    <div class="refsect1">
      <a id="recno-3_sect1" name="recno-3_sect1" shape="rect"> </a>

      <h2>DESCRIPTION</h2>

      <p><span class="emphasis"><em>Note well</em></span>: This
      page documents interfaces provided in glibc up until version
      2.1. Since version 2.2, glibc no longer provides these
      interfaces. Probably, you are looking for the APIs provided
      by the <code class="function">libdb</code> library
      instead.</p>

      <p>The routine <a class="link" href="../htmlman3/dbopen.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">dbopen</span>(3)</span></a> is the library
      interface to database files. One of the supported file
      formats is record number files. The general description of
      the database access methods is in <a class="link" href="../htmlman3/dbopen.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">dbopen</span>(3)</span></a>, this manual page
      describes only the recno-specific information.</p>

      <p>The record number data structure is either variable or
      fixed-length records stored in a flat-file format, accessed
      by the logical record number. The existence of record number
      five implies the existence of records one through four, and
      the deletion of record number one causes record number five
      to be renumbered to record number four, as well as the
      cursor, if positioned after record number one, to shift down
      one record.</p>

      <p>The recno access-method-specific data structure provided
      to <a class="link" href="../htmlman3/dbopen.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">dbopen</span>(3)</span></a> is defined in the
      <code class="literal">&lt;</code><code class="filename">db.h</code><code class="literal">&gt;</code>
      include file as follows:</p>

      <div class="blockquote">
        <blockquote class="blockquote">
          <div class="structdef">
            <table style="border-collapse: collapse;">
              <colgroup span="1">
                <col class="c1" span="1" />
                <col class="c2" span="1" />
                <col class="c3" span="1" />
                <col class="c4" span="1" />
                <col class="c5" span="1" />
              </colgroup>

              <tbody>
                <tr>
                  <td class="structdefhdr" style="" align="left" rowspan="1" colspan="1">
                  typedef</td>

                  <td class="structdefhdr" style="" colspan="4" align="left" rowspan="1">struct {</td>
                </tr>

                <tr>
                  <td style="" rowspan="1" colspan="1"> </td>

                  <td style="" align="left" rowspan="1" colspan="1"><span class="type">unsigned long</span></td>

                  <td class="norightpad" style="" align="right" rowspan="1" colspan="1">
                   </td>

                  <td style="" align="left" rowspan="1" colspan="1"><em class="structfield"><code>flags</code></em>;</td>

                  <td style="" align="left" rowspan="1" colspan="1"> </td>
                </tr>

                <tr>
                  <td style="" rowspan="1" colspan="1"> </td>

                  <td style="" align="left" rowspan="1" colspan="1"><span class="type">unsigned int</span></td>

                  <td class="norightpad" style="" align="right" rowspan="1" colspan="1">
                   </td>

                  <td style="" align="left" rowspan="1" colspan="1"><em class="structfield"><code>cachesize</code></em>;</td>

                  <td style="" align="left" rowspan="1" colspan="1"> </td>
                </tr>

                <tr>
                  <td style="" rowspan="1" colspan="1"> </td>

                  <td style="" align="left" rowspan="1" colspan="1"><span class="type">unsigned int</span></td>

                  <td class="norightpad" style="" align="right" rowspan="1" colspan="1">
                   </td>

                  <td style="" align="left" rowspan="1" colspan="1"><em class="structfield"><code>psize</code></em>;</td>

                  <td style="" align="left" rowspan="1" colspan="1"> </td>
                </tr>

                <tr>
                  <td style="" rowspan="1" colspan="1"> </td>

                  <td style="" align="left" rowspan="1" colspan="1"><span class="type">int</span></td>

                  <td class="norightpad" style="" align="right" rowspan="1" colspan="1">
                   </td>

                  <td style="" align="left" rowspan="1" colspan="1"><em class="structfield"><code>lorder</code></em>;</td>

                  <td style="" align="left" rowspan="1" colspan="1"> </td>
                </tr>

                <tr>
                  <td style="" rowspan="1" colspan="1"> </td>

                  <td style="" align="left" rowspan="1" colspan="1"><span class="type">size_t</span></td>

                  <td class="norightpad" style="" align="right" rowspan="1" colspan="1">
                   </td>

                  <td style="" align="left" rowspan="1" colspan="1"><em class="structfield"><code>reclen</code></em>;</td>

                  <td style="" align="left" rowspan="1" colspan="1"> </td>
                </tr>

                <tr>
                  <td style="" rowspan="1" colspan="1"> </td>

                  <td style="" align="left" rowspan="1" colspan="1"><span class="type">unsigned char</span></td>

                  <td class="norightpad" style="" align="right" rowspan="1" colspan="1">
                   </td>

                  <td style="" align="left" rowspan="1" colspan="1"><em class="structfield"><code>bval</code></em>;</td>

                  <td style="" align="left" rowspan="1" colspan="1"> </td>
                </tr>

                <tr>
                  <td style="" rowspan="1" colspan="1"> </td>

                  <td style="" align="left" rowspan="1" colspan="1"><span class="type">char</span></td>

                  <td class="norightpad" style="" align="right" rowspan="1" colspan="1">
                  *</td>

                  <td style="" align="left" rowspan="1" colspan="1"><em class="structfield"><code>bfname</code></em>;</td>

                  <td style="" align="left" rowspan="1" colspan="1"> </td>
                </tr>

                <tr>
                  <td class="structdefftr" style="" colspan="5" align="left" rowspan="1">} RECNOINFO;</td>
                </tr>
              </tbody>
            </table>
          </div>
        </blockquote>
      </div>

      <p>The elements of this structure are defined as follows:</p>

      <div class="variablelist">
        <dl class="variablelist">
          <dt><span class="term"><em class="parameter"><code>flags</code></em></span></dt>

          <dd>
            <p>The flag value is specified by ORing any of the
            following values:</p>

            <div class="blockquote">
              <blockquote class="blockquote">
                <div class="variablelist">
                  <dl class="variablelist">
                    <dt><span class="term"><code class="constant">R_FIXEDLEN</code></span></dt>

                    <dd>
                      <p>The records are fixed-length, not byte
                      delimited. The structure element <em class="parameter"><code>reclen</code></em>
                      specifies the length of the record, and the
                      structure element <em class="parameter"><code>bval</code></em> is used as
                      the pad character. Any records, inserted into
                      the database, that are less than <em class="parameter"><code>reclen</code></em> bytes
                      long are automatically padded.</p>
                    </dd>

                    <dt><span class="term"><code class="constant">R_NOKEY</code></span></dt>

                    <dd>
                      <p>In the interface specified by <a class="link" href="../htmlman3/dbopen.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">dbopen</span>(3)</span></a>,
                      the sequential record retrieval fills in both
                      the caller's key and data structures. If the
                      <code class="constant">R_NOKEY</code> flag is
                      specified, the <span class="emphasis"><em>cursor</em></span> routines
                      are not required to fill in the key
                      structure. This permits applications to
                      retrieve records at the end of files without
                      reading all of the intervening records.</p>
                    </dd>

                    <dt><span class="term"><code class="constant">R_SNAPSHOT</code></span></dt>

                    <dd>
                      <p>This flag requires that a snapshot of the
                      file be taken when <a class="link" href="../htmlman3/dbopen.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">dbopen</span>(3)</span></a>
                      is called, instead of permitting any
                      unmodified records to be read from the
                      original file.</p>
                    </dd>
                  </dl>
                </div>
              </blockquote>
            </div>
          </dd>

          <dt><span class="term"><em class="parameter"><code>cachesize</code></em></span></dt>

          <dd>
            <p>A suggested maximum size, in bytes, of the memory
            cache. This value is <span class="emphasis"><em>only</em></span> advisory, and the
            access method will allocate more memory rather than
            fail. If <em class="parameter"><code>cachesize</code></em> is 0 (no size
            is specified), a default cache is used.</p>
          </dd>

          <dt><span class="term"><em class="parameter"><code>psize</code></em></span></dt>

          <dd>
            <p>The recno access method stores the in-memory copies
            of its records in a btree. This value is the size (in
            bytes) of the pages used for nodes in that tree. If
            <em class="parameter"><code>psize</code></em> is 0 (no
            page size is specified), a page size is chosen based on
            the underlying filesystem I/O block size. See <a class="link" href="../htmlman3/btree.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">btree</span>(3)</span></a> for more
            information.</p>
          </dd>

          <dt><span class="term"><em class="parameter"><code>lorder</code></em></span></dt>

          <dd>
            <p>The byte order for integers in the stored database
            metadata. The number should represent the order as an
            integer; for example, big endian order would be the
            number 4,321. If <em class="parameter"><code>lorder</code></em> is 0 (no order is
            specified), the current host order is used.</p>
          </dd>

          <dt><span class="term"><em class="parameter"><code>reclen</code></em></span></dt>

          <dd>
            <p>The length of a fixed-length record.</p>
          </dd>

          <dt><span class="term"><em class="parameter"><code>bval</code></em></span></dt>

          <dd>
            <p>The delimiting byte to be used to mark the end of a
            record for variable-length records, and the pad
            character for fixed-length records. If no value is
            specified, newlines ("\n") are used to mark the end of
            variable-length records and fixed-length records are
            padded with spaces.</p>
          </dd>

          <dt><span class="term"><em class="parameter"><code>bfname</code></em></span></dt>

          <dd>
            <p>The recno access method stores the in-memory copies
            of its records in a btree. If <em class="parameter"><code>bfname</code></em> is non-NULL, it
            specifies the name of the btree file, as if specified
            as the filename for a <a class="link" href="../htmlman3/dbopen.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">dbopen</span>(3)</span></a> of a btree
            file.</p>
          </dd>
        </dl>
      </div>

      <p>The data part of the key/data pair used by the
      <code class="function">recno</code> access method is the same
      as other access methods. The key is different. The
      <code class="varname">data</code> field of the key should be
      a pointer to a memory location of type <span class="type">recno_t</span>, as defined in the <code class="literal">&lt;</code><code class="filename">db.h</code><code class="literal">&gt;</code>
      include file. This type is normally the largest unsigned
      integral type available to the implementation. The
      <code class="varname">size</code> field of the key should be
      the size of that type.</p>

      <p>Because there can be no metadata associated with the
      underlying recno access method files, any changes made to the
      default values (e.g., fixed record length or byte separator
      value) must be explicitly specified each time the file is
      opened.</p>

      <p>In the interface specified by <a class="link" href="../htmlman3/dbopen.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">dbopen</span>(3)</span></a>, using the
      <code class="function">put</code> interface to create a new
      record will cause the creation of multiple, empty records if
      the record number is more than one greater than the largest
      record currently in the database.</p>
    </div>

    <div class="refsect1">
      <a id="recno-3_sect2" name="recno-3_sect2" shape="rect"> </a>

      <h2>ERRORS</h2>

      <p>The <code class="function">recno</code> access method
      routines may fail and set <code class="varname">errno</code>
      for any of the errors specified for the library routine
      <a class="link" href="../htmlman3/dbopen.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">dbopen</span>(3)</span></a> or the
      following:</p>

      <div class="variablelist">
        <dl class="variablelist">
          <dt><span class="term"><span class="errorname">EINVAL</span></span></dt>

          <dd>
            <p>An attempt was made to add a record to a
            fixed-length database that was too large to fit.</p>
          </dd>
        </dl>
      </div>
    </div>

    <div class="refsect1">
      <a id="recno-3_sect3" name="recno-3_sect3" shape="rect"> </a>

      <h2>BUGS</h2>

      <p>Only big and little endian byte order is supported.</p>
    </div>

    <div class="refsect1">
      <a id="recno-3_sect4" name="recno-3_sect4" shape="rect"> </a>

      <h2>SEE ALSO</h2>

      <p><a class="link" href="../htmlman3/btree.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">btree</span>(3)</span></a>, <a class="link" href="../htmlman3/dbopen.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">dbopen</span>(3)</span></a>, <a class="link" href="../htmlman3/hash.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">hash</span>(3)</span></a>, <a class="link" href="../htmlman3/mpool.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">mpool</span>(3)</span></a></p>

      <p><span class="emphasis"><em>Document Processing in a
      Relational Database System</em></span>, Michael Stonebraker,
      Heidi Stettner, Joseph Kalash, Antonin Guttman, Nadene Lynn,
      Memorandum No. UCB/ERL M82/32, May 1982.</p>
    </div>

    <div class="colophon">
      <a id="recno-3_sect5" name="recno-3_sect5" shape="rect"> </a>

      <h2>COLOPHON</h2>

      <p>This page is part of release 3.72 of the Linux <em class="replaceable"><code>man-pages</code></em> project. A
      description of the project, information about reporting bugs,
      and the latest version of this page, can be found at
      http://www.kernel.org/doc/man−pages/.</p>

      <div class="license">
        <table style="border-collapse: collapse;">
          <colgroup span="1">
            <col span="1" />
          </colgroup>

          <tbody>
            <tr>
              <td style="" rowspan="1" colspan="1">
                <div class="literallayout">
                  <br />
                    Copyright (c) 1990, 1993<br />

                  The Regents of the University of California.  All rights reserved.<br />

                  <br />
                  %%%LICENSE_START(BSD_4_CLAUSE_UCB)<br />
                  Redistribution and use in source and binary forms, with or without<br />

                  modification, are permitted provided that the following conditions<br />

                  are met:<br />
                  1. Redistributions of source code must retain the above copyright<br />

                     notice, this list of conditions and the following disclaimer.<br />

                  2. Redistributions in binary form must reproduce the above copyright<br />

                     notice, this list of conditions and the following disclaimer in the<br />

                     documentation and/or other materials provided with the distribution.<br />

                  3. All advertising materials mentioning features or use of this software<br />

                     must display the following acknowledgement:<br />

                  This product includes software developed by the University of<br />

                  California, Berkeley and its contributors.<br />

                  4. Neither the name of the University nor the names of its contributors<br />

                     may be used to endorse or promote products derived from this software<br />

                     without specific prior written permission.<br />

                  <br />
                  THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND<br />

                  ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE<br />

                  IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE<br />

                  ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE<br />

                  FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL<br />

                  DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS<br />

                  OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)<br />

                  HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT<br />

                  LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY<br />

                  OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF<br />

                  SUCH DAMAGE.<br />
                  %%%LICENSE_END<br />
                  <br />
                  <script type="text/javascript">document.write('@');</script><noscript>(@)</noscript>(#)recno.3
                  8.5 (Berkeley) 8/18/94<br />
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</body>
</html>
